
Š€€€+=r*L,d+=r*B,p+=r*F,h+=r*U,m+=r*z,v+=r*G,g+=r*H,b+=r*q,y+=r*V,_+=r*W,E+=r*K,w+=r*$,x+=r*Y,S+=r*X,O+=r*Z,f+=(r=t[6])*j,d+=r*L,p+=r*B,h+=r*F,m+=r*U,v+=r*z,g+=r*G,b+=r*H,y+=r*q,_+=r*V,E+=r*W,w+=r*K,x+=r*$,S+=r*Y,O+=r*X,M+=r*Z,d+=(r=t[7])*j,p+=r*L,h+=r*B,m+=r*F,v+=r*U,g+=r*z,b+=r*G,y+=r*H,_+=r*q,E+=r*V,w+=r*W,x+=r*K,S+=r*$,O+=r*Y,M+=r*X,T+=r*Z,p+=(r=t[8])*j,h+=r*L,m+=r*B,v+=r*F,g+=r*U,b+=r*z,y+=r*G,_+=r*H,E+=r*q,w+=r*V,x+=r*W,S+=r*K,O+=r*$,M+=r*Y,T+=r*X,C+=r*Z,h+=(r=t[9])*j,m+=r*L,v+=r*B,g+=r*F,b+=r*U,y+=r*z,_+=r*G,E+=r*H,w+=r*q,x+=r*V,S+=r*W,O+=r*K,M+=r*$,T+=r*Y,C+=r*X,P+=r*Z,m+=(r=t[10])*j,v+=r*L,g+=r*B,b+=r*F,y+=r*U,_+=r*z,E+=r*G,w+=r*H,x+=r*q,S+=r*V,O+=r*W,M+=r*K,T+=r*$,C+=r*Y,P+=r*X,A+=r*Z,v+=(r=t[11])*j,g+=r*L,b+=r*B,y+=r*F,_+=r*U,E+=r*z,w+=r*G,x+=r*H,S+=r*q,O+=r*V,M+=r*W,T+=r*K,C+=r*$,P+=r*Y,A+=r*X,N+=r*Z,g+=(r=t[12])*j,b+=r*L,y+=r*B,_+=r*F,E+=r*U,w+=r*z,x+=r*G,S+=r*H,O+=r*q,M+=r*V,T+=r*W,C+=r*K,P+=r*$,A+=r*Y,N+=r*X,k+=r*Z,b+=(r=t[13])*j,y+=r*L,_+=r*B,E+=r*F,w+=r*U,x+=r*z,S+=r*G,O+=r*H,M+=r*q,T+=r*V,C+=r*W,P+=r*K,A+=r*$,N+=r*Y,k+=r*X,R+=r*Z,y+=(r=t[14])*j,_+=r*L,E+=r*B,w+=r*F,x+=r*U,S+=r*z,O+=r*G,M+=r*H,T+=r*q,C+=r*V,P+=r*W,A+=r*K,N+=r*$,k+=r*Y,R+=r*X,D+=r*Z,_+=(r=t[15])*j,a+=38*(w+=r*B),s+=38*(x+=r*F),u+=38*(S+=r*U),c+=38*(O+=r*z),l+=38*(M+=r*G),f+=38*(T+=r*H),d+=38*(C+=r*q),p+=38*(P+=r*V),h+=38*(A+=r*W),m+=38*(N+=r*K),v+=38*(k+=r*$),g+=38*(R+=r*Y),b+=38*(D+=r*X),y+=38*(I+=r*Z),o=(r=(o+=38*(E+=r*L))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),_=(r=_+i+65535)-65536*(i=Math.floor(r/65536)),o=(r=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(r/65536)),a=(r=a+i+65535)-65536*(i=Math.floor(r/65536)),s=(r=s+i+65535)-65536*(i=Math.floor(r/65536)),u=(r=u+i+65535)-65536*(i=Math.floor(r/65536)),c=(r=c+i+65535)-65536*(i=Math.floor(r/65536)),l=(r=l+i+65535)-65536*(i=Math.floor(r/65536)),f=(r=f+i+65535)-65536*(i=Math.floor(r/65536)),d=(r=d+i+65535)-65536*(i=Math.floor(r/65536)),p=(r=p+i+65535)-65536*(i=Math.floor(r/65536)),h=(r=h+i+65535)-65536*(i=Math.floor(r/65536)),m=(r=m+i+65535)-65536*(i=Math.floor(r/65536)),v=(r=v+i+65535)-65536*(i=Math.floor(r/65536)),g=(r=g+i+65535)-65536*(i=Math.floor(r/65536)),b=(r=b+i+65535)-65536*(i=Math.floor(r/65536)),y=(r=y+i+65535)-65536*(i=Math.floor(r/65536)),_=(r=_+i+65535)-65536*(i=Math.floor(r/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=a,e[2]=s,e[3]=u,e[4]=c,e[5]=l,e[6]=f,e[7]=d,e[8]=p,e[9]=h,e[10]=m,e[11]=v,e[12]=g,e[13]=b,e[14]=y,e[15]=_}function M(e,t){O(e,t,t)}function T(e,t){var n,r=$();for(n=0;n<16;n++)r[n]=t[n];for(n=253;n>=0;n--)M(r,r),2!==n&&4!==n&&O(r,r,t);for(n=0;n<16;n++)e[n]=r[n]}function C(e,t,n){var r,i,o=new Uint8Array(32),a=new Float64Array(80),s=$(),u=$(),c=$(),l=$(),f=$(),d=$();for(i=0;i<31;i++)o[i]=t[i];for(o[31]=127&t[31]|64,o[0]&=248,w(a,n),i=0;i<16;i++)u[i]=a[i],l[i]=s[i]=c[i]=0;for(s[0]=l[0]=1,i=254;i>=0;--i)b(s,u,r=o[i>>>3]>>>(7&i)&1),b(c,l,r),x(f,s,c),S(s,s,c),x(c,u,l),S(u,u,l),M(l,f),M(d,s),O(s,c,s),O(c,u,f),x(f,s,c),S(s,s,c),M(u,s),S(c,l,d),O(s,c,ee),x(s,s,l),O(c,c,s),O(s,l,d),O(l,u,a),M(u,f),b(s,u,r),b(c,l,r);for(i=0;i<16;i++)a[i+16]=s[i],a[i+32]=c[i],a[i+48]=u[i],a[i+64]=l[i];var p=a.subarray(32),h=a.subarray(16);return T(p,p),O(h,h,p),y(e,h),0}function P(e,t){return C(e,t,Z)}function A(e,t){return Y(t,32),P(e,t)}function N(e,t,n){var r=new Uint8Array(32);return C(r,n,t),s(e,X,r,ae)}function k(e,t,n,r){for(var i,o,a,s,u,c,l,f,d,p,h,m,v,g,b,y,_,E,w,x,S,O,M,T,C,P,A=new Int32Array(16),N=new Int32Array(16),k=e[0],R=e[1],D=e[2],I=e[3],j=e[4],L=e[5],B=e[6],F=e[7],U=t[0],z=t[1],G=t[2],H=t[3],q=t[4],V=t[5],W=t[6],K=t[7],$=0;r>=128;){for(w=0;w<16;w++)x=8*w+$,A[w]=n[x+0]<<24|n[x+1]<<16|n[x+2]<<8|n[x+3],N[w]=n[x+4]<<24|n[x+5]<<16|n[x+6]<<8|n[x+7];for(w=0;w<80;w++)if(i=k,o=R,a=D,s=I,u=j,c=L,l=B,f=F,d=U,p=z,h=G,m=H,v=q,g=V,b=W,y=K,S=F,O=K,M=65535&O,T=O>>>16,C=65535&S,P=S>>>16,S=(j>>>14|q<<18)^(j>>>18|q<<14)^(q>>>9|j<<23),O=(q>>>14|j<<18)^(q>>>18|j<<14)^(j>>>9|q<<23),M+=65535&O,T+=O>>>16,C+=65535&S,P+=S>>>16,S=j&L^~j&B,O=q&V^~q&W,M+=65535&O,T+=O>>>16,C+=65535&S,P+=S>>>16,S=le[2*w],O=le[2*w+1],M+=65535&O,T+=O>>>16,C+=65535&S,P+=S>>>16,S=A[w%16],O=N[w%16],M+=65535&O,T+=O>>>16,C+=65535&S,P+=S>>>16,T+=M>>>16,C+=T>>>16,P+=C>>>16,_=65535&C|P<<16,E=65535&M|T<<16,S=_,O=E,M=65535&O,T=O>>>16,C=65535&S,P=S>>>16,S=(k>>>28|U<<4)^(U>>>2|k<<30)^(U>>>7|k<<25),O=(U>>>28|k<<4)^(k>>>2|U<<30)^(k>>>7|U<<25),M+=65535&O,T+=O>>>16,C+=65535&S,P+=S>>>16,S=k&R^k&D^R&D,O=U&z^U&G^z&G,M+=65535&O,T+=O>>>16,C+=65535&S,P+=S>>>16,T+=M>>>16,C+=T>>>16,P+=C>>>16,f=65535&C|P<<16,y=65535&M|T<<16,S=s,O=m,M=65535&O,T=O>>>16,C=65535&S,P=S>>>16,S=_,O=E,M+=65535&O,T+=O>>>16,C+=65535&S,P+=S>>>16,T+=M>>>16,C+=T>>>16,P+=C>>>16,s=65535&C|P<<16,m=65535&M|T<<16,R=i,D=o,I=a,j=s,L=u,B=c,F=l,k=f,z=d,G=p,H=h,q=m,V=v,W=g,K=b,U=y,w%16==15)for(x=0;x<16;x++)S=A[x],M=65535&(O=N[x]),T=O>>>16,C=65535&S,P=S>>>16,S=A[(x+9)%16],M+=65535&(O=N[(x+9)%16]),T+=O>>>16,C+=65535&S,P+=S>>>16,_=A[(x+1)%16],M+=65535&(O=((E=N[(x+1)%16])>>>1|_<<31)^(E>>>8|_<<24)^(E>>>7|_<<25)),T+=O>>>16,C+=65535&(S=(_>>>1|E<<31)^(_>>>8|E<<24)^_>>>7),P+=S>>>16,_=A[(x+14)%16],T+=(O=((E=N[(x+14)%16])>>>19|_<<13)^(_>>>29|E<<3)^(E>>>6|_<<26))>>>16,C+=65535&(S=(_>>>19|E<<13)^(E>>>29|_<<3)^_>>>6),P+=S>>>16,P+=(C+=(T+=(M+=65535&O)>>>16)>>>16)>>>16,A[x]=65535&C|P<<16,N[x]=65535&M|T<<16;M=65535&(O=U),T=O>>>16,C=65535&(S=k),P=S>>>16,S=e[0],T+=(O=t[0])>>>16,C+=65535&S,P+=S>>>16,P+=(C+=(T+=(M+=65535&O)>>>16)>>>16)>>>16,e[0]=k=65535&C|P<<16,t[0]=U=65535&M|T<<16,M=65535&(O=z),T=O>>>16,C=65535&(S=R),P=S>>>16,S=e[1],T+=(O=t[1])>>>16,C+=65535&S,P+=S>>>16,P+=(C+=(T+=(M+=65535&O)>>>16)>>>16)>>>16,e[1]=R=65535&C|P<<16,t[1]=z=65535&M|T<<16,M=65535&(O=G),T=O>>>16,C=65535&(S=D),P=S>>>16,S=e[2],T+=(O=t[2])>>>16,C+=65535&S,P+=S>>>16,P+=(C+=(T+=(M+=65535&O)>>>16)>>>16)>>>16,e[2]=D=65535&C|P<<16,t[2]=G=65535&M|T<<16,M=65535&(O=H),T=O>>>16,C=65535&(S=I),P=S>>>16,S=e[3],T+=(O=t[3])>>>16,C+=65535&S,P+=S>>>16,P+=(C+=(T+=(M+=65535&O)>>>16)>>>16)>>>16,e[3]=I=65535&C|P<<16,t[3]=H=65535&M|T<<16,M=65535&(O=q),T=O>>>16,C=65535&(S=j),P=S>>>16,S=e[4],T+=(O=t[4])>>>16,C+=65535&S,P+=S>>>16,P+=(C+=(T+=(M+=65535&O)>>>16)>>>16)>>>16,e[4]=j=65535&C|P<<16,t[4]=q=65535&M|T<<16,M=65535&(O=V),T=O>>>16,C=65535&(S=L),P=S>>>16,S=e[5],T+=(O=t[5])>>>16,C+=65535&S,P+=S>>>16,P+=(C+=(T+=(M+=65535&O)>>>16)>>>16)>>>16,e[5]=L=65535&C|P<<16,t[5]=V=65535&M|T<<16,M=65535&(O=W),T=O>>>16,C=65535&(S=B),P=S>>>16,S=e[6],T+=(O=t[6])>>>16,C+=65535&S,P+=S>>>16,P+=(C+=(T+=(M+=65535&O)>>>16)>>>16)>>>16,e[6]=B=65535&C|P<<16,t[6]=W=65535&M|T<<16,M=65535&(O=K),T=O>>>16,C=65535&(S=F),P=S>>>16,S=e[7],T+=(O=t[7])>>>16,C+=65535&S,P+=S>>>16,P+=(C+=(T+=(M+=65535&O)>>>16)>>>16)>>>16,e[7]=F=65535&C|P<<16,t[7]=K=65535&M|T<<16,$+=128,r-=128}return r}function R(e,n,r){var i,o=new Int32Array(8),a=new Int32Array(8),s=new Uint8Array(256),u=r;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,a[0]=4089235720,a[1]=2227873595,a[2]=4271175723,a[3]=1595750129,a[4]=2917565137,a[5]=725511199,a[6]=4215389547,a[7]=327033209,k(o,a,n,r),r%=128,i=0;i<r;i++)s[i]=n[u-r+i];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,t(s,r-8,u/536870912|0,u<<3),k(o,a,s,r),i=0;i<8;i++)t(e,8*i,o[i],a[i]);return 0}function D(e,t){var n=$(),r=$(),i=$(),o=$(),a=$(),s=$(),u=$(),c=$(),l=$();S(n,e[1],e[0]),S(l,t[1],t[0]),O(n,n,l),x(r,e[0],e[1]),x(l,t[0],t[1]),O(r,r,l),O(i,e[3],t[3]),O(i,i,ne),O(o,e[2],t[2]),x(o,o,o),S(a,r,n),S(s,o,i),x(u,o,i),x(c,r,n),O(e[0],a,s),O(e[1],c,u),O(e[2],u,s),O(e[3],a,c)}function I(e,t,n){var r;for(r=0;r<4;r++)b(e[r],t[r],n)}function j(e,t){var n=$(),r=$(),i=$();T(i,t[2]),O(n,t[0],i),O(r,t[1],i),y(e,r),e[31]^=E(n)<<7}function L(e,t,n){var r,i;for(v(e[0],Q),v(e[1],J),v(e[2],J),v(e[3],Q),i=255;i>=0;--i)I(e,t,r=n[i/8|0]>>(7&i)&1),D(t,e),D(e,e),I(e,t,r)}function B(e,t){var n=[$(),$(),$(),$()];v(n[0],re),v(n[1],ie),v(n[2],J),O(n[3],re,ie),L(e,n,t)}function F(e,t,n){var r,i=new Uint8Array(64),o=[$(),$(),$(),$()];for(n||Y(t,32),R(i,t,32),i[0]&=248,i[31]&=127,i[31]|=64,B(o,i),j(e,o),r=0;r<32;r++)t[r+32]=e[r];return 0}function U(e,t){var n,r,i,o;for(r=63;r>=32;--r){for(n=0,i=r-32,o=r-12;i<o;++i)t[i]+=n-16*t[r]*fe[i-(r-32)],n=t[i]+128>>8,t[i]-=256*n;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;i++)t[i]+=n-(t[31]>>4)*fe[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=n*fe[i];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function z(e){var t,n=new Float64Array(64);for(t=0;t<64;t++)n[t]=e[t];for(t=0;t<64;t++)e[t]=0;U(e,n)}function G(e,t,n,r){var i,o,a=new Uint8Array(64),s=new Uint8Array(64),u=new Uint8Array(64),c=new Float64Array(64),l=[$(),$(),$(),$()];R(a,r,32),a[0]&=248,a[31]&=127,a[31]|=64;var f=n+64;for(i=0;i<n;i++)e[64+i]=t[i];for(i=0;i<32;i++)e[32+i]=a[32+i];for(R(u,e.subarray(32),n+32),z(u),B(l,u),j(e,l),i=32;i<64;i++)e[i]=r[i];for(R(s,e,n+64),z(s),i=0;i<64;i++)c[i]=0;for(i=0;i<32;i++)c[i]=u[i];for(i=0;i<32;i++)for(o=0;o<32;o++)c[i+o]+=s[i]*a[o];return U(e.subarray(32),c),f}function H(e,t){var n=$(),r=$(),i=$(),o=$(),a=$(),s=$(),u=$();return v(e[2],J),w(e[1],t),M(i,e[1]),O(o,i,te),S(i,i,e[2]),x(o,e[2],o),M(a,o),M(s,a),O(u,s,a),O(n,u,i),O(n,n,o),function(e,t){var n,r=$();for(n=0;n<16;n++)r[n]=t[n];for(n=250;n>=0;n--)M(r,r),1!==n&&O(r,r,t);for(n=0;n<16;n++)e[n]=r[n]}(n,n),O(n,n,i),O(n,n,o),O(n,n,o),O(e[0],n,o),M(r,e[0]),O(r,r,o),_(r,i)&&O(e[0],e[0],oe),M(r,e[0]),O(r,r,o),_(r,i)?-1:(E(e[0])===t[31]>>7&&S(e[0],Q,e[0]),O(e[3],e[0],e[1]),0)}function q(e,t,n,r){var i,a=new Uint8Array(32),s=new Uint8Array(64),u=[$(),$(),$(),$()],c=[$(),$(),$(),$()];if(-1,n<64)return-1;if(H(c,r))return-1;for(i=0;i<n;i++)e[i]=t[i];for(i=0;i<32;i++)e[i+32]=r[i];if(R(s,e,n),z(s),L(u,c,s),B(c,t.subarray(32)),D(u,c),j(a,u),n-=64,o(t,0,a,0)){for(i=0;i<n;i++)e[i]=0;return-1}for(i=0;i<n;i++)e[i]=t[i+64];return n}function V(e,t){if(e.length!==de)throw new Error("bad key size");if(t.length!==pe)throw new Error("bad nonce size")}function W(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function K(e){for(var t=0;t<e.length;t++)e[t]=0}var $=function(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;t++)n[t]=e[t];return n},Y=function(){throw new Error("no PRNG")},X=new Uint8Array(16),Z=new Uint8Array(32);Z[0]=9;var Q=$(),J=$([1]),ee=$([56129,1]),te=$([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),ne=$([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),re=$([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ie=$([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),oe=$([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),ae=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),se=function(e){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var t,n,r,i,o,a,s,u;t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,n=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|n<<3),r=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(n>>>10|r<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(r>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,a=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|a<<2),s=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(a>>>11|s<<5),u=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(s>>>8|u<<8),this.r[9]=u>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};se.prototype.blocks=function(e,t,n){for(var r,i,o,a,s,u,c,l,f,d,p,h,m,v,g,b,y,_,E,w=this.fin?0:2048,x=this.h[0],S=this.h[1],O=this.h[2],M=this.h[3],T=this.h[4],C=this.h[5],P=this.h[6],A=this.h[7],N=this.h[8],k=this.h[9],R=this.r[0],D=this.r[1],I=this.r[2],j=this.r[3],L=this.r[4],B=this.r[5],F=this.r[6],U=this.r[7],z=this.r[8],G=this.r[9];n>=16;)d=f=0,d+=(x+=8191&(r=255&e[t+0]|(255&e[t+1])<<8))*R,d+=(S+=8191&(r>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*G),d+=(O+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*z),d+=(M+=8191&(o>>>7|(a=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*U),f=(d+=(T+=8191&(a>>>4|(s=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*F))>>>13,d&=8191,d+=(C+=s>>>1&8191)*(5*B),d+=(P+=8191&(s>>>14|(u=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*L),d+=(A+=8191&(u>>>11|(c=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*j),d+=(N+=8191&(c>>>8|(l=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*I),p=f+=(d+=(k+=l>>>5|w)*(5*D))>>>13,p+=x*D,p+=S*R,p+=O*(5*G),p+=M*(5*z),f=(p+=T*(5*U))>>>13,p&=8191,p+=C*(5*F),p+=P*(5*B),p+=A*(5*L),p+=N*(5*j),f+=(p+=k*(5*I))>>>13,p&=8191,h=f,h+=x*I,h+=S*D,h+=O*R,h+=M*(5*G),f=(h+=T*(5*z))>>>13,h&=8191,h+=C*(5*U),h+=P*(5*F),h+=A*(5*B),h+=N*(5*L),m=f+=(h+=k*(5*j))>>>13,m+=x*j,m+=S*I,m+=O*D,m+=M*R,f=(m+=T*(5*G))>>>13,m&=8191,m+=C*(5*z),m+=P*(5*U),m+=A*(5*F),m+=N*(5*B),v=f+=(m+=k*(5*L))>>>13,v+=x*L,v+=S*j,v+=O*I,v+=M*D,f=(v+=T*R)>>>13,v&=8191,v+=C*(5*G),v+=P*(5*z),v+=A*(5*U),v+=N*(5*F),g=f+=(v+=k*(5*B))>>>13,g+=x*B,g+=S*L,g+=O*j,g+=M*I,f=(g+=T*D)>>>13,g&=8191,g+=C*R,g+=P*(5*G),g+=A*(5*z),g+=N*(5*U),b=f+=(g+=k*(5*F))>>>13,b+=x*F,b+=S*B,b+=O*L,b+=M*j,f=(b+=T*I)>>>13,b&=8191,b+=C*D,b+=P*R,b+=A*(5*G),b+=N*(5*z),y=f+=(b+=k*(5*U))>>>13,y+=x*U,y+=S*F,y+=O*B,y+=M*L,f=(y+=T*j)>>>13,y&=8191,y+=C*I,y+=P*D,y+=A*R,y+=N*(5*G),_=f+=(y+=k*(5*z))>>>13,_+=x*z,_+=S*U,_+=O*F,_+=M*B,f=(_+=T*L)>>>13,_&=8191,_+=C*j,_+=P*I,_+=A*D,_+=N*R,E=f+=(_+=k*(5*G))>>>13,E+=x*G,E+=S*z,E+=O*U,E+=M*F,f=(E+=T*B)>>>13,E&=8191,E+=C*L,E+=P*j,E+=A*I,E+=N*D,x=d=8191&(f=(f=((f+=(E+=k*R)>>>13)<<2)+f|0)+(d&=8191)|0),S=p+=f>>>=13,O=h&=8191,M=m&=8191,T=v&=8191,C=g&=8191,P=b&=8191,A=y&=8191,N=_&=8191,k=E&=8191,t+=16,n-=16;this.h[0]=x,this.h[1]=S,this.h[2]=O,this.h[3]=M,this.h[4]=T,this.h[5]=C,this.h[6]=P,this.h[7]=A,this.h[8]=N,this.h[9]=k},se.prototype.finish=function(e,t){var n,r,i,o,a=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=n,n=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,a[0]=this.h[0]+5,n=a[0]>>>13,a[0]&=8191,o=1;o<10;o++)a[o]=this.h[o]+n,n=a[o]>>>13,a[o]&=8191;for(a[9]-=8192,r=(1^n)-1,o=0;o<10;o++)a[o]&=r;for(r=~r,o=0;o<10;o++)this.h[o]=this.h[o]&r|a[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},se.prototype.update=function(e,t,n){var r,i;if(this.leftover){for((i=16-this.leftover)>n&&(i=n),r=0;r<i;r++)this.buffer[this.leftover+r]=e[t+r];if(n-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(i=n-n%16,this.blocks(e,t,i),t+=i,n-=i),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=e[t+r];this.leftover+=n}};var ue=h,ce=m,le=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],fe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),de=32,pe=24,he=32,me=32,ve=pe;e.lowlevel={crypto_core_hsalsa20:s,crypto_stream_xor:f,crypto_stream:l,crypto_stream_salsa20_xor:u,crypto_stream_salsa20:c,crypto_onetimeauth:d,crypto_onetimeauth_verify:p,crypto_verify_16:i,crypto_verify_32:o,crypto_secretbox:h,crypto_secretbox_open:m,crypto_scalarmult:C,crypto_scalarmult_base:P,crypto_box_beforenm:N,crypto_box_afternm:ue,crypto_box:function(e,t,n,r,i,o){var a=new Uint8Array(32);return N(a,i,o),ue(e,t,n,r,a)},crypto_box_open:function(e,t,n,r,i,o){var a=new Uint8Array(32);return N(a,i,o),ce(e,t,n,r,a)},crypto_box_keypair:A,crypto_hash:R,crypto_sign:G,crypto_sign_keypair:F,crypto_sign_open:q,crypto_secretbox_KEYBYTES:de,crypto_secretbox_NONCEBYTES:pe,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:he,crypto_box_SECRETKEYBYTES:me,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:ve,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},e.randomBytes=function(e){var t=new Uint8Array(e);return Y(t,e),t},e.secretbox=function(e,t,n){W(e,t,n),V(n,t);for(var r=new Uint8Array(32+e.length),i=new Uint8Array(r.length),o=0;o<e.length;o++)r[o+32]=e[o];return h(i,r,r.length,t,n),i.subarray(16)},e.secretbox.open=function(e,t,n){W(e,t,n),V(n,t);for(var r=new Uint8Array(16+e.length),i=new Uint8Array(r.length),o=0;o<e.length;o++)r[o+16]=e[o];return r.length<32?null:0!==m(i,r,r.length,t,n)?null:i.subarray(32)},e.secretbox.keyLength=de,e.secretbox.nonceLength=pe,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(W(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var n=new Uint8Array(32);return C(n,e,t),n},e.scalarMult.base=function(e){if(W(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return P(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,n,r,i){var o=e.box.before(r,i);return e.secretbox(t,n,o)},e.box.before=function(e,t){W(e,t),function(e,t){if(e.length!==he)throw new Error("bad public key size");if(t.length!==me)throw new Error("bad secret key size")}(e,t);var n=new Uint8Array(32);return N(n,e,t),n},e.box.after=e.secretbox,e.box.open=function(t,n,r,i){var o=e.box.before(r,i);return e.secretbox.open(t,n,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(he),t=new Uint8Array(me);return A(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(W(e),e.length!==me)throw new Error("bad secret key size");var t=new Uint8Array(he);return P(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=he,e.box.secretKeyLength=me,e.box.sharedKeyLength=32,e.box.nonceLength=ve,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(W(e,t),64!==t.length)throw new Error("bad secret key size");var n=new Uint8Array(64+e.length);return G(n,e,e.length,t),n},e.sign.open=function(e,t){if(W(e,t),32!==t.length)throw new Error("bad public key size");var n=new Uint8Array(e.length),r=q(n,e,e.length,t);if(r<0)return null;for(var i=new Uint8Array(r),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached=function(t,n){for(var r=e.sign(t,n),i=new Uint8Array(64),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached.verify=function(e,t,n){if(W(e,t,n),64!==t.length)throw new Error("bad signature size");if(32!==n.length)throw new Error("bad public key size");var r,i=new Uint8Array(64+e.length),o=new Uint8Array(64+e.length);for(r=0;r<64;r++)i[r]=t[r];for(r=0;r<e.length;r++)i[r+64]=e[r];return q(o,i,i.length,n)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return F(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(W(e),64!==e.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),n=0;n<t.length;n++)t[n]=e[32+n];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(W(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),n=new Uint8Array(64),r=0;r<32;r++)n[r]=e[r];return F(t,n,!0),{publicKey:t,secretKey:n}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){W(e);var t=new Uint8Array(64);return R(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return W(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===r(e,0,t,0,e.length))},e.setPRNG=function(e){Y=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG(function(e,n){var r,i=new Uint8Array(n);for(r=0;r<n;r+=65536)t.getRandomValues(i.subarray(r,r+Math.min(n-r,65536)));for(r=0;r<n;r++)e[r]=i[r];K(i)})}else(t=n(2537))&&t.randomBytes&&e.setPRNG(function(e,n){var r,i=t.randomBytes(n);for(r=0;r<n;r++)e[r]=i[r];K(i)})}()}(void 0!==e&&e.exports?e.exports:self.nacl=self.nacl||{})},function(e,t){},function(e,t,n){"use strict";var r=n(13),i=n(14),o=n(308);e.exports=function(e,t,a){function s(e){if("function"!=typeof e)throw new Error("callback is required")}a=a||n(2539)(t);var u=function(){function t(e){r(this,t),a.validatePublicKey(e),this._key=e}return i(t,[{key:"verify",value:function(e,t,n){s(n),a.hashAndVerify(this._key,t,e,n)}},{key:"marshal",value:function(){return a.compressPublicKey(this._key)}},{key:"equals",value:function(e){return this.bytes.equals(e.bytes)}},{key:"hash",value:function(e){s(e),o(this.bytes,"sha2-256",e)}},{key:"bytes",get:function(){return e.PublicKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()})}}]),t}(),c=function(){function t(e,n){r(this,t),this._key=e,this._publicKey=n||a.computePublicKey(e),a.validatePrivateKey(this._key),a.validatePublicKey(this._publicKey)}return i(t,[{key:"sign",value:function(e,t){s(t),a.hashAndSign(this._key,e,t)}},{key:"marshal",value:function(){return this._key}},{key:"equals",value:function(e){return this.bytes.equals(e.bytes)}},{key:"hash",value:function(e){s(e),o(this.bytes,"sha2-256",e)}},{key:"public",get:function(){return new u(this._publicKey)}},{key:"bytes",get:function(){return e.PrivateKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()})}}]),t}();return{Secp256k1PublicKey:u,Secp256k1PrivateKey:c,unmarshalSecp256k1PrivateKey:function(e,t){t(null,new c(e),null)},unmarshalSecp256k1PublicKey:function(e){return new u(e)},generateKeyPair:function(e,t){void 0===t&&"function"==typeof e&&(t=e),s(t),a.generateKey(function(e,n){if(e)return t(e);var r;try{r=new c(n)}catch(e){return t(e)}t(null,r)})}}}},function(e,t,n){"use strict";var r=n(2540),i=n(308),o=n(860),a="sha2-256";e.exports=function(e){function t(e){if(!r.privateKeyVerify(e))throw new Error("Invalid private key")}return{generateKey:function(t){var n;do{n=e(32)}while(!r.privateKeyVerify(n));!function(e,n){o(function(){return t(e,n)})}(null,n)},privateKeyLength:32,hashAndSign:function(e,t,n){var s=function(e,t){return o(function(){return n(e,t)})};i.digest(t,a,function(t,n){if(t)return s(t);try{var i=r.sign(n,e),o=r.signatureExport(i.signature);return s(null,o)}catch(t){s(t)}})},hashAndVerify:function(e,t,n,s){var u=function(e,t){return o(function(){return s(e,t)})};i.digest(n,a,function(n,i){if(n)return u(n);try{t=r.signatureImport(t);var o=r.verify(i,t,e);return u(null,o)}catch(n){u(n)}})},compressPublicKey:function(e){if(!r.publicKeyVerify(e))throw new Error("Invalid public key");return r.publicKeyConvert(e,!0)},decompressPublicKey:function(e){return r.publicKeyConvert(e,!1)},validatePrivateKey:t,validatePublicKey:function(e){if(!r.publicKeyVerify(e))throw new Error("Invalid public key")},computePublicKey:function(e){return t(e),r.publicKeyCreate(e)}}}},function(e,t,n){"use strict";e.exports=n(2541)(n(2545))},function(e,t,n){"use strict";function r(e,t){return void 0===e?t:(i.isBoolean(e,a.COMPRESSED_TYPE_INVALID),e)}var i=n(2542),o=n(2543),a=n(1215);e.exports=function(e){return{privateKeyVerify:function(t){return i.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,n){i.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),i.isBufferLength(t,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),n=r(n,!0);var s=e.privateKeyExport(t,n);return o.privateKeyExport(t,s,n)},privateKeyImport:function(t){if(i.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),(t=o.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(a.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyTweakAdd:function(t,n){return i.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),i.isBufferLength(t,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),i.isBuffer(n,a.TWEAK_TYPE_INVALID),i.isBufferLength(n,32,a.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,n)},privateKeyTweakMul:function(t,n){return i.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),i.isBufferLength(t,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),i.isBuffer(n,a.TWEAK_TYPE_INVALID),i.isBufferLength(n,32,a.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,n)},publicKeyCreate:function(t,n){return i.isBuffer(t,a.EC_PRIVATE_KEY_TYPE_INVALID),i.isBufferLength(t,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),n=r(n,!0),e.publicKeyCreate(t,n)},publicKeyConvert:function(t,n){return i.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),i.isBufferLength2(t,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),n=r(n,!0),e.publicKeyConvert(t,n)},publicKeyVerify:function(t){return i.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,n,o){return i.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),i.isBufferLength2(t,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),i.isBuffer(n,a.TWEAK_TYPE_INVALID),i.isBufferLength(n,32,a.TWEAK_LENGTH_INVALID),o=r(o,!0),e.publicKeyTweakAdd(t,n,o)},publicKeyTweakMul:function(t,n,o){return i.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),i.isBufferLength2(t,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),i.isBuffer(n,a.TWEAK_TYPE_INVALID),i.isBufferLength(n,32,a.TWEAK_LENGTH_INVALID),o=r(o,!0),e.publicKeyTweakMul(t,n,o)},publicKeyCombine:function(t,n){i.isArray(t,a.EC_PUBLIC_KEYS_TYPE_INVALID),i.isLengthGTZero(t,a.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var o=0;o<t.length;++o)i.isBuffer(t[o],a.EC_PUBLIC_KEY_TYPE_INVALID),i.isBufferLength2(t[o],33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID);return n=r(n,!0),e.publicKeyCombine(t,n)},signatureNormalize:function(t){return i.isBuffer(t,a.ECDSA_SIGNATURE_TYPE_INVALID),i.isBufferLength(t,64,a.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){i.isBuffer(t,a.ECDSA_SIGNATURE_TYPE_INVALID),i.isBufferLength(t,64,a.ECDSA_SIGNATURE_LENGTH_INVALID);var n=e.signatureExport(t);return o.signatureExport(n)},signatureImport:function(t){i.isBuffer(t,a.ECDSA_SIGNATURE_TYPE_INVALID),i.isLengthGTZero(t,a.ECDSA_SIGNATURE_LENGTH_INVALID);var n=o.signatureImport(t);if(n)return e.signatureImport(n);throw new Error(a.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){i.isBuffer(t,a.ECDSA_SIGNATURE_TYPE_INVALID),i.isLengthGTZero(t,a.ECDSA_SIGNATURE_LENGTH_INVALID);var n=o.signatureImportLax(t);if(n)return e.signatureImport(n);throw new Error(a.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,n,r){i.isBuffer(t,a.MSG32_TYPE_INVALID),i.isBufferLength(t,32,a.MSG32_LENGTH_INVALID),i.isBuffer(n,a.EC_PRIVATE_KEY_TYPE_INVALID),i.isBufferLength(n,32,a.EC_PRIVATE_KEY_LENGTH_INVALID);var o=null,s=null;return void 0!==r&&(i.isObject(r,a.OPTIONS_TYPE_INVALID),void 0!==r.data&&(i.isBuffer(r.data,a.OPTIONS_DATA_TYPE_INVALID),i.isBufferLength(r.data,32,a.OPTIONS_DATA_LENGTH_INVALID),o=r.data),void 0!==r.noncefn&&(i.isFunction(r.noncefn,a.OPTIONS_NONCEFN_TYPE_INVALID),s=r.noncefn)),e.sign(t,n,s,o)},verify:function(t,n,r){return i.isBuffer(t,a.MSG32_TYPE_INVALID),i.isBufferLength(t,32,a.MSG32_LENGTH_INVALID),i.isBuffer(n,a.ECDSA_SIGNATURE_TYPE_INVALID),i.isBufferLength(n,64,a.ECDSA_SIGNATURE_LENGTH_INVALID),i.isBuffer(r,a.EC_PUBLIC_KEY_TYPE_INVALID),i.isBufferLength2(r,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,n,r)},recover:function(t,n,o,s){return i.isBuffer(t,a.MSG32_TYPE_INVALID),i.isBufferLength(t,32,a.MSG32_LENGTH_INVALID),i.isBuffer(n,a.ECDSA_SIGNATURE_TYPE_INVALID),i.isBufferLength(n,64,a.ECDSA_SIGNATURE_LENGTH_INVALID),i.isNumber(o,a.RECOVERY_ID_TYPE_INVALID),i.isNumberInInterval(o,-1,4,a.RECOVERY_ID_VALUE_INVALID),s=r(s,!0),e.recover(t,n,o,s)},ecdh:function(t,n){return i.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),i.isBufferLength2(t,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),i.isBuffer(n,a.EC_PRIVATE_KEY_TYPE_INVALID),i.isBufferLength(n,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,n)},ecdhUnsafe:function(t,n,o){return i.isBuffer(t,a.EC_PUBLIC_KEY_TYPE_INVALID),i.isBufferLength2(t,33,65,a.EC_PUBLIC_KEY_LENGTH_INVALID),i.isBuffer(n,a.EC_PRIVATE_KEY_TYPE_INVALID),i.isBufferLength(n,32,a.EC_PRIVATE_KEY_LENGTH_INVALID),o=r(o,!0),e.ecdhUnsafe(t,n,o)}}}},function(e,t,n){"use strict";(function(e){var n=Object.prototype.toString;t.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},t.isBoolean=function(e,t){if("[object Boolean]"!==n.call(e))throw TypeError(t)},t.isBuffer=function(t,n){if(!e.isBuffer(t))throw TypeError(n)},t.isFunction=function(e,t){if("[object Function]"!==n.call(e))throw TypeError(t)},t.isNumber=function(e,t){if("[object Number]"!==n.call(e))throw TypeError(t)},t.isObject=function(e,t){if("[object Object]"!==n.call(e))throw TypeError(t)},t.isBufferLength=function(e,t,n){if(e.length!==t)throw RangeError(n)},t.isBufferLength2=function(e,t,n,r){if(e.length!==t&&e.length!==n)throw RangeError(r)},t.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},t.isNumberInInterval=function(e,t,n,r){if(e<=t||e>=n)throw RangeError(r)}}).call(t,n(10).Buffer)},function(e,t,n){"use strict";var r=n(25).Buffer,i=n(2544),o=r.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),a=r.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t.privateKeyExport=function(e,t,n){var i=r.from(n?o:a);return e.copy(i,n?8:9),t.copy(i,n?181:214),i},t.privateKeyImport=function(e){var t=e.length,n=0;if(!(t<n+1||48!==e[n])&&(n+=1,!(t<n+1)&&128&e[n])){var r=127&e[n];if(n+=1,!(r<1||r>2||t<n+r)){var i=e[n+r-1]|(r>1?e[n+r-2]<<8:0);if(n+=r,!(t<n+i||t<n+3||2!==e[n]||1!==e[n+1]||1!==e[n+2]||(n+=3,t<n+2||4!==e[n]||e[n+1]>32||t<n+2+e[n+1])))return e.slice(n+2,n+2+e[n+1])}}},t.signatureExport=function(e){for(var t=r.concat([r.from([0]),e.r]),n=33,o=0;n>1&&0===t[o]&&!(128&t[o+1]);--n,++o);for(var a=r.concat([r.from([0]),e.s]),s=33,u=0;s>1&&0===a[u]&&!(128&a[u+1]);--s,++u);return i.encode(t.slice(o),a.slice(u))},t.signatureImport=function(e){var t=r.alloc(32,0),n=r.alloc(32,0);try{var o=i.decode(e);if(33===o.r.length&&0===o.r[0]&&(o.r=o.r.slice(1)),o.r.length>32)throw new Error("R length is too long");if(33===o.s.length&&0===o.s[0]&&(o.s=o.s.slice(1)),o.s.length>32)throw new Error("S length is too long")}catch(e){return}return o.r.copy(t,32-o.r.length),o.s.copy(n,32-o.s.length),{r:t,s:n}},t.signatureImportLax=function(e){var t=r.alloc(32,0),n=r.alloc(32,0),i=e.length,o=0;if(48===e[o++]){var a=e[o++];if(!(128&a&&(o+=a-128)>i)&&2===e[o++]){var s=e[o++];if(128&s){if(a=s-128,o+a>i)return;for(;a>0&&0===e[o];o+=1,a-=1);for(s=0;a>0;o+=1,a-=1)s=(s<<8)+e[o]}if(!(s>i-o)){var u=o;if(o+=s,2===e[o++]){var c=e[o++];if(128&c){if(a=c-128,o+a>i)return;for(;a>0&&0===e[o];o+=1,a-=1);for(c=0;a>0;o+=1,a-=1)c=(c<<8)+e[o]}if(!(c>i-o)){var l=o;for(o+=c;s>0&&0===e[u];s-=1,u+=1);if(!(s>32)){var f=e.slice(u,u+s);for(f.copy(t,32-f.length);c>0&&0===e[l];c-=1,l+=1);if(!(c>32)){var d=e.slice(l,l+c);return d.copy(n,32-d.length),{r:t,s:n}}}}}}}}}},function(e,t,n){var r=n(25).Buffer;e.exports={check:function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;var t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;var n=e[5+t];return!(0===n||6+t+n!==e.length||128&e[4]||t>1&&0===e[4]&&!(128&e[5])||128&e[t+6]||n>1&&0===e[t+6]&&!(128&e[t+7]))},decode:function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");var t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");var n=e[5+t];if(0===n)throw new Error("S length is zero");if(6+t+n!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(n>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},encode:function(e,t){var n=e.length,i=t.length;if(0===n)throw new Error("R length is zero");if(0===i)throw new Error("S length is zero");if(n>33)throw new Error("R length is too long");if(i>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(n>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(i>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");var o=r.allocUnsafe(6+n+i);return o[0]=48,o[1]=o.length-2,o[2]=2,o[3]=e.length,e.copy(o,4),o[4+n]=2,o[5+n]=t.length,t.copy(o,6+n),o}}},function(e,t,n){"use strict";var r=n(25).Buffer,i=n(2546),o=n(2553),a=n(1215),s=n(451),u=n(1221),c=n(2558);t.privateKeyVerify=function(e){var t=s.fromBuffer(e);return!(t.isOverflow()||t.isZero())},t.privateKeyExport=function(e,t){var n=s.fromBuffer(e);if(n.isOverflow()||n.isZero())throw new Error(a.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return c.mul(n).toPublicKey(t)},t.privateKeyTweakAdd=function(e,t){var n=s.fromBuffer(t);if(n.isOverflow())throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(n.iadd(s.fromBuffer(e)),n.isOverflow()&&n.isub(s.n),n.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return n.toBuffer()},t.privateKeyTweakMul=function(e,t){var n=s.fromBuffer(t);if(n.isOverflow()||n.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);var r=s.fromBuffer(e);return n.umul(r).ureduce().toBuffer()},t.publicKeyCreate=function(e,t){var n=s.fromBuffer(e);if(n.isOverflow()||n.isZero())throw new Error(a.EC_PUBLIC_KEY_CREATE_FAIL);return c.mul(n).toPublicKey(t)},t.publicKeyConvert=function(e,t){var n=u.fromPublicKey(e);if(null===n)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return n.toPublicKey(t)},t.publicKeyVerify=function(e){return null!==u.fromPublicKey(e)},t.publicKeyTweakAdd=function(e,t,n){var r=u.fromPublicKey(e);if(null===r)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=s.fromBuffer(t)).isOverflow())throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return c.mul(t).add(r).toPublicKey(n)},t.publicKeyTweakMul=function(e,t,n){var r=u.fromPublicKey(e);if(null===r)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=s.fromBuffer(t)).isOverflow()||t.isZero())throw new Error(a.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return r.mul(t).toPublicKey(n)},t.publicKeyCombine=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;++r)if(n[r]=u.fromPublicKey(e[r]),null===n[r])throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);for(var i=n[0],o=1;o<n.length;++o)i=i.add(n[o]);if(i.inf)throw new Error(a.EC_PUBLIC_KEY_COMBINE_FAIL);return i.toPublicKey(t)},t.signatureNormalize=function(e){var t=s.fromBuffer(e.slice(0,32)),n=s.fromBuffer(e.slice(32,64));if(t.isOverflow()||n.isOverflow())throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);var i=r.from(e);return n.isHigh()&&s.n.sub(n).toBuffer().copy(i,32),i},t.signatureExport=function(e){var t=e.slice(0,32),n=e.slice(32,64);if(s.fromBuffer(t).isOverflow()||s.fromBuffer(n).isOverflow())throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:n}},t.signatureImport=function(e){var t=s.fromBuffer(e.r);t.isOverflow()&&(t=s.fromNumber(0));var n=s.fromBuffer(e.s);return n.isOverflow()&&(n=s.fromNumber(0)),r.concat([t.toBuffer(),n.toBuffer()])},t.sign=function(e,t,n,i){var u=s.fromBuffer(t);if(u.isOverflow()||u.isZero())throw new Error(a.ECDSA_SIGN_FAIL);if(null===n){var l=new o("sha256",t,e,i);n=function(){return l.generate(32)}}for(var f=s.fromBuffer(e),d=0;;++d){var p=n(e,t,null,i,d);if(!r.isBuffer(p)||32!==p.length)throw new Error(a.ECDSA_SIGN_FAIL);var h=s.fromBuffer(p);if(!h.isOverflow()&&!h.isZero()){var m=c.mul(h),v=m.x.fireduce();if(!v.isZero()){var g=h.uinvm().umul(v.umul(u).ureduce().iadd(f).fireduce()).ureduce();if(!g.isZero()){var b=(0!==m.x.ucmp(v)?2:0)|(m.y.isOdd()?1:0);return g.isHigh()&&(g=s.n.sub(g),b^=1),{signature:r.concat([v.toBuffer(),g.toBuffer()]),recovery:b}}}}}},t.verify=function(e,t,n){var r=s.fromBuffer(t.slice(0,32)),i=s.fromBuffer(t.slice(32,64));if(r.isOverflow()||i.isOverflow())throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);if(i.isHigh()||r.isZero()||i.isZero())return!1;var o=u.fromPublicKey(n);if(null===o)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);var l=i.uinvm(),f=l.umul(s.fromBuffer(e)).ureduce(),d=l.umul(r).ureduce(),p=c.mulAdd(f,o,d);if(p.inf)return!1;var h=p.z.redSqr();return 0===r.redMul(h).ucmp(p.x)||!(r.ucmp(s.psn)>=0)&&0===r.iadd(s.psn).redMul(h).ucmp(p.x)},t.recover=function(e,t,n,i){var o=s.fromBuffer(t.slice(0,32)),l=s.fromBuffer(t.slice(32,64));if(o.isOverflow()||l.isOverflow())throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);do{if(o.isZero()||l.isZero())break;var f=o;if(n>>1){if(f.ucmp(s.psn)>=0)break;f=o.add(s.n)}var d=r.concat([r.from([2+(1&n)]),f.toBuffer()]),p=u.fromPublicKey(d);if(null===p)break;var h=o.uinvm(),m=s.n.sub(s.fromBuffer(e)).umul(h).ureduce(),v=l.umul(h).ureduce();return u.fromECJPoint(c.mulAdd(m,p,v)).toPublicKey(i)}while(!1);throw new Error(a.ECDSA_RECOVER_FAIL)},t.ecdh=function(e,n){var r=t.ecdhUnsafe(e,n,!0);return i("sha256").update(r).digest()},t.ecdhUnsafe=function(e,t,n){var r=u.fromPublicKey(e);if(null===r)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);var i=s.fromBuffer(t);if(i.isOverflow()||i.isZero())throw new Error(a.ECDH_FAIL);return r.mul(i).toPublicKey(n)}},function(e,t,n){"use strict";(function(t){function r(e){c.call(this,"digest"),this._hash=e,this.buffers=[]}function i(e){c.call(this,"digest"),this._hash=e}var o=n(26),a=n(1216),s=n(1217),u=n(1218),c=n(198);o(r,c),r.prototype._update=function(e){this.buffers.push(e)},r.prototype._final=function(){var e=t.concat(this.buffers),n=this._hash(e);return this.buffers=null,n},o(i,c),i.prototype._update=function(e){this._hash.update(e)},i.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new r(a):new i("rmd160"===e||"ripemd160"===e?new s:u(e))}}).call(t,n(10).Buffer)},function(e,t,n){"use strict";(function(t){var n=4,r=new t(n);r.fill(0);e.exports=function(e,i){var o=i(function(e){if(e.length%n!=0){var i=e.length+(n-e.length%n);e=t.concat([e,r],i)}for(var o=new Array(e.length>>>2),a=0,s=0;a<e.length;a+=n,s++)o[s]=e.readInt32LE(a);return o}(e),8*e.length);e=new t(16);for(var a=0;a<o.length;a++)e.writeInt32LE(o[a],a<<2,!0);return e}}).call(t,n(10).Buffer)},function(e,t,n){"use strict";(function(t){function r(e){i.call(this),this._block=new t(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var i=n(444).Transform;n(26)(r,i),r.prototype._transform=function(e,n,r){var i=null;try{"buffer"!==n&&(e=new t(e,n)),this.update(e)}catch(e){i=e}r(i)},r.prototype._flush=function(e){var t=null;try{this.push(this._digest())}catch(e){t=e}e(t)},r.prototype.update=function(e,n){if(!t.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");t.isBuffer(e)||(e=new t(e,n||"binary"));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var a=0,s=8*e.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},r.prototype._update=function(e){throw new Error("_update is not implemented")},r.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();return void 0!==e&&(t=t.toString(e)),t},r.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=r}).call(t,n(10).Buffer)},function(e,t,n){function r(){this.init(),this._w=f,u.call(this,64,56)}function i(e){return e<<5|e>>>27}function o(e){return e<<30|e>>>2}function a(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}var s=n(26),u=n(244),c=n(25).Buffer,l=[1518500249,1859775393,-1894007588,-899497514],f=new Array(80);s(r,u),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(e){for(var t=this._w,n=0|this._a,r=0|this._b,s=0|this._c,u=0|this._d,c=0|this._e,f=0;f<16;++f)t[f]=e.readInt32BE(4*f);for(;f<80;++f)t[f]=t[f-3]^t[f-8]^t[f-14]^t[f-16];for(var d=0;d<80;++d){var p=~~(d/20),h=i(n)+a(p,r,s,u)+c+t[d]+l[p]|0;c=u,u=s,s=o(r),r=n,n=h}this._a=n+this._a|0,this._b=r+this._b|0,this._c=s+this._c|0,this._d=u+this._d|0,this._e=c+this._e|0},r.prototype._hash=function(){var e=c.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=r},function(e,t,n){function r(){this.init(),this._w=d,c.call(this,64,56)}function i(e){return e<<1|e>>>31}function o(e){return e<<5|e>>>27}function a(e){return e<<30|e>>>2}function s(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}var u=n(26),c=n(244),l=n(25).Buffer,f=[1518500249,1859775393,-1894007588,-899497514],d=new Array(80);u(r,c),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(e){for(var t=this._w,n=0|this._a,r=0|this._b,u=0|this._c,c=0|this._d,l=0|this._e,d=0;d<16;++d)t[d]=e.readInt32BE(4*d);for(;d<80;++d)t[d]=i(t[d-3]^t[d-8]^t[d-14]^t[d-16]);for(var p=0;p<80;++p){var h=~~(p/20),m=o(n)+s(h,r,u,c)+l+t[p]+f[h]|0;l=c,c=u,u=a(r),r=n,n=m}this._a=n+this._a|0,this._b=r+this._b|0,this._c=u+this._c|0,this._d=c+this._d|0,this._e=l+this._e|0},r.prototype._hash=function(){var e=l.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=r},function(e,t,n){function r(){this.init(),this._w=u,a.call(this,64,56)}var i=n(26),o=n(1219),a=n(244),s=n(25).Buffer,u=new Array(64);i(r,o),r.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},r.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=r},function(e,t,n){function r(){this.init(),this._w=u,a.call(this,128,112)}var i=n(26),o=n(1220),a=n(244),s=n(25).Buffer,u=new Array(160);i(r,o),r.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},r.prototype._hash=function(){function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}var t=s.allocUnsafe(48);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},e.exports=r},function(e,t,n){"use strict";(function(t){function r(e,t,n,r){var i=o[e];if(void 0===i)throw new Error("hash "+e+" is not supported");this._algo=e,this._securityStrength=i.securityStrength/8,this._outlen=i.outlen/8,this._reseedInterval=281474976710656,this._init(t,n,r)}var i=n(2554),o=n(2556),a=new t(0),s=new t([0]),u=new t([1]);r.prototype._update=function(e){var t=i(this._algo,this._K).update(this._V).update(s);e&&t.update(e),this._K=t.digest(),this._V=i(this._algo,this._K).update(this._V).digest(),e&&(this._K=i(this._algo,this._K).update(this._V).update(u).update(e).digest(),this._V=i(this._algo,this._K).update(this._V).digest())},r.prototype._init=function(e,n,r){if(e.length<this._securityStrength)throw new Error("Not enough entropy");this._K=new t(this._outlen),this._V=new t(this._outlen);for(var i=0;i<this._K.length;++i)this._K[i]=0,this._V[i]=1;this._update(t.concat([e,n,r||a])),this._reseed=1},r.prototype.reseed=function(e,n){if(e.length<this._securityStrength)throw new Error("Not enough entropy");this._update(t.concat([e,n||a])),this._reseed=1},r.prototype.generate=function(e,n){if(this._reseed>this._reseedInterval)throw new Error("Reseed is required");n&&0===n.length&&(n=void 0),n&&this._update(n);for(var r=new t(0);r.length<e;)this._V=i(this._algo,this._K).update(this._V).digest(),r=t.concat([r,this._V]);return this._update(n),this._reseed+=1,r.slice(0,e)},e.exports=r}).call(t,n(10).Buffer)},function(e,t,n){"use strict";function r(e,t){a.call(this,"digest"),"string"==typeof t&&(t=s.from(t));var n="sha512"===e||"sha384"===e?128:64;if(this._alg=e,this._key=t,t.length>n){t=("rmd160"===e?new c:l(e)).update(t).digest()}else t.length<n&&(t=s.concat([t,f],n));for(var r=this._ipad=s.allocUnsafe(n),i=this._opad=s.allocUnsafe(n),o=0;o<n;o++)r[o]=54^t[o],i[o]=92^t[o];this._hash="rmd160"===e?new c:l(e),this._hash.update(r)}var i=n(26),o=n(2555),a=n(198),s=n(25).Buffer,u=n(1216),c=n(1217),l=n(1218),f=s.alloc(128);i(r,a),r.prototype._update=function(e){this._hash.update(e)},r.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new c:l(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new r("rmd160",t):"md5"===e?new o(u,t):new r(e,t)}},function(e,t,n){"use strict";function r(e,t){a.call(this,"digest"),"string"==typeof t&&(t=o.from(t)),this._alg=e,this._key=t,t.length>u?t=e(t):t.length<u&&(t=o.concat([t,s],u));for(var n=this._ipad=o.allocUnsafe(u),r=this._opad=o.allocUnsafe(u),i=0;i<u;i++)n[i]=54^t[i],r[i]=92^t[i];this._hash=[n]}var i=n(26),o=n(25).Buffer,a=n(198),s=o.alloc(128),u=64;i(r,a),r.prototype._update=function(e){this._hash.push(e)},r.prototype._final=function(){var e=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,e]))},e.exports=r},function(e,t){e.exports={sha1:{securityStrength:128,outlen:160,seedlen:440},sha224:{securityStrength:192,outlen:224,seedlen:440},sha256:{securityStrength:256,outlen:256,seedlen:440},sha384:{securityStrength:256,outlen:384,seedlen:888},sha512:{securityStrength:256,outlen:512,seedlen:888}}},function(e,t,n){"use strict";t.umulTo10x10=function(e,t,n){var r,i,o,a=e.words,s=t.words,u=n.words,c=0,l=0|a[0],f=8191&l,d=l>>>13,p=0|a[1],h=8191&p,m=p>>>13,v=0|a[2],g=8191&v,b=v>>>13,y=0|a[3],_=8191&y,E=y>>>13,w=0|a[4],x=8191&w,S=w>>>13,O=0|a[5],M=8191&O,T=O>>>13,C=0|a[6],P=8191&C,A=C>>>13,N=0|a[7],k=8191&N,R=N>>>13,D=0|a[8],I=8191&D,j=D>>>13,L=0|a[9],B=8191&L,F=L>>>13,U=0|s[0],z=8191&U,G=U>>>13,H=0|s[1],q=8191&H,V=H>>>13,W=0|s[2],K=8191&W,$=W>>>13,Y=0|s[3],X=8191&Y,Z=Y>>>13,Q=0|s[4],J=8191&Q,ee=Q>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],fe=8191&le,de=le>>>13,pe=0|s[9],he=8191&pe,me=pe>>>13;n.length=19,r=Math.imul(f,z),i=Math.imul(f,G);var ve=c+r+((8191&(i+=Math.imul(d,z)))<<13);c=(o=Math.imul(d,G))+(i>>>13)+(ve>>>26),ve&=67108863,r=Math.imul(h,z),i=Math.imul(h,G),i+=Math.imul(m,z),o=Math.imul(m,G),r+=Math.imul(f,q),i+=Math.imul(f,V);var ge=c+r+((8191&(i+=Math.imul(d,q)))<<13);c=(o+=Math.imul(d,V))+(i>>>13)+(ge>>>26),ge&=67108863,r=Math.imul(g,z),i=Math.imul(g,G),i+=Math.imul(b,z),o=Math.imul(b,G),r+=Math.imul(h,q),i+=Math.imul(h,V),i+=Math.imul(m,q),o+=Math.imul(m,V),r+=Math.imul(f,K),i+=Math.imul(f,$);var be=c+r+((8191&(i+=Math.imul(d,K)))<<13);c=(o+=Math.imul(d,$))+(i>>>13)+(be>>>26),be&=67108863,r=Math.imul(_,z),i=Math.imul(_,G),i+=Math.imul(E,z),o=Math.imul(E,G),r+=Math.imul(g,q),i+=Math.imul(g,V),i+=Math.imul(b,q),o+=Math.imul(b,V),r+=Math.imul(h,K),i+=Math.imul(h,$),i+=Math.imul(m,K),o+=Math.imul(m,$),r+=Math.imul(f,X),i+=Math.imul(f,Z);var ye=c+r+((8191&(i+=Math.imul(d,X)))<<13);c=(o+=Math.imul(d,Z))+(i>>>13)+(ye>>>26),ye&=67108863,r=Math.imul(x,z),i=Math.imul(x,G),i+=Math.imul(S,z),o=Math.imul(S,G),r+=Math.imul(_,q),i+=Math.imul(_,V),i+=Math.imul(E,q),o+=Math.imul(E,V),r+=Math.imul(g,K),i+=Math.imul(g,$),i+=Math.imul(b,K),o+=Math.imul(b,$),r+=Math.imul(h,X),i+=Math.imul(h,Z),i+=Math.imul(m,X),o+=Math.imul(m,Z),r+=Math.imul(f,J),i+=Math.imul(f,ee);var _e=c+r+((8191&(i+=Math.imul(d,J)))<<13);c=(o+=Math.imul(d,ee))+(i>>>13)+(_e>>>26),_e&=67108863,r=Math.imul(M,z),i=Math.imul(M,G),i+=Math.imul(T,z),o=Math.imul(T,G),r+=Math.imul(x,q),i+=Math.imul(x,V),i+=Math.imul(S,q),o+=Math.imul(S,V),r+=Math.imul(_,K),i+=Math.imul(_,$),i+=Math.imul(E,K),o+=Math.imul(E,$),r+=Math.imul(g,X),i+=Math.imul(g,Z),i+=Math.imul(b,X),o+=Math.imul(b,Z),r+=Math.imul(h,J),i+=Math.imul(h,ee),i+=Math.imul(m,J),o+=Math.imul(m,ee),r+=Math.imul(f,ne),i+=Math.imul(f,re);var Ee=c+r+((8191&(i+=Math.imul(d,ne)))<<13);c=(o+=Math.imul(d,re))+(i>>>13)+(Ee>>>26),Ee&=67108863,r=Math.imul(P,z),i=Math.imul(P,G),i+=Math.imul(A,z),o=Math.imul(A,G),r+=Math.imul(M,q),i+=Math.imul(M,V),i+=Math.imul(T,q),o+=Math.imul(T,V),r+=Math.imul(x,K),i+=Math.imul(x,$),i+=Math.imul(S,K),o+=Math.imul(S,$),r+=Math.imul(_,X),i+=Math.imul(_,Z),i+=Math.imul(E,X),o+=Math.imul(E,Z),r+=Math.imul(g,J),i+=Math.imul(g,ee),i+=Math.imul(b,J),o+=Math.imul(b,ee),r+=Math.imul(h,ne),i+=Math.imul(h,re),i+=Math.imul(m,ne),o+=Math.imul(m,re),r+=Math.imul(f,oe),i+=Math.imul(f,ae);var we=c+r+((8191&(i+=Math.imul(d,oe)))<<13);c=(o+=Math.imul(d,ae))+(i>>>13)+(we>>>26),we&=67108863,r=Math.imul(k,z),i=Math.imul(k,G),i+=Math.imul(R,z),o=Math.imul(R,G),r+=Math.imul(P,q),i+=Math.imul(P,V),i+=Math.imul(A,q),o+=Math.imul(A,V),r+=Math.imul(M,K),i+=Math.imul(M,$),i+=Math.imul(T,K),o+=Math.imul(T,$),r+=Math.imul(x,X),i+=Math.imul(x,Z),i+=Math.imul(S,X),o+=Math.imul(S,Z),r+=Math.imul(_,J),i+=Math.imul(_,ee),i+=Math.imul(E,J),o+=Math.imul(E,ee),r+=Math.imul(g,ne),i+=Math.imul(g,re),i+=Math.imul(b,ne),o+=Math.imul(b,re),r+=Math.imul(h,oe),i+=Math.imul(h,ae),i+=Math.imul(m,oe),o+=Math.imul(m,ae),r+=Math.imul(f,ue),i+=Math.imul(f,ce);var xe=c+r+((8191&(i+=Math.imul(d,ue)))<<13);c=(o+=Math.imul(d,ce))+(i>>>13)+(xe>>>26),xe&=67108863,r=Math.imul(I,z),i=Math.imul(I,G),i+=Math.imul(j,z),o=Math.imul(j,G),r+=Math.imul(k,q),i+=Math.imul(k,V),i+=Math.imul(R,q),o+=Math.imul(R,V),r+=Math.imul(P,K),i+=Math.imul(P,$),i+=Math.imul(A,K),o+=Math.imul(A,$),r+=Math.imul(M,X),i+=Math.imul(M,Z),i+=Math.imul(T,X),o+=Math.imul(T,Z),r+=Math.imul(x,J),i+=Math.imul(x,ee),i+=Math.imul(S,J),o+=Math.imul(S,ee),r+=Math.imul(_,ne),i+=Math.imul(_,re),i+=Math.imul(E,ne),o+=Math.imul(E,re),r+=Math.imul(g,oe),i+=Math.imul(g,ae),i+=Math.imul(b,oe),o+=Math.imul(b,ae),r+=Math.imul(h,ue),i+=Math.imul(h,ce),i+=Math.imul(m,ue),o+=Math.imul(m,ce),r+=Math.imul(f,fe),i+=Math.imul(f,de);var Se=c+r+((8191&(i+=Math.imul(d,fe)))<<13);c=(o+=Math.imul(d,de))+(i>>>13)+(Se>>>26),Se&=67108863,r=Math.imul(B,z),i=Math.imul(B,G),i+=Math.imul(F,z),o=Math.imul(F,G),r+=Math.imul(I,q),i+=Math.imul(I,V),i+=Math.imul(j,q),o+=Math.imul(j,V),r+=Math.imul(k,K),i+=Math.imul(k,$),i+=Math.imul(R,K),o+=Math.imul(R,$),r+=Math.imul(P,X),i+=Math.imul(P,Z),i+=Math.imul(A,X),o+=Math.imul(A,Z),r+=Math.imul(M,J),i+=Math.imul(M,ee),i+=Math.imul(T,J),o+=Math.imul(T,ee),r+=Math.imul(x,ne),i+=Math.imul(x,re),i+=Math.imul(S,ne),o+=Math.imul(S,re),r+=Math.imul(_,oe),i+=Math.imul(_,ae),i+=Math.imul(E,oe),o+=Math.imul(E,ae),r+=Math.imul(g,ue),i+=Math.imul(g,ce),i+=Math.imul(b,ue),o+=Math.imul(b,ce),r+=Math.imul(h,fe),i+=Math.imul(h,de),i+=Math.imul(m,fe),o+=Math.imul(m,de),r+=Math.imul(f,he),i+=Math.imul(f,me);var Oe=c+r+((8191&(i+=Math.imul(d,he)))<<13);c=(o+=Math.imul(d,me))+(i>>>13)+(Oe>>>26),Oe&=67108863,r=Math.imul(B,q),i=Math.imul(B,V),i+=Math.imul(F,q),o=Math.imul(F,V),r+=Math.imul(I,K),i+=Math.imul(I,$),i+=Math.imul(j,K),o+=Math.imul(j,$),r+=Math.imul(k,X),i+=Math.imul(k,Z),i+=Math.imul(R,X),o+=Math.imul(R,Z),r+=Math.imul(P,J),i+=Math.imul(P,ee),i+=Math.imul(A,J),o+=Math.imul(A,ee),r+=Math.imul(M,ne),i+=Math.imul(M,re),i+=Math.imul(T,ne),o+=Math.imul(T,re),r+=Math.imul(x,oe),i+=Math.imul(x,ae),i+=Math.imul(S,oe),o+=Math.imul(S,ae),r+=Math.imul(_,ue),i+=Math.imul(_,ce),i+=Math.imul(E,ue),o+=Math.imul(E,ce),r+=Math.imul(g,fe),i+=Math.imul(g,de),i+=Math.imul(b,fe),o+=Math.imul(b,de),r+=Math.imul(h,he),i+=Math.imul(h,me);var Me=c+r+((8191&(i+=Math.imul(m,he)))<<13);c=(o+=Math.imul(m,me))+(i>>>13)+(Me>>>26),Me&=67108863,r=Math.imul(B,K),i=Math.imul(B,$),i+=Math.imul(F,K),o=Math.imul(F,$),r+=Math.imul(I,X),i+=Math.imul(I,Z),i+=Math.imul(j,X),o+=Math.imul(j,Z),r+=Math.imul(k,J),i+=Math.imul(k,ee),i+=Math.imul(R,J),o+=Math.imul(R,ee),r+=Math.imul(P,ne),i+=Math.imul(P,re),i+=Math.imul(A,ne),o+=Math.imul(A,re),r+=Math.imul(M,oe),i+=Math.imul(M,ae),i+=Math.imul(T,oe),o+=Math.imul(T,ae),r+=Math.imul(x,ue),i+=Math.imul(x,ce),i+=Math.imul(S,ue),o+=Math.imul(S,ce),r+=Math.imul(_,fe),i+=Math.imul(_,de),i+=Math.imul(E,fe),o+=Math.imul(E,de),r+=Math.imul(g,he),i+=Math.imul(g,me);var Te=c+r+((8191&(i+=Math.imul(b,he)))<<13);c=(o+=Math.imul(b,me))+(i>>>13)+(Te>>>26),Te&=67108863,r=Math.imul(B,X),i=Math.imul(B,Z),i+=Math.imul(F,X),o=Math.imul(F,Z),r+=Math.imul(I,J),i+=Math.imul(I,ee),i+=Math.imul(j,J),o+=Math.imul(j,ee),r+=Math.imul(k,ne),i+=Math.imul(k,re),i+=Math.imul(R,ne),o+=Math.imul(R,re),r+=Math.imul(P,oe),i+=Math.imul(P,ae),i+=Math.imul(A,oe),o+=Math.imul(A,ae),r+=Math.imul(M,ue),i+=Math.imul(M,ce),i+=Math.imul(T,ue),o+=Math.imul(T,ce),r+=Math.imul(x,fe),i+=Math.imul(x,de),i+=Math.imul(S,fe),o+=Math.imul(S,de),r+=Math.imul(_,he),i+=Math.imul(_,me);var Ce=c+r+((8191&(i+=Math.imul(E,he)))<<13);c=(o+=Math.imul(E,me))+(i>>>13)+(Ce>>>26),Ce&=67108863,r=Math.imul(B,J),i=Math.imul(B,ee),i+=Math.imul(F,J),o=Math.imul(F,ee),r+=Math.imul(I,ne),i+=Math.imul(I,re),i+=Math.imul(j,ne),o+=Math.imul(j,re),r+=Math.imul(k,oe),i+=Math.imul(k,ae),i+=Math.imul(R,oe),o+=Math.imul(R,ae),r+=Math.imul(P,ue),i+=Math.imul(P,ce),i+=Math.imul(A,ue),o+=Math.imul(A,ce),r+=Math.imul(M,fe),i+=Math.imul(M,de),i+=Math.imul(T,fe),o+=Math.imul(T,de),r+=Math.imul(x,he),i+=Math.imul(x,me);var Pe=c+r+((8191&(i+=Math.imul(S,he)))<<13);c=(o+=Math.imul(S,me))+(i>>>13)+(Pe>>>26),Pe&=67108863,r=Math.imul(B,ne),i=Math.imul(B,re),i+=Math.imul(F,ne),o=Math.imul(F,re),r+=Math.imul(I,oe),i+=Math.imul(I,ae),i+=Math.imul(j,oe),o+=Math.imul(j,ae),r+=Math.imul(k,ue),i+=Math.imul(k,ce),i+=Math.imul(R,ue),o+=Math.imul(R,ce),r+=Math.imul(P,fe),i+=Math.imul(P,de),i+=Math.imul(A,fe),o+=Math.imul(A,de),r+=Math.imul(M,he),i+=Math.imul(M,me);var Ae=c+r+((8191&(i+=Math.imul(T,he)))<<13);c=(o+=Math.imul(T,me))+(i>>>13)+(Ae>>>26),Ae&=67108863,r=Math.imul(B,oe),i=Math.imul(B,ae),i+=Math.imul(F,oe),o=Math.imul(F,ae),r+=Math.imul(I,ue),i+=Math.imul(I,ce),i+=Math.imul(j,ue),o+=Math.imul(j,ce),r+=Math.imul(k,fe),i+=Math.imul(k,de),i+=Math.imul(R,fe),o+=Math.imul(R,de),r+=Math.imul(P,he),i+=Math.imul(P,me);var Ne=c+r+((8191&(i+=Math.imul(A,he)))<<13);c=(o+=Math.imul(A,me))+(i>>>13)+(Ne>>>26),Ne&=67108863,r=Math.imul(B,ue),i=Math.imul(B,ce),i+=Math.imul(F,ue),o=Math.imul(F,ce),r+=Math.imul(I,fe),i+=Math.imul(I,de),i+=Math.imul(j,fe),o+=Math.imul(j,de),r+=Math.imul(k,he),i+=Math.imul(k,me);var ke=c+r+((8191&(i+=Math.imul(R,he)))<<13);c=(o+=Math.imul(R,me))+(i>>>13)+(ke>>>26),ke&=67108863,r=Math.imul(B,fe),i=Math.imul(B,de),i+=Math.imul(F,fe),o=Math.imul(F,de),r+=Math.imul(I,he),i+=Math.imul(I,me);var Re=c+r+((8191&(i+=Math.imul(j,he)))<<13);c=(o+=Math.imul(j,me))+(i>>>13)+(Re>>>26),Re&=67108863,r=Math.imul(B,he),i=Math.imul(B,me);var De=c+r+((8191&(i+=Math.imul(F,he)))<<13);return c=(o=Math.imul(F,me))+(i>>>13)+(De>>>26),De&=67108863,u[0]=ve,u[1]=ge,u[2]=be,u[3]=ye,u[4]=_e,u[5]=Ee,u[6]=we,u[7]=xe,u[8]=Se,u[9]=Oe,u[10]=Me,u[11]=Te,u[12]=Ce,u[13]=Pe,u[14]=Ae,u[15]=Ne,u[16]=ke,u[17]=Re,u[18]=De,0!==c&&(u[19]=c,n.length++),n}},function(e,t,n){"use strict";function r(){this.x=o.fromBuffer(i.from("79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","hex")),this.y=o.fromBuffer(i.from("483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8","hex")),this.inf=!1,this._precompute()}var i=n(25).Buffer,o=n(451),a=n(1221),s=n(1222);r.prototype._precompute=function(){for(var e=new a(this.x,this.y),t=new Array(1+Math.ceil(64.25)),n=t[0]=e,r=1;r<t.length;++r){for(var i=0;i<4;i++)n=n.dbl();t[r]=n}this.precomputed={naf:e._getNAFPoints(7),doubles:{step:4,points:t,negpoints:t.map(function(e){return e.neg()})}}},r.prototype.mul=function(e){for(var t=this.precomputed.doubles.step,n=this.precomputed.doubles.points,r=this.precomputed.doubles.negpoints,i=e.getNAF(1),o=((1<<t+1)-(t%2==0?2:1))/3,u=[],c=0;c<i.length;c+=t){for(var l=0,f=c+t-1;f>=c;f--)l=(l<<1)+i[f];u.push(l)}for(var d=new s(null,null,null),p=new s(null,null,null),h=o;h>0;h--){for(var m=0;m<u.length;m++)u[m]===h?p=p.mixedAdd(n[m]):u[m]===-h&&(p=p.mixedAdd(r[m]));d=d.add(p)}return a.fromECJPoint(d)},r.prototype.mulAdd=function(e,t,n){for(var r=this.precomputed.naf,i=t._getNAFPoints1(),o=[r.points,i.points],a=[e.getNAF(r.wnd),n.getNAF(i.wnd)],u=new s(null,null,null),c=[null,null],l=Math.max(a[0].length,a[1].length);l>=0;l--){for(var f=0;l>=0&&(c[0]=0|a[0][l],c[1]=0|a[1][l],0===c[0]&&0===c[1]);++f,--l);if(l>=0&&(f+=1),u=u.dblp(f),l<0)break;for(var d=0;d<2;d++){var p,h=c[d];0!==h&&(h>0?p=o[d][h>>1]:h<0&&(p=o[d][-h>>1].neg()),u=void 0===p.z?u.mixedAdd(p):u.add(p))}}return u},e.exports=new r},function(e,t,n){"use strict";(function(t){var r=n(2560),i=n(1201),o={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};e.exports=function(e,n,a,s){var u=o[e];if(!u)return s(new Error("unkown cipherType passed"));if(!n)return s(new Error("unkown hashType passed"));var c=u.keySize,l=u.ivSize,f=t.from("key expansion"),d=2*(l+c+20);i.create(n,a,function(e,n){if(e)return s(e);n.digest(f,function(e,i){if(e)return s(e);var o=[],a=0;r(function(){return a<d},function(e){n.digest(t.concat([i,f]),function(t,r){if(t)return e(t);var s=r.length;a+s>d&&(s=d-a),o.push(r),a+=s,n.digest(i,function(t,n){if(t)return e(t);i=n,e()})})},function(e){if(e)return s(e);var n=d/2,r=t.concat(o),i=r.slice(0,n),a=r.slice(n,d),u=function(e){return{iv:e.slice(0,l),cipherKey:e.slice(l,l+c),macKey:e.slice(l+c)}};s(null,{k1:u(i),k2:u(a)})})})})}}).call(t,n(10).Buffer)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n=(0,a.default)(n||i.default);var r=(0,s.default)(t);if(!e())return n(null);var u=function(t){if(t)return n(t);if(e())return r(u);var i=(0,o.default)(arguments,1);n.apply(null,[null].concat(i))};r(u)};var i=r(n(268)),o=r(n(442)),a=r(n(844)),s=r(n(845));e.exports=t.default},function(e,t,n){"use strict";var r=n(2562);e.exports=function(e,t){r.generateEphmeralKeyPair(e,t)}},function(e,t,n){"use strict";(function(e){function r(t,n){var r=d[t];if(!n.slice(0,1).equals(e.from([4])))throw new Error("Invalid key format");var i=new s(n.slice(1,r+1)),o=new s(n.slice(1+r));return{kty:"EC",crv:t,x:c(i,r),y:c(o,r),ext:!0}}var i=n(132),o=n(865)(),a=n(864),s=n(243).bignum,u=n(1214),c=u.toBase64,l=u.toBn,f={"P-256":256,"P-384":384,"P-521":521};t.generateEphmeralKeyPair=function(t,n){a(o.subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]).then(function(n){var u=function(u,l,d){"function"==typeof l&&(d=l,l=void 0);var p;p=l?o.subtle.importKey("jwk",function(e,t){var n=r(e,t.public);return n.d=c(new s(t.private)),n}(t,l),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):i.resolve(n.privateKey);var h=i.all([o.subtle.importKey("jwk",r(t,u),{name:"ECDH",namedCurve:t},!1,[]),p]);a(h.then(function(e){return o.subtle.deriveBits({name:"ECDH",namedCurve:t,public:e[0]},e[1],f[t])}).then(function(t){return e.from(t)}),d)};return o.subtle.exportKey("jwk",n.publicKey).then(function(t){return{key:function(t){var n=d[t.crv];return e.concat([e.from([4]),l(t.x).toArrayLike(e,"be",n),l(t.y).toArrayLike(e,"be",n)],1+2*n)}(t),genSharedKey:u}})}),n)};var d={"P-256":32,"P-384":48,"P-521":66}}).call(t,n(10).Buffer)},function(e,t,n){"use strict";var r=n(11);e.exports=function(e){return r(function(t,n,r){"function"==typeof n&&(r=n,n={}),e({path:"swarm/connect",args:t,qs:n},r)})}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e){return r(function(t,n,r){"function"==typeof n&&(r=n,n={}),e({path:"swarm/disconnect",args:t,qs:n},r)})}},function(e,t,n){"use strict";var r=n(128),i=n(11),o=n(2566),a=n(863),s=n(189);e.exports=function(e){return i(function(t,n){"function"==typeof t&&(n=t,t={}),e({path:"swarm/addrs",qs:t},function(e,t){if(e)return n(e);var i=r(t.Addrs).map(function(e){var n=new o(a.createFromB58String(e));return t.Addrs[e].forEach(function(e){n.multiaddrs.add(s(e))}),n});n(null,i)})})}},function(e,t,n){"use strict";var r=n(32),i=n(2567),o=n(13),a=n(14),s=n(863),u=n(1225).ensureMultiaddr,c=n(2582),l=n(446),f=function(){function e(t){o(this,e),l(t,"Missing peerId. Use Peer.create(cb) to create one"),this.id=t,this.multiaddrs=new c,this.protocols=new i,this._connectedMultiaddr=void 0}return a(e,[{key:"connect",value:function(e){if(e=u(e),!this.multiaddrs.has(e)&&e.toString()!=="/ipfs/".concat(this.id.toB58String()))throw new Error("can't be connected to missing multiaddr from set");this._connectedMultiaddr=e}},{key:"disconnect",value:function(){this._connectedMultiaddr=void 0}},{key:"isConnected",value:function(){return this._connectedMultiaddr}}]),e}();f.create=function(e,t){if("function"==typeof e)return t=e,e=null,void s.create(function(e,n){if(e)return t(e);t(null,new f(n))});t(null,new f(e))},f.isPeerInfo=function(e){return Boolean("object"===r(e)&&e.id&&e.multiaddrs)},e.exports=f},function(e,t,n){e.exports=n(2568)},function(e,t,n){n(515),n(347),n(350),n(2569),n(2575),n(2578),n(2580),e.exports=n(43).Set},function(e,t,n){"use strict";var r=n(2570),i=n(1224);e.exports=n(2571)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r=n(103).f,i=n(349),o=n(834),a=n(139),s=n(832),u=n(297),c=n(509),l=n(963),f=n(1137),d=n(102),p=n(351).fastKey,h=n(1224),m=d?"_s":"size",v=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=h(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){h(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(h(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return h(this,t)[m]}}),l},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=h(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(62),i=n(63),o=n(351),a=n(175),s=n(140),u=n(834),c=n(297),l=n(832),f=n(89),d=n(262),p=n(103).f,h=n(2572)(0),m=n(102);e.exports=function(e,t,n,v,g,b){var y=r[e],_=y,E=g?"set":"add",w=_&&_.prototype,x={};return m&&"function"==typeof _&&(b||w.forEach&&!a(function(){(new _).entries().next()}))?(_=t(function(t,n){l(t,_,e,"_c"),t._c=new y,void 0!=n&&c(n,g,t[E],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!b||"clear"!=e)&&s(_.prototype,e,function(n,r){if(l(this,_,e),!t&&b&&!f(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),b||p(_.prototype,"size",{get:function(){return this._c.size}})):(_=v.getConstructor(t,e,g,E),u(_.prototype,n),o.NEED=!0),d(_,e),x[e]=_,i(i.G+i.W+i.F,x),b||v.setStrong(_,e,g),_}},function(e,t,n){var r=n(139),i=n(500),o=n(259),a=n(510),s=n(2573);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,p=t||s;return function(t,s,h){for(var m,v,g=o(t),b=i(g),y=r(s,h,3),_=a(b.length),E=0,w=n?p(t,_):u?p(t,0):void 0;_>E;E++)if((d||E in b)&&(m=b[E],v=y(m,E,g),e))if(n)w[E]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return E;case 2:w.push(m)}else if(l)return!1;return f?-1:c||l?l:w}}},function(e,t,n){var r=n(2574);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(89),i=n(965),o=n(64)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(63);r(r.P+r.R,"Set",{toJSON:n(2576)("Set")})},function(e,t,n){var r=n(831),i=n(2577);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(297);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(2579)("Set")},function(e,t,n){"use strict";var r=n(63);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(2581)("Set")},function(e,t,n){"use strict";var r=n(63),i=n(258),o=n(139),a=n(297);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return i(this),(t=void 0!==u)&&i(u),void 0==e?new this:(n=[],t?(r=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";var r=n(13),i=n(14),o=n(1225).ensureMultiaddr,a=n(2583),s=function(){function e(t){r(this,e),this._multiaddrs=t||[],this._observedMultiaddrs=[]}return i(e,[{key:"add",value:function(e){e=o(e),this.has(e)||this._multiaddrs.push(e)}},{key:"addSafe",value:function(e){var t=this;e=o(e);this._observedMultiaddrs.some(function(n,r){if(n.equals(e))return t.add(e),t._observedMultiaddrs.splice(r,1),!0})||this._observedMultiaddrs.push(e)}},{key:"toArray",value:function(){return this._multiaddrs.slice()}},{key:"forEach",value:function(e){return this._multiaddrs.forEach(e)}},{key:"has",value:function(e){return e=o(e),this._multiaddrs.some(function(t){return t.equals(e)})}},{key:"delete",value:function(e){var t=this;e=o(e),this._multiaddrs.some(function(n,r){if(n.equals(e))return t._multiaddrs.splice(r,1),!0})}},{key:"replace",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]),e.forEach(function(e){return n.delete(e)}),t.forEach(function(e){return n.add(e)})}},{key:"clear",value:function(){this._multiaddrs=[]}},{key:"distinct",value:function(){return a(this._multiaddrs,function(e){return[e.toOptions().port,e.toOptions().transport].join()})}},{key:"size",get:function(){return this._multiaddrs.length}}]),e}();e.exports=s},function(e,t,n){(function(e,n){function r(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!=t)return function(e,t,n,r){var i=e.length,o=n+(r?1:-1);for(;r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,a,n);var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function i(e,t,n){for(var r=-1,i=e?e.length:0;++r<i;)if(n(t,e[r]))return!0;return!1}function o(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function a(e){return e!=e}function s(e,t){return e.has(t)}function u(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function c(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function l(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function f(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function d(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function p(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function h(e){var t=-1,n=e?e.length:0;for(this.__data__=new p;++t<n;)this.add(e[t])}function m(e){this.__data__=new d(e)}function v(e,t){var n=ct(e)||j(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!Be.call(e,o)||i&&("length"==o||C(o,r))||n.push(o);return n}function g(e,t){for(var n=e.length;n--;)if(I(e[n][0],t))return n;return-1}function b(e,t){for(var n=0,r=(t=P(t,e)?[t]:S(t)).length;null!=e&&n<r;)e=e[k(t[n++])];return n&&n==r?e:void 0}function y(e,t){return null!=e&&t in Object(e)}function _(e,t,n,r,i){return e===t||(null==e||null==t||!U(e)&&!z(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var a=ct(e),s=ct(t),f=ee,d=ee;a||(f=(f=st(e))==J?ue:f);s||(d=(d=st(t))==J?ue:d);var p=f==ue&&!u(e),h=d==ue&&!u(t),v=f==d;if(v&&!p)return o||(o=new m),a||lt(e)?O(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case me:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case he:return!(e.byteLength!=t.byteLength||!r(new Ge(e),new Ge(t)));case te:case ne:case se:return I(+e,+t);case re:return e.name==t.name&&e.message==t.message;case ce:case fe:return e==t+"";case ae:var s=c;case le:var u=o&X;if(s||(s=l),e.size!=t.size&&!u)return!1;var f=a.get(e);if(f)return f==t;o|=Y,a.set(e,t);var d=O(s(e),s(t),r,i,o,a);return a.delete(e),d;case de:if(it)return it.call(e)==it.call(t)}return!1}(e,t,f,n,r,i,o);if(!(i&X)){var g=p&&Be.call(e,"__wrapped__"),b=h&&Be.call(t,"__wrapped__");if(g||b){var y=g?e.value():e,_=b?t.value():t;return o||(o=new m),n(y,_,r,i,o)}}if(!v)return!1;return o||(o=new m),function(e,t,n,r,i,o){var a=i&X,s=q(e),u=s.length,c=q(t).length;if(u!=c&&!a)return!1;for(var l=u;l--;){var f=s[l];if(!(a?f in t:Be.call(t,f)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var p=!0;o.set(e,t),o.set(t,e);for(var h=a;++l<u;){f=s[l];var m=e[f],v=t[f];if(r)var g=a?r(v,m,f,t,e,o):r(m,v,f,e,t,o);if(!(void 0===g?m===v||n(m,v,r,i,o):g)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var b=e.constructor,y=t.constructor;b!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y)&&(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o)}(e,t,_,n,r,i))}function E(e){if(!U(e)||function(e){return!!je&&je in e}(e))return!1;return(B(e)||u(e)?Ue:Ee).test(R(e))}function w(e){return"function"==typeof e?e:null==e?V:"object"==typeof e?ct(e)?function(e,t){if(P(e)&&A(t))return N(k(e),t);return function(n){var r=function(e,t,n){var r=null==e?void 0:b(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){var r,i=-1,o=(t=P(t,e)?[t]:S(t)).length;for(;++i<o;){var a=k(t[i]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}if(r)return r;return!!(o=e?e.length:0)&&F(o)&&C(a,o)&&(ct(e)||j(e))}(e,t,y)}(n,e):_(t,r,void 0,Y|X)}}(e[0],e[1]):function(e){var t=function(e){var t=q(e),n=t.length;for(;n--;){var r=t[n],i=e[r];t[n]=[r,i,A(i)]}return t}(e);if(1==t.length&&t[0][2])return N(t[0][0],t[0][1]);return function(n){return n===e||function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{var f=new m;if(r)var d=r(c,l,u,e,t,f);if(!(void 0===d?_(l,c,r,Y|X,f):d))return!1}}return!0}(n,e,t)}}(e):function(e){return P(e)?function(e){return function(t){return null==t?void 0:t[e]}}(k(e)):function(e){return function(t){return b(t,e)}}(e)}(e)}function x(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||De;return e===n}(e))return Ve(e);var t=[];for(var n in Object(e))Be.call(e,n)&&"constructor"!=n&&t.push(n);return t}function S(e){return ct(e)?e:ut(e)}function O(e,t,n,r,i,a){var s=i&X,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var f=-1,d=!0,p=i&Y?new h:void 0;for(a.set(e,t),a.set(t,e);++f<u;){var m=e[f],v=t[f];if(r)var g=s?r(v,m,f,t,e,a):r(m,v,f,e,t,a);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!o(t,function(e,t){if(!p.has(t)&&(m===e||n(m,e,r,i,a)))return p.add(t)})){d=!1;break}}else if(m!==v&&!n(m,v,r,i,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function M(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function T(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return E(n)?n:void 0}function C(e,t){return!!(t=null==t?Q:t)&&("number"==typeof e||we.test(e))&&e>-1&&e%1==0&&e<t}function P(e,t){if(ct(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!G(e))||(ge.test(e)||!ve.test(e)||null!=t&&e in Object(t))}function A(e){return e==e&&!U(e)}function N(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function k(e){if("string"==typeof e||G(e))return e;var t=e+"";return"0"==t&&1/e==-Z?"-0":t}function R(e){if(null!=e){try{return Le.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function D(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(K);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(D.Cache||p),n}function I(e,t){return e===t||e!=e&&t!=t}function j(e){return function(e){return z(e)&&L(e)}(e)&&Be.call(e,"callee")&&(!He.call(e,"callee")||Fe.call(e)==J)}function L(e){return null!=e&&F(e.length)&&!B(e)}function B(e){var t=U(e)?Fe.call(e):"";return t==ie||t==oe}function F(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Q}function U(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function z(e){return!!e&&"object"==typeof e}function G(e){return"symbol"==typeof e||z(e)&&Fe.call(e)==de}function H(e){return null==e?"":function(e){if("string"==typeof e)return e;if(G(e))return ot?ot.call(e):"";var t=e+"";return"0"==t&&1/e==-Z?"-0":t}(e)}function q(e){return L(e)?v(e):x(e)}function V(e){return e}var W=200,K="Expected a function",$="__lodash_hash_undefined__",Y=1,X=2,Z=1/0,Q=9007199254740991,J="[object Arguments]",ee="[object Array]",te="[object Boolean]",ne="[object Date]",re="[object Error]",ie="[object Function]",oe="[object GeneratorFunction]",ae="[object Map]",se="[object Number]",ue="[object Object]",ce="[object RegExp]",le="[object Set]",fe="[object String]",de="[object Symbol]",pe="[object WeakMap]",he="[object ArrayBuffer]",me="[object DataView]",ve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ge=/^\w*$/,be=/^\./,ye=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_e=/\\(\\)?/g,Ee=/^\[object .+?Constructor\]$/,we=/^(?:0|[1-9]\d*)$/,xe={};xe["[object Float32Array]"]=xe["[object Float64Array]"]=xe["[object Int8Array]"]=xe["[object Int16Array]"]=xe["[object Int32Array]"]=xe["[object Uint8Array]"]=xe["[object Uint8ClampedArray]"]=xe["[object Uint16Array]"]=xe["[object Uint32Array]"]=!0,xe[J]=xe[ee]=xe[he]=xe[te]=xe[me]=xe[ne]=xe[re]=xe[ie]=xe[ae]=xe[se]=xe[ue]=xe[ce]=xe[le]=xe[fe]=xe[pe]=!1;var Se="object"==typeof e&&e&&e.Object===Object&&e,Oe="object"==typeof self&&self&&self.Object===Object&&self,Me=Se||Oe||Function("return this")(),Te="object"==typeof t&&t&&!t.nodeType&&t,Ce=Te&&"object"==typeof n&&n&&!n.nodeType&&n,Pe=Ce&&Ce.exports===Te&&Se.process,Ae=function(){try{return Pe&&Pe.binding("util")}catch(e){}}(),Ne=Ae&&Ae.isTypedArray,ke=Array.prototype,Re=Function.prototype,De=Object.prototype,Ie=Me["__core-js_shared__"],je=function(){var e=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Le=Re.toString,Be=De.hasOwnProperty,Fe=De.toString,Ue=RegExp("^"+Le.call(Be).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=Me.Symbol,Ge=Me.Uint8Array,He=De.propertyIsEnumerable,qe=ke.splice,Ve=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),We=T(Me,"DataView"),Ke=T(Me,"Map"),$e=T(Me,"Promise"),Ye=T(Me,"Set"),Xe=T(Me,"WeakMap"),Ze=T(Object,"create"),Qe=R(We),Je=R(Ke),et=R($e),tt=R(Ye),nt=R(Xe),rt=ze?ze.prototype:void 0,it=rt?rt.valueOf:void 0,ot=rt?rt.toString:void 0;f.prototype.clear=function(){this.__data__=Ze?Ze(null):{}},f.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},f.prototype.get=function(e){var t=this.__data__;if(Ze){var n=t[e];return n===$?void 0:n}return Be.call(t,e)?t[e]:void 0},f.prototype.has=function(e){var t=this.__data__;return Ze?void 0!==t[e]:Be.call(t,e)},f.prototype.set=function(e,t){return this.__data__[e]=Ze&&void 0===t?$:t,this},d.prototype.clear=function(){this.__data__=[]},d.prototype.delete=function(e){var t=this.__data__,n=g(t,e);return!(n<0||(n==t.length-1?t.pop():qe.call(t,n,1),0))},d.prototype.get=function(e){var t=this.__data__,n=g(t,e);return n<0?void 0:t[n][1]},d.prototype.has=function(e){return g(this.__data__,e)>-1},d.prototype.set=function(e,t){var n=this.__data__,r=g(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},p.prototype.clear=function(){this.__data__={hash:new f,map:new(Ke||d),string:new f}},p.prototype.delete=function(e){return M(this,e).delete(e)},p.prototype.get=function(e){return M(this,e).get(e)},p.prototype.has=function(e){return M(this,e).has(e)},p.prototype.set=function(e,t){return M(this,e).set(e,t),this},h.prototype.add=h.prototype.push=function(e){return this.__data__.set(e,$),this},h.prototype.has=function(e){return this.__data__.has(e)},m.prototype.clear=function(){this.__data__=new d},m.prototype.delete=function(e){return this.__data__.delete(e)},m.prototype.get=function(e){return this.__data__.get(e)},m.prototype.has=function(e){return this.__data__.has(e)},m.prototype.set=function(e,t){var n=this.__data__;if(n instanceof d){var r=n.__data__;if(!Ke||r.length<W-1)return r.push([e,t]),this;n=this.__data__=new p(r)}return n.set(e,t),this};var at=Ye&&1/l(new Ye([,-0]))[1]==Z?function(e){return new Ye(e)}:function(){},st=function(e){return Fe.call(e)};(We&&st(new We(new ArrayBuffer(1)))!=me||Ke&&st(new Ke)!=ae||$e&&"[object Promise]"!=st($e.resolve())||Ye&&st(new Ye)!=le||Xe&&st(new Xe)!=pe)&&(st=function(e){var t=Fe.call(e),n=t==ue?e.constructor:void 0,r=n?R(n):void 0;if(r)switch(r){case Qe:return me;case Je:return ae;case et:return"[object Promise]";case tt:return le;case nt:return pe}return t});var ut=D(function(e){e=H(e);var t=[];return be.test(e)&&t.push(""),e.replace(ye,function(e,n,r,i){t.push(r?i.replace(_e,"$1"):n||e)}),t});D.Cache=p;var ct=Array.isArray,lt=Ne?function(e){return function(t){return e(t)}}(Ne):function(e){return z(e)&&F(e.length)&&!!xe[Fe.call(e)]};n.exports=function(e,t){return e&&e.length?function(e,t,n){var o=-1,a=r,u=e.length,c=!0,f=[],d=f;if(n)c=!1,a=i;else if(u>=W){var p=t?null:at(e);if(p)return l(p);c=!1,a=s,d=new h}else d=t?[]:f;e:for(;++o<u;){var m=e[o],v=t?t(m):m;if(m=n||0!==m?m:0,c&&v==v){for(var g=d.length;g--;)if(d[g]===v)continue e;t&&d.push(v),f.push(m)}else a(d,v,n)||(d!==f&&d.push(v),f.push(m))}return f}(e,w(t)):[]}}).call(t,n(37),n(80)(e))},function(e,t,n){"use strict";var r=n(11),i=n(189);e.exports=function(e){return r(function(t,n){"function"==typeof t&&(n=t,t={}),e({path:"swarm/addrs/local",qs:t},function(e,t){if(e)return n(e);n(null,t.Strings.map(function(e){return i(e)}))})})}},function(e,t,n){"use strict";(function(t){var r=n(132),i=n(11),o=n(441),a=n(846),s=n(302),u=n(2586),c=n(2588),l=n(35),f=function(){return new Error("pubsub is currently not supported when run in the browser")};e.exports=function(e){function n(e,t,n,r){if(p.on(e,n),h[e])return r();var i={path:"pubsub/sub",args:[e],qs:{discover:t.discover}};h[e]=d.andTransform(i,u.from,function(t,i){if(t)return h[e]=null,p.removeListener(e,n),r(t);i.on("data",function(t){p.emit(e,t)}),i.on("error",function(e){p.emit("error",e)}),a(i,function(t){t&&p.emit("error",t),h[e]=null,p.removeListener(e,n)}),r()})}var d=l(e),p=new o,h={};return p.id=Math.random(),{subscribe:function(e,t,i,o){var a={discover:!1};return"function"==typeof t&&(o=i,i=t,t=a),t||(t=a),s?o?void n(e,t,i,o):new r(function(r,o){n(e,t,i,function(e){if(e)return o(e);r()})}):o?o(f()):r.reject(f())},unsubscribe:function(e,t){if(!s)throw f();if(0===p.listenerCount(e)||!h[e])throw new Error("Not subscribed to '".concat(e,"'"));p.removeListener(e,t),0===p.listenerCount(e)&&(h[e].abort(),h[e]=null)},publish:i(function(e,n,r){if(!s)return r(f());if(!t.isBuffer(n))return r(new Error("data must be a Buffer"));d({path:"pubsub/pub",args:[e,n]},r)}),ls:i(function(e){if(!s)return e(f());d.andTransform({path:"pubsub/ls"},c,e)}),peers:i(function(e,t){if(!s)return t(f());var n={path:"pubsub/peers",args:[e]};d.andTransform(n,c,t)}),setMaxListeners:function(e){return p.setMaxListeners(e)}}}}).call(t,n(10).Buffer)},function(e,t,n){"use strict";var r=n(128),i=n(21),o=n(178),a=n(13),s=n(14),u=n(23),c=n(24),l=n(51).Transform,f=n(2587),d=function(e){function t(e){a(this,t);var n=o(e||{},{objectMode:!0});return u(this,(t.__proto__||i(t)).call(this,n))}return c(t,l),s(t,[{key:"_transform",value:function(e,t,n){if(0===r(e).length)return n();try{var i=f.deserialize(e,"base64");this.push(i),n()}catch(e){return n(e)}}}],[{key:"from",value:function(e,n){var r=e.pipe(new t);e.on("end",function(){return r.emit("end")}),n(null,r)}}]),t}();e.exports=d},function(e,t,n){"use strict";(function(t){function r(e){if(!function(e){return e&&e.from&&e.seqno&&e.data&&(e.topicIDs||e.topicCIDs)}(e))throw new Error("Not a pubsub message");return{from:i.encode(t.from(e.from,"base64")).toString(),seqno:t.from(e.seqno,"base64"),data:t.from(e.data,"base64"),topicIDs:e.topicIDs||e.topicCIDs}}var i=n(133);e.exports={deserialize:function(e,t){if("json"===(t=t?t.toLowerCase():"json"))return function(e){return r(JSON.parse(e))}(e);if("base64"===t)return r(e);throw new Error("Unsupported encoding: '".concat(t,"'"))}}}).call(t,n(10).Buffer)},function(e,t,n){"use strict";e.exports=function(e,t){t(null,e.Strings||[])}},function(e,t,n){"use strict";var r=n(11),i=n(35);e.exports=function(e){var t=i(e);return{apply:r(function(e,n){"function"==typeof e&&(n=e,e={}),t({path:"update",qs:e},n)}),check:r(function(e,n){"function"==typeof e&&(n=e,e={}),t({path:"update/check",qs:e},n)}),log:r(function(e,n){"function"==typeof e&&(n=e,e={}),t({path:"update/log",qs:e},n)})}}},function(e,t,n){"use strict";var r=n(11),i=n(35);e.exports=function(e){var t=i(e);return r(function(e,n){"function"==typeof e&&(n=e,e={}),t({path:"version",qs:e},function(e,t){if(e)return n(e);var r={version:t.Version,commit:t.Commit,repo:t.Repo};n(null,r)})})}},function(e,t,n){"use strict";var r=n(35);e.exports=function(e){var t=r(e);return{add:n(842)(t),addReadableStream:n(1168)(t),addPullStream:n(1169)(t),cat:n(1171)(t),catReadableStream:n(1175)(t),catPullStream:n(1176)(t),get:n(1179)(t),getReadableStream:n(1182)(t),getPullStream:n(1183)(t),cp:n(2592)(t),mkdir:n(2593)(t),stat:n(2594)(t),rm:n(2595)(t),ls:n(2596)(t),read:n(2597)(t),write:n(2598)(t),mv:n(2599)(t)}}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e){return r(function(t,n,r){"function"==typeof n&&(r=n,n={}),e({path:"files/cp",args:t,qs:n},r)})}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e){return r(function(t,n,r){"function"==typeof n&&(r=n,n={}),e({path:"files/mkdir",args:t,qs:n},r)})}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e){return r(function(t,n,r){"function"==typeof n&&(r=n,n={}),e({path:"files/stat",args:t,qs:n},r)})}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e){return r(function(t,n,r){"function"!=typeof n||r||(r=n,n={}),"function"==typeof n&&"function"==typeof r&&(r=n,n={}),e({path:"files/rm",args:t,qs:n},r)})}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e){return r(function(t,n,r){return"function"==typeof n&&(r=n,n={}),e({path:"files/ls",args:t,qs:n},r)})}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e){return r(function(t,n,r){"function"==typeof n&&(r=n,n={}),e({path:"files/read",args:t,qs:n},r)})}},function(e,t,n){"use strict";var r=n(11),i=n(298),o=n(93),a=n(301);e.exports=function(e){var t=a(e,"files/write");return r(function(e,n,r,a){"function"!=typeof r||a||(a=r,r={}),"function"==typeof r&&"function"==typeof a&&(a=r,r={});var s=[].concat(n),u=o(a),c=t({args:e,qs:r}),l=i(function(e){return u(null,e)});c.once("error",u),c.pipe(l),s.forEach(function(e){return c.write(e)}),c.end()})}},function(e,t,n){"use strict";var r=n(11);e.exports=function(e){return r(function(t,n,r){"function"==typeof n&&void 0===r&&(r=n,n={}),e({path:"files/mv",args:t,qs:n},r)})}},function(e,t,n){"use strict";var r=n(302),i=n(11),o=n(35),a=n(858);e.exports=function(e){var t=a(o(e),"add");return i(function(e,n,i){return"function"==typeof n&&void 0===i&&(i=n,n={}),"function"==typeof n&&"function"==typeof i&&(i=n,n={}),r?"string"!=typeof e?i(new Error('"path" must be a string')):void t(e,{qs:n},i):i(new Error("fsAdd does not work in the browser"))})}},function(e,t,n){"use strict";var r=n(11),i=n(857).parse,o=n(1193),a=n(35),s=n(858);e.exports=function(e){var t=s(a(e),"add");return r(function(e,n,r){if("function"==typeof n&&void 0===r&&(r=n,n={}),"function"==typeof n&&"function"==typeof r&&(r=n,n={}),!u(e))return r(new Error('"url" param must be an http(s) url'));c(e,n,t,r)})};var u=function(e){return"string"==typeof e&&e.startsWith("http")},c=function e(t,n,r,a){o(i(t).protocol)(t,function(t){if(t.once("error",a),t.statusCode>=400)return a(new Error("Failed to download with ".concat(t.statusCode)));var i=t.headers.location;if(t.statusCode>=300&&t.statusCode<400&&i){if(!u(i))return a(new Error("redirection url must be an http(s) url"));e(i,n,r,a)}else r(t,{qs:n},a)}).end()}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(21)),o=r(n(13)),a=r(n(14)),s=r(n(23)),u=r(n(24)),c=r(n(1)),l=r(n(2)),f=r(n(2603)),d=r(n(2605)),p=n(1149),h=r(n(49)),m=n(60),v=n(193),g=function(e){function t(e){var n;return(0,o.default)(this,t),n=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e)),n.state={peers:[],locations:{},nonce:0},n}return(0,u.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.pollInterval=setInterval(function(){return e.getPeers()},1e3),this.getPeers()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,clearInterval(this.pollInterval)}},{key:"getPeers",value:function(){var e=this;this.props.ipfs.swarm.peers(function(t,n){if(t)return console.error(t);e.mounted&&(n=n.sort(function(e,t){return e.peer.toB58String()>t.peer.toB58String()?1:-1})).forEach(function(t,r){t.ipfs=e.props.ipfs,t.location={formatted:""};var i=t.peer.toB58String();if(!e.state.locations[i]){e.state.locations[i]={};var o=t.addr.toString();(0,p.lookupPretty)(e.props.ipfs,[o],function(o,a){if(o)return console.error(o);if(e.mounted){a=a||{},t.location=a;var s=e.state.locations;s[i]=a,n[r]=t,e.setState({peers:n,locations:s,nonce:e.state.nonce++})}})}})})}},{key:"render",value:function(){return c.default.createElement(m.Row,null,c.default.createElement(m.Col,{sm:6,className:"globe-column"},c.default.createElement(d.default,{peers:this.state.peers})),c.default.createElement(m.Col,{sm:6},c.default.createElement("h4",null,h.default.t("Connected to X peer",{postProcess:"sprintf",sprintf:[this.state.peers.length],count:this.state.peers.length})),c.default.createElement("div",null,c.default.createElement(f.default,{peers:this.state.peers}))))}}]),t}(c.default.Component);g.displayName="Connections",g.propTypes={peers:l.default.array,ipfs:l.default.object};var b=(0,v.withIpfs)(g);t.default=b},function(e,t,n){"use strict";var r=n(22),i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(143)),a=i(n(21)),s=i(n(13)),u=i(n(14)),c=i(n(23)),l=i(n(24)),f=r(n(1)),d=i(n(2)),p=i(n(2604)),h=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.peers||[];return f.default.createElement("ul",{className:"list-group"},e.map(function(e,t){return f.default.createElement(p.default,(0,o.default)({},e,{key:t}))}))}}]),t}(f.Component);h.displayName="ConnectionList",h.propTypes={peers:d.default.array};var m=h;t.default=m},function(e,t,n){"use strict";var r=n(22),i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(21)),a=i(n(13)),s=i(n(14)),u=i(n(23)),c=i(n(24)),l=r(n(1)),f=i(n(2)),d=i(n(1148)),p=function(e){function t(e){var n;return(0,a.default)(this,t),n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e)),Object.defineProperty(n,"_handleClick",{configurable:!0,enumerable:!0,writable:!0,value:function(){if(n.state.open)return n.setState({open:!1});var e=n.props.peer.toB58String();n.props.ipfs.id(e,function(e,t){if(e)return console.error(e);n.setState({open:!0,peer:t})})}}),n.state={open:!1},n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e="";this.state.open&&(e=l.default.createElement(d.default,{peer:this.state.peer,location:this.props.location,bytesRead:this.props.bytesRead,bytesWritten:this.props.bytesWritten}));var t=this.props.peer.toB58String();return l.default.createElement("li",{className:"webui-connection list-group-item "+(this.state.open?"active":"")},l.default.createElement("button",{className:"btn btn-link",onClick:this._handleClick},l.default.createElement("strong",null,t),l.default.createElement("br",null),l.default.createElement("span",null,this.props.addr.toString()),l.default.createElement("i",{className:"icon fa fa-lg fa-angle-down"})),e)}}]),t}(l.Component);p.displayName="Connection",p.propTypes={ipfs:f.default.object,location:f.default.object,bytesRead:f.default.number,bytesWritten:f.default.number,peer:f.default.object,addr:f.default.object};var h=p;t.default=h},function(e,t,n){"use strict";var r=n(22),i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(21)),a=i(n(13)),s=i(n(14)),u=i(n(23)),c=i(n(24)),l=r(n(1)),f=i(n(2)),d=i(n(2606)),p=i(n(867)),h=n(147);n(2610);var m=(0,p.default)("pages:connections"),v=function(e){function t(e){var n;return(0,a.default)(this,t),n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e)),n.state={theme:"light"},n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this._createGlobe()}},{key:"componentWillUnmount",value:function(){this.globe&&this.globe.dispose()}},{key:"componentDidUpdate",value:function(e,t){t.theme!==this.state.theme&&(m("disposing globe"),this._globe&&this._globe.dispose(),this._createGlobe()),this._addPoints()}},{key:"_addPoints",value:function(){var e=this._parsePeers();this.globe&&e.length&&(m("adding %d points, %j",e.length,e),this.globe.addData(e,{format:"magnitude"}),this.globe.createPoints())}},{key:"_createGlobe",value:function(){var e="/"===window.location.pathname.slice(-1)?"":"/",t=window.location.pathname+e+"img/"+("dark"===this.state.theme?"dark-":"");m("mounting globe"),this.globe=new d.default(this.refs.globe,{imgDir:t}),this.globe.animate()}},{key:"_parsePeers",value:function(e){var t={};return(0,h.forEach)(this.props.peers,function(e,n){if(e.location&&e.location.latitude&&e.location.longitude){var r=e.location.latitude+"|"+e.location.longitude;t[r]||(t[r]=0),t[r]=[e.location.latitude,e.location.longitude,Math.min(10,t[r]+.1)]}}),(0,h.flatten)((0,h.values)(t))}},{key:"render",value:function(){var e=this;return l.default.createElement("div",{className:"globe-container"},l.default.createElement("div",{ref:"globe",style:{width:"100%",height:"600px"}}),l.default.createElement("div",{className:"theme-toggle",onClick:function(){return e.setState({theme:"dark"===e.state.theme?"light":"dark"})}},l.default.createElement("i",{className:"fa fa-exchange"})))}}]),t}(l.Component);v.displayName="Globe",v.propTypes={peers:f.default.array};var g=v;t.default=g},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(e,t,n,r,i){var o=(90-e)*Math.PI/180,a=(180-t)*Math.PI/180;E.position.x=200*Math.sin(o)*Math.cos(a),E.position.y=200*Math.cos(o),E.position.z=200*Math.sin(o)*Math.sin(a),E.lookAt(_.position),E.scale.z=Math.max(n,.1),E.updateMatrix();for(var s=0;s<E.geometry.faces.length;s++)E.geometry.faces[s].color=r;i.merge(E.geometry,E.matrix)}function r(t){t.preventDefault(),e.addEventListener("mousemove",i,!1),e.addEventListener("mouseup",s,!1),e.addEventListener("mouseout",u,!1),T.x=-t.clientX,T.y=t.clientY,A.x=P.x,A.y=P.y,e.style.cursor="move"}function i(e){M.x=-e.clientX,M.y=e.clientY;var t=N/1e3;P.x=A.x+.005*(M.x-T.x)*t,P.y=A.y+.005*(M.y-T.y)*t,P.y=P.y>R?R:P.y,P.y=P.y<-R?-R:P.y}function s(t){e.removeEventListener("mousemove",i,!1),e.removeEventListener("mouseup",s,!1),e.removeEventListener("mouseout",u,!1),e.style.cursor="auto"}function u(t){e.removeEventListener("mousemove",i,!1),e.removeEventListener("mouseup",s,!1),e.removeEventListener("mouseout",u,!1)}function c(e){}function l(e){}function f(e){switch(e.keyCode){case 38:p(100),e.preventDefault();break;case 40:p(-100),e.preventDefault()}}function d(t){m.aspect=e.offsetWidth/e.offsetHeight,m.updateProjectionMatrix(),g.setSize(e.offsetWidth,e.offsetHeight)}function p(e){k=(k=(k-=e)>1e3?1e3:k)<350?350:k}function h(){window.requestAnimationFrame(h),p(O),C.x+=.1*(P.x-C.x),C.y+=.1*(P.y-C.y),N+=.3*(k-N),m.position.x=N*Math.sin(C.x)*Math.cos(C.y),m.position.y=N*Math.sin(C.y),m.position.z=N*Math.cos(C.x)*Math.cos(C.y),m.lookAt(_.position),g.render(v,m)}var m,v,g,b,y,_,E,w=(t=t||{}).colorFn||function(e){var t=new o.Color;return t.setHSL(.6-.5*e,1,.5),t},x=t.imgDir||"/globe/",S={earth:{uniforms:{texture:{type:"t",value:null}},vertexShader:["varying vec3 vNormal;","varying vec2 vUv;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","vNormal = normalize( normalMatrix * normal );","vUv = uv;","}"].join("\n"),fragmentShader:["uniform sampler2D texture;","varying vec3 vNormal;","varying vec2 vUv;","void main() {","vec3 diffuse = texture2D( texture, vUv ).xyz;","float intensity = 1.05 - dot( vNormal, vec3( 0.0, 0.0, 1.0 ) );","vec3 atmosphere = vec3( 1.0, 1.0, 1.0 ) * pow( intensity, 3.0 );","gl_FragColor = vec4( diffuse + atmosphere, 1.0 );","}"].join("\n")},atmosphere:{uniforms:{},vertexShader:["varying vec3 vNormal;","void main() {","vNormal = normalize( normalMatrix * normal );","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec3 vNormal;","void main() {","float intensity = pow( 0.8 - dot( vNormal, vec3( 0, 0, 1.0 ) ), 12.0 );","gl_FragColor = vec4( 1.0, 1.0, 1.0, 1.0 ) * intensity;","}"].join("\n")}},O=0,M={x:0,y:0},T={x:0,y:0},C={x:0,y:0},P={x:3*Math.PI/2,y:Math.PI/6},A={x:0,y:0},N=1e5,k=1e5,R=Math.PI/2;return function(){e.style.color="#fff",e.style.font="13px/20px Arial, sans-serif";var t,n,i;b=e.offsetWidth||window.innerWidth,y=e.offsetHeight||window.innerHeight,(m=new o.PerspectiveCamera(30,b/y,1,1e4)).position.z=N,v=new o.Scene;var a=new o.SphereGeometry(200,40,30);t=S.earth,(n=o.UniformsUtils.clone(t.uniforms)).texture.value=(new o.TextureLoader).load(x+"world.jpg"),i=new o.ShaderMaterial({uniforms:n,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),(_=new o.Mesh(a,i)).rotation.y=Math.PI,v.add(_),t=S.atmosphere,n=o.UniformsUtils.clone(t.uniforms),i=new o.ShaderMaterial({uniforms:n,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:o.BackSide,blending:o.AdditiveBlending,transparent:!0}),(_=new o.Mesh(a,i)).scale.set(1.1,1.1,1.1),v.add(_),(a=new o.BoxGeometry(.75,.75,1)).applyMatrix((new o.Matrix4).makeTranslation(0,0,-.5)),E=new o.Mesh(a),(g=new o.WebGLRenderer({antialias:!0,alpha:!0})).setSize(b,y),g.domElement.style.position="absolute",e.appendChild(g.domElement),e.addEventListener("mousedown",r,!1),document.addEventListener("keydown",f,!1),window.addEventListener("resize",d,!1),e.addEventListener("mouseover",c),e.addEventListener("mouseout",l)}(),this.animate=h,this.__defineGetter__("time",function(){return this._time||0}),this.__defineSetter__("time",function(e){var t=[],n=this.points.morphTargetDictionary;for(var r in n)r.indexOf("morphPadding")<0&&t.push(n[r]);t.sort();for(var i=e*(t.length-1)+1,o=Math.floor(i),a=0;a<t.length;a++)this.points.morphTargetInfluences[t[a]]=0;var s=o-1,u=i-o;s>=0&&(this.points.morphTargetInfluences[s]=1-u),this.points.morphTargetInfluences[o]=u,this._time=e}),this.addData=function(e,t){var r,i,a,s,u,c,l;if(t.animated=t.animated||!1,this.is_animated=t.animated,t.format=t.format||"magnitude","magnitude"===t.format)c=3,l=function(e,t){return w(e[t+2])};else{if("legend"!==t.format)throw new Error("error: format not supported: "+t.format);c=4,l=function(e,t){return w(e[t+3])}}if(t.animated){if(void 0===this._baseGeometry)for(this._baseGeometry=new o.Geometry,u=0;u<e.length;u+=c)n(r=e[u],i=e[u+1],a=0,s=l(e,u),this._baseGeometry);void 0===this._morphTargetId?this._morphTargetId=0:this._morphTargetId+=1,t.name=t.name||"morphTarget"+this._morphTargetId}var f=new o.Geometry;for(u=0;u<e.length;u+=c)r=e[u],i=e[u+1],s=l(e,u),a=e[u+2],n(r,i,a*=200,s,f);t.animated?this._baseGeometry.morphTargets.push({name:t.name,vertices:f.vertices}):this._baseGeometry=f},this.createPoints=function(){if(void 0!==this._baseGeometry){if(!1===this.is_animated)this.points=new o.Mesh(this._baseGeometry,new o.MeshBasicMaterial({color:16777215,vertexColors:o.FaceColors,morphTargets:!1}));else{if(this._baseGeometry.morphTargets.length<8){a("t l",this._baseGeometry.morphTargets.length);var e=8-this._baseGeometry.morphTargets.length;a("padding",e);for(var t=0;t<=e;t++)a("padding",t),this._baseGeometry.morphTargets.push({name:"morphPadding"+t,vertices:this._baseGeometry.vertices})}this.points=new o.Mesh(this._baseGeometry,new o.MeshBasicMaterial({color:16777215,vertexColors:o.FaceColors,morphTargets:!0}))}v.add(this.points)}},this.renderer=g,this.scene=v,this.dispose=function(){u(),e.removeEventListener("mouseover",c),e.removeEventListener("mouseout",l),e.removeEventListener("mousedown",r),document.removeEventListener("keydown",f),window.removeEventListener("resize",d),e.removeChild(g.domElement),function(e){try{e.traverse(function(e){try{g.deallocateObject(e)}catch(e){}try{e.geometry.deallocate()}catch(e){}try{e.material.deallocate()}catch(e){}try{e.deallocate()}catch(e){}})}catch(e){}}(v)},this};var i=r(n(867)),o=n(2609),a=(0,i.default)("globe:scripts")},function(e,t,n){function r(e){function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var i=t.formatters[r];if("function"==typeof i){var o=a[u];n=i.call(e,o),a.splice(u,1),u--}return n}),t.formatArgs.call(e,a);(n.log||t.log||console.log.bind(console)).apply(e,a)}}var r;return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),n.destroy=i,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];var n,r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(2608),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){function n(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var r=1e3,i=60*r,o=60*i,a=24*o,s=365.25*a;e.exports=function(e,t){t=t||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*s;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===u&&!1===isNaN(e))return t.long?function(e){return n(e,a,"day")||n(e,o,"hour")||n(e,i,"minute")||n(e,r,"second")||e+" ms"}(e):function(e){return e>=a?Math.round(e/a)+"d":e>=o?Math.round(e/o)+"h":e>=i?Math.round(e/i)+"m":e>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";function r(){}function i(e,t){this.x=e||0,this.y=t||0}function o(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function a(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function s(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function u(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function c(e,t,n,r,o,a,s,l,f,d){Object.defineProperty(this,"id",{value:is++}),this.uuid=rs.generateUUID(),this.name="",this.image=void 0!==e?e:c.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:c.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Qo,this.wrapT=void 0!==r?r:Qo,this.magFilter=void 0!==o?o:ra,this.minFilter=void 0!==a?a:oa,this.anisotropy=void 0!==f?f:1,this.format=void 0!==s?s:_a,this.type=void 0!==l?l:aa,this.offset=new i(0,0),this.repeat=new i(1,1),this.center=new i(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new u,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:Ka,this.version=0,this.onUpdate=null}function l(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function f(e,t,n){this.uuid=rs.generateUUID(),this.width=e,this.height=t,this.scissor=new l(0,0,e,t),this.scissorTest=!1,this.viewport=new l(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=ra),this.texture=new c(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function d(e,t,n){f.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function p(e,t,n,r,i,o,a,s,u,l,f,d){c.call(this,null,o,a,s,u,l,r,i,f,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:ea,this.minFilter=void 0!==l?l:ea,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function h(e,t,n,r,i,o,a,s,u,l){c.call(this,e=void 0!==e?e:[],t=void 0!==t?t:qo,n,r,i,o,a,s,u,l),this.flipY=!1}function m(){this.seq=[],this.map={}}function v(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=ss[i];if(void 0===o&&(o=new Float32Array(i),ss[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function g(e,t){var n=us[t];void 0===n&&(n=new Int32Array(t),us[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function b(e,t){e.uniform1f(this.addr,t)}function y(e,t){e.uniform1i(this.addr,t)}function _(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function E(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function w(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function x(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function S(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(ls.set(t.elements),e.uniformMatrix3fv(this.addr,!1,ls))}function O(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(cs.set(t.elements),e.uniformMatrix4fv(this.addr,!1,cs))}function M(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||os,r)}function T(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||as,r)}function C(e,t){e.uniform2iv(this.addr,t)}function P(e,t){e.uniform3iv(this.addr,t)}function A(e,t){e.uniform4iv(this.addr,t)}function N(e,t){e.uniform1fv(this.addr,t)}function k(e,t){e.uniform1iv(this.addr,t)}function R(e,t){e.uniform2fv(this.addr,v(t,this.size,2))}function D(e,t){e.uniform3fv(this.addr,v(t,this.size,3))}function I(e,t){e.uniform4fv(this.addr,v(t,this.size,4))}function j(e,t){e.uniformMatrix2fv(this.addr,!1,v(t,this.size,4))}function L(e,t){e.uniformMatrix3fv(this.addr,!1,v(t,this.size,9))}function B(e,t){e.uniformMatrix4fv(this.addr,!1,v(t,this.size,16))}function F(e,t,n){var r=t.length,i=g(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture2D(t[o]||os,i[o])}function U(e,t,n){var r=t.length,i=g(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTextureCube(t[o]||as,i[o])}function z(e,t,n){this.id=e,this.addr=n,this.setValue=function(e){switch(e){case 5126:return b;case 35664:return _;case 35665:return E;case 35666:return w;case 35674:return x;case 35675:return S;case 35676:return O;case 35678:case 36198:return M;case 35680:return T;case 5124:case 35670:return y;case 35667:case 35671:return C;case 35668:case 35672:return P;case 35669:case 35673:return A}}(t.type)}function G(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return N;case 35664:return R;case 35665:return D;case 35666:return I;case 35674:return j;case 35675:return L;case 35676:return B;case 35678:return F;case 35680:return U;case 5124:case 35670:return k;case 35667:case 35671:return C;case 35668:case 35672:return P;case 35669:case 35673:return A}}(t.type)}function H(e){this.id=e,m.call(this)}function q(e,t){e.seq.push(t),e.map[t.id]=t}function V(e,t,n){var r=e.name,i=r.length;for(fs.lastIndex=0;;){var o=fs.exec(r),a=fs.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){q(n,void 0===c?new z(s,e,t):new G(s,e,t));break}var l=n.map[s];void 0===l&&q(n,l=new H(s)),n=l}}function W(e,t,n){m.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=e.getActiveUniform(t,i),a=o.name;V(o,e.getUniformLocation(t,a),this)}}function K(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function $(e,t){this.min=void 0!==e?e:new i(1/0,1/0),this.max=void 0!==t?t:new i(-1/0,-1/0)}function Y(e,t,n,r,o){function a(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),r=new Uint16Array([0,1,2,0,2,3]);u=t.createBuffer(),c=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW),h=t.createTexture(),m=t.createTexture(),n.bindTexture(t.TEXTURE_2D,h),t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),n.bindTexture(t.TEXTURE_2D,m),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),l={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tvUV = uv;","\tvec2 pos = position;","\tif ( renderType == 2 ) {","\t\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","\t\tvVisibility =        visibility.r / 9.0;","\t\tvVisibility *= 1.0 - visibility.g / 9.0;","\t\tvVisibility *=       visibility.b / 9.0;","\t\tvVisibility *= 1.0 - visibility.a / 9.0;","\t\tpos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","\t\tpos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","\t}","\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tif ( renderType == 0 ) {","\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","\t} else if ( renderType == 1 ) {","\t\tgl_FragColor = texture2D( map, vUV );","\t} else {","\t\tvec4 texture = texture2D( map, vUV );","\t\ttexture.a *= opacity * vVisibility;","\t\tgl_FragColor = texture;","\t\tgl_FragColor.rgb *= color;","\t}","}"].join("\n")},f=function(e){var n=t.createProgram(),r=t.createShader(t.FRAGMENT_SHADER),i=t.createShader(t.VERTEX_SHADER),a="precision "+o.precision+" float;\n";return t.shaderSource(r,a+e.fragmentShader),t.shaderSource(i,a+e.vertexShader),t.compileShader(r),t.compileShader(i),t.attachShader(n,r),t.attachShader(n,i),t.linkProgram(n),n}(l),d={vertex:t.getAttribLocation(f,"position"),uv:t.getAttribLocation(f,"uv")},p={renderType:t.getUniformLocation(f,"renderType"),map:t.getUniformLocation(f,"map"),occlusionMap:t.getUniformLocation(f,"occlusionMap"),opacity:t.getUniformLocation(f,"opacity"),color:t.getUniformLocation(f,"color"),scale:t.getUniformLocation(f,"scale"),rotation:t.getUniformLocation(f,"rotation"),screenPosition:t.getUniformLocation(f,"screenPosition")}}var u,c,l,f,d,p,h,m;this.render=function(e,o,l,v){if(0!==e.length){var g=new s,b=v.w/v.z,y=.5*v.z,_=.5*v.w,E=16/v.w,w=new i(E*b,E),x=new s(1,1,0),S=new i(1,1),O=new $;O.min.set(v.x,v.y),O.max.set(v.x+(v.z-16),v.y+(v.w-16)),void 0===f&&a(),n.useProgram(f),n.initAttributes(),n.enableAttribute(d.vertex),n.enableAttribute(d.uv),n.disableUnusedAttributes(),t.uniform1i(p.occlusionMap,0),t.uniform1i(p.map,1),t.bindBuffer(t.ARRAY_BUFFER,u),t.vertexAttribPointer(d.vertex,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(d.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),n.disable(t.CULL_FACE),n.buffers.depth.setMask(!1);for(var M=0,T=e.length;M<T;M++){E=16/v.w,w.set(E*b,E);var C=e[M];if(g.set(C.matrixWorld.elements[12],C.matrixWorld.elements[13],C.matrixWorld.elements[14]),g.applyMatrix4(l.matrixWorldInverse),g.applyMatrix4(l.projectionMatrix),x.copy(g),S.x=v.x+x.x*y+y-8,S.y=v.y+x.y*_+_-8,!0===O.containsPoint(S)){n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,null),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,h),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,S.x,S.y,16,16,0),t.uniform1i(p.renderType,0),t.uniform2f(p.scale,w.x,w.y),t.uniform3f(p.screenPosition,x.x,x.y,x.z),n.disable(t.BLEND),n.enable(t.DEPTH_TEST),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,m),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,S.x,S.y,16,16,0),t.uniform1i(p.renderType,1),n.disable(t.DEPTH_TEST),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,h),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),C.positionScreen.copy(x),C.customUpdateCallback?C.customUpdateCallback(C):C.updateLensFlares(),t.uniform1i(p.renderType,2),n.enable(t.BLEND);for(var P=0,A=C.lensFlares.length;P<A;P++){var N=C.lensFlares[P];N.opacity>.001&&N.scale>.001&&(x.x=N.x,x.y=N.y,x.z=N.z,E=N.size*N.scale/v.w,w.x=E*b,w.y=E,t.uniform3f(p.screenPosition,x.x,x.y,x.z),t.uniform2f(p.scale,w.x,w.y),t.uniform1f(p.rotation,N.rotation),t.uniform1f(p.opacity,N.opacity),t.uniform3f(p.color,N.color.r,N.color.g,N.color.b),n.setBlending(N.blending,N.blendEquation,N.blendSrc,N.blendDst),r.setTexture2D(N.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}}}n.enable(t.CULL_FACE),n.enable(t.DEPTH_TEST),n.buffers.depth.setMask(!0),n.reset()}}}function X(e,t,n,r,i,o,a,s,u){c.call(this,e,t,n,r,i,o,a,s,u),this.needsUpdate=!0}function Z(e,t,n,r,i){function o(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);c=t.createBuffer(),l=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,l),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),f=function(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),r=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = position * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(r,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(n),t.compileShader(r),t.attachShader(e,n),t.attachShader(e,r),t.linkProgram(e),e}(),d={position:t.getAttribLocation(f,"position"),uv:t.getAttribLocation(f,"uv")},p={uvOffset:t.getUniformLocation(f,"uvOffset"),uvScale:t.getUniformLocation(f,"uvScale"),rotation:t.getUniformLocation(f,"rotation"),scale:t.getUniformLocation(f,"scale"),color:t.getUniformLocation(f,"color"),map:t.getUniformLocation(f,"map"),opacity:t.getUniformLocation(f,"opacity"),modelViewMatrix:t.getUniformLocation(f,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(f,"projectionMatrix"),fogType:t.getUniformLocation(f,"fogType"),fogDensity:t.getUniformLocation(f,"fogDensity"),fogNear:t.getUniformLocation(f,"fogNear"),fogFar:t.getUniformLocation(f,"fogFar"),fogColor:t.getUniformLocation(f,"fogColor"),fogDepth:t.getUniformLocation(f,"fogDepth"),alphaTest:t.getUniformLocation(f,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8,r.height=8;var o=r.getContext("2d");o.fillStyle="white",o.fillRect(0,0,8,8),h=new X(r)}function u(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var c,l,f,d,p,h,m=new s,v=new a,g=new s;this.render=function(i,a,s){if(0!==i.length){void 0===f&&o(),n.useProgram(f),n.initAttributes(),n.enableAttribute(d.position),n.enableAttribute(d.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,c),t.vertexAttribPointer(d.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(d.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,l),t.uniformMatrix4fv(p.projectionMatrix,!1,s.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(p.map,0);var b=0,y=0,_=a.fog;_?(t.uniform3f(p.fogColor,_.color.r,_.color.g,_.color.b),_.isFog?(t.uniform1f(p.fogNear,_.near),t.uniform1f(p.fogFar,_.far),t.uniform1i(p.fogType,1),b=1,y=1):_.isFogExp2&&(t.uniform1f(p.fogDensity,_.density),t.uniform1i(p.fogType,2),b=2,y=2)):(t.uniform1i(p.fogType,0),b=0,y=0);for(var E=0,w=i.length;E<w;E++){(S=i[E]).modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,S.matrixWorld),S.z=-S.modelViewMatrix.elements[14]}i.sort(u);for(var x=[],E=0,w=i.length;E<w;E++){var S=i[E],O=S.material;if(!1!==O.visible){S.onBeforeRender(e,a,s,void 0,O,void 0),t.uniform1f(p.alphaTest,O.alphaTest),t.uniformMatrix4fv(p.modelViewMatrix,!1,S.modelViewMatrix.elements),S.matrixWorld.decompose(m,v,g),x[0]=g.x,x[1]=g.y;var M=0;a.fog&&O.fog&&(M=y),b!==M&&(t.uniform1i(p.fogType,M),b=M),null!==O.map?(t.uniform2f(p.uvOffset,O.map.offset.x,O.map.offset.y),t.uniform2f(p.uvScale,O.map.repeat.x,O.map.repeat.y)):(t.uniform2f(p.uvOffset,0,0),t.uniform2f(p.uvScale,1,1)),t.uniform1f(p.opacity,O.opacity),t.uniform3f(p.color,O.color.r,O.color.g,O.color.b),t.uniform1f(p.rotation,O.rotation),t.uniform2fv(p.scale,x),n.setBlending(O.blending,O.blendEquation,O.blendSrc,O.blendDst,O.blendEquationAlpha,O.blendSrcAlpha,O.blendDstAlpha,O.premultipliedAlpha),n.buffers.depth.setTest(O.depthTest),n.buffers.depth.setMask(O.depthWrite),n.buffers.color.setMask(O.colorWrite),r.setTexture2D(O.map||h,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),S.onAfterRender(e,a,s,void 0,O,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}function Q(){Object.defineProperty(this,"id",{value:gs++}),this.uuid=rs.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=oo,this.side=Xi,this.flatShading=!1,this.vertexColors=to,this.opacity=1,this.transparent=!1,this.blendSrc=_o,this.blendDst=Eo,this.blendEquation=lo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ao,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function J(e){Q.call(this),this.type="MeshDepthMaterial",this.depthPacking=ts,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function ee(e){Q.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new s,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function te(e,t){this.min=void 0!==e?e:new s(1/0,1/0,1/0),this.max=void 0!==t?t:new s(-1/0,-1/0,-1/0)}function ne(e,t){this.center=void 0!==e?e:new s,this.radius=void 0!==t?t:0}function re(e,t){this.normal=void 0!==e?e:new s(1,0,0),this.constant=void 0!==t?t:0}function ie(e,t,n,r,i,o){this.planes=[void 0!==e?e:new re,void 0!==t?t:new re,void 0!==n?n:new re,void 0!==r?r:new re,void 0!==i?i:new re,void 0!==o?o:new re]}function oe(e,t,n){function r(t,n,r,i,o,a){var s=t.geometry,u=null,c=y,l=t.customDepthMaterial;if(r&&(c=_,l=t.customDistanceMaterial),l)u=l;else{var f=!1;n.morphTargets&&(s&&s.isBufferGeometry?f=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(f=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var d=t.isSkinnedMesh&&n.skinning,p=0;f&&(p|=v),d&&(p|=g),u=c[p]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var h=u.uuid,m=n.uuid,b=E[h];void 0===b&&(b={},E[h]=b);var w=b[m];void 0===w&&(w=u.clone(),b[m]=w),u=w}u.visible=n.visible,u.wireframe=n.wireframe;var x=n.side;return A.renderSingleSided&&x==Qi&&(x=Xi),A.renderReverseSided&&(x===Xi?x=Zi:x===Zi&&(x=Xi)),u.side=x,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function a(n,i,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||u.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var c=t.update(n),l=n.material;if(Array.isArray(l))for(var f=c.groups,d=0,p=f.length;d<p;d++){var h=f[d],v=l[h.materialIndex];if(v&&v.visible){g=r(n,v,s,m,o.near,o.far);e.renderBufferDirect(o,null,c,g,n,h)}}else if(l.visible){var g=r(n,l,s,m,o.near,o.far);e.renderBufferDirect(o,null,c,g,n,null)}}for(var b=n.children,y=0,_=b.length;y<_;y++)a(b[y],i,o,s)}}for(var u=new ie,c=new o,d=new i,p=new i(n,n),h=new s,m=new s,v=1,g=2,b=1+(v|g),y=new Array(b),_=new Array(b),E={},w=[new s(1,0,0),new s(-1,0,0),new s(0,0,1),new s(0,0,-1),new s(0,1,0),new s(0,-1,0)],x=[new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,0,1),new s(0,0,-1)],S=[new l,new l,new l,new l,new l,new l],O=0;O!==b;++O){var M=0!=(O&v),T=0!=(O&g),C=new J({depthPacking:ns,morphTargets:M,skinning:T});y[O]=C;var P=new ee({morphTargets:M,skinning:T});_[O]=P}var A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=$i,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,n,r){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==t.length){var i=e.context,o=e.state;o.disable(i.BLEND),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var s,l=0,v=t.length;l<v;l++){var g=t[l],b=g.shadow,y=g&&g.isPointLight;if(void 0!==b){var _=b.camera;if(d.copy(b.mapSize),d.min(p),y){var E=d.x,O=d.y;S[0].set(2*E,O,E,O),S[1].set(0,O,E,O),S[2].set(3*E,O,E,O),S[3].set(E,O,E,O),S[4].set(3*E,0,E,O),S[5].set(E,0,E,O),d.x*=4,d.y*=2}if(null===b.map){var M={minFilter:ea,magFilter:ea,format:_a};b.map=new f(d.x,d.y,M),b.map.texture.name=g.name+".shadowMap",_.updateProjectionMatrix()}b.isSpotLightShadow&&b.update(g);var T=b.map,C=b.matrix;m.setFromMatrixPosition(g.matrixWorld),_.position.copy(m),y?(s=6,C.makeTranslation(-m.x,-m.y,-m.z)):(s=1,h.setFromMatrixPosition(g.target.matrixWorld),_.lookAt(h),_.updateMatrixWorld(),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(_.projectionMatrix),C.multiply(_.matrixWorldInverse)),e.setRenderTarget(T),e.clear();for(var P=0;P<s;P++){if(y){h.copy(_.position),h.add(w[P]),_.up.copy(x[P]),_.lookAt(h),_.updateMatrixWorld();var N=S[P];o.viewport(N)}c.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse),u.setFromMatrix(c),a(n,r,_,y)}}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}A.needsUpdate=!1}}}function ae(e){var t={};return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t[e.uuid]},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t[n.uuid];r&&(e.deleteBuffer(r.buffer),delete t[n.uuid])},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t[n.uuid];void 0===i?t[n.uuid]=function(t,n){var r=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=e.FLOAT;return r instanceof Float32Array?a=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=e.UNSIGNED_SHORT:r instanceof Int16Array?a=e.SHORT:r instanceof Uint32Array?a=e.UNSIGNED_INT:r instanceof Int32Array?a=e.INT:r instanceof Int8Array?a=e.BYTE:r instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r):i.version<n.version&&(function(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,e.STATIC_DRAW):-1===o.count?e.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function se(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||se.DefaultOrder}function ue(){this.mask=1}function ce(){Object.defineProperty(this,"id",{value:bs++}),this.uuid=rs.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ce.DefaultUp.clone();var e=new s,t=new se,n=new a,r=new s(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new o},normalMatrix:{value:new u}}),this.matrix=new o,this.matrixWorld=new o,this.matrixAutoUpdate=ce.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ue,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function le(){ce.call(this),this.type="Camera",this.matrixWorldInverse=new o,this.projectionMatrix=new o}function fe(e,t,n,r,i,o){le.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function de(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new s,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new K,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function pe(){Object.defineProperty(this,"id",{value:ys+=2}),this.uuid=rs.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function he(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=rs.generateUUID(),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function me(e,t,n){he.call(this,new Int8Array(e),t,n)}function ve(e,t,n){he.call(this,new Uint8Array(e),t,n)}function ge(e,t,n){he.call(this,new Uint8ClampedArray(e),t,n)}function be(e,t,n){he.call(this,new Int16Array(e),t,n)}function ye(e,t,n){he.call(this,new Uint16Array(e),t,n)}function _e(e,t,n){he.call(this,new Int32Array(e),t,n)}function Ee(e,t,n){he.call(this,new Uint32Array(e),t,n)}function we(e,t,n){he.call(this,new Float32Array(e),t,n)}function xe(e,t,n){he.call(this,new Float64Array(e),t,n)}function Se(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Oe(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function Me(){Object.defineProperty(this,"id",{value:_s+=2}),this.uuid=rs.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Te(e,t,n,r,i,o){pe.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Ce(e,t,n,r,i,o)),this.mergeVertices()}function Ce(e,t,n,r,i,o){function a(e,t,n,r,i,o,a,m,v,g,b){var y,_,E=o/v,w=a/g,x=o/2,S=a/2,O=m/2,M=v+1,T=g+1,C=0,P=0,A=new s;for(_=0;_<T;_++){var N=_*w-S;for(y=0;y<M;y++){var k=y*E-x;A[e]=k*r,A[t]=N*i,A[n]=O,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=m>0?1:-1,f.push(A.x,A.y,A.z),d.push(y/v),d.push(1-_/g),C+=1}}for(_=0;_<g;_++)for(y=0;y<v;y++){var R=p+y+M*_,D=p+y+M*(_+1),I=p+(y+1)+M*(_+1),j=p+(y+1)+M*_;c.push(R,D,j),c.push(D,I,j),P+=6}u.addGroup(h,P,b),h+=P,p+=C}Me.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var u=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1;var c=[],l=[],f=[],d=[],p=0,h=0;a("z","y","x",-1,-1,n,t,e,o=Math.floor(o)||1,i,0),a("z","y","x",1,-1,n,t,-e,o,i,1),a("x","z","y",1,1,e,n,t,r,o,2),a("x","z","y",1,-1,e,n,-t,r,o,3),a("x","y","z",1,-1,e,t,n,r,i,4),a("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(c),this.addAttribute("position",new we(l,3)),this.addAttribute("normal",new we(f,3)),this.addAttribute("uv",new we(d,2))}function Pe(e,t,n,r){pe.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Ae(e,t,n,r)),this.mergeVertices()}function Ae(e,t,n,r){Me.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,u=Math.floor(n)||1,c=Math.floor(r)||1,l=u+1,f=c+1,d=e/u,p=t/c,h=[],m=[],v=[],g=[];for(o=0;o<f;o++){var b=o*p-s;for(i=0;i<l;i++){var y=i*d-a;m.push(y,-b,0),v.push(0,0,1),g.push(i/u),g.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<u;i++){var _=i+l*o,E=i+l*(o+1),w=i+1+l*(o+1),x=i+1+l*o;h.push(_,E,x),h.push(E,w,x)}this.setIndex(h),this.addAttribute("position",new we(m,3)),this.addAttribute("normal",new we(v,3)),this.addAttribute("uv",new we(g,2))}function Ne(e){Q.call(this),this.type="MeshBasicMaterial",this.color=new K(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Io,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function ke(e){Q.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Re(e,t){this.origin=void 0!==e?e:new s,this.direction=void 0!==t?t:new s}function De(e,t){this.start=void 0!==e?e:new s,this.end=void 0!==t?t:new s}function Ie(e,t,n){this.a=void 0!==e?e:new s,this.b=void 0!==t?t:new s,this.c=void 0!==n?n:new s}function je(e,t){ce.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Me,this.material=void 0!==t?t:new Ne({color:16777215*Math.random()}),this.drawMode=qa,this.updateMorphTargets()}function Le(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Be(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Fe(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new function(){var e=[],t=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(i,o,a,s,u){var c=e[t];void 0===c?(c={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:u},e[t]=c):(c.id=i.id,c.object=i,c.geometry=o,c.material=a,c.program=a.program,c.renderOrder=i.renderOrder,c.z=s,c.group=u),(!0===a.transparent?r:n).push(c),t++},sort:function(){n.length>1&&n.sort(Le),r.length>1&&r.sort(Be)}}},e[r]=i),i},dispose:function(){e={}}}}function Ue(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ze(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new s,color:new K,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new s,direction:new s,color:new K,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new s,color:new K,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new s,skyColor:new K,groundColor:new K};break;case"RectAreaLight":n={color:new K,position:new s,halfWidth:new s,halfHeight:new s}}return e[t.id]=n,n}}},t={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new s,r=new o,a=new o;return{setup:function(i,o,s){for(var u=0,c=0,l=0,f=0,d=0,p=0,h=0,m=0,v=s.matrixWorldInverse,g=0,b=i.length;g<b;g++){var y=i[g],_=y.color,E=y.intensity,w=y.distance,x=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)u+=_.r*E,c+=_.g*E,l+=_.b*E;else if(y.isDirectionalLight)(O=e.get(y)).color.copy(y.color).multiplyScalar(y.intensity),O.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),O.direction.sub(n),O.direction.transformDirection(v),O.shadow=y.castShadow,y.castShadow&&(S=y.shadow,O.shadowBias=S.bias,O.shadowRadius=S.radius,O.shadowMapSize=S.mapSize),t.directionalShadowMap[f]=x,t.directionalShadowMatrix[f]=y.shadow.matrix,t.directional[f]=O,f++;else if(y.isSpotLight)(O=e.get(y)).position.setFromMatrixPosition(y.matrixWorld),O.position.applyMatrix4(v),O.color.copy(_).multiplyScalar(E),O.distance=w,O.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),O.direction.sub(n),O.direction.transformDirection(v),O.coneCos=Math.cos(y.angle),O.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),O.decay=0===y.distance?0:y.decay,O.shadow=y.castShadow,y.castShadow&&(S=y.shadow,O.shadowBias=S.bias,O.shadowRadius=S.radius,O.shadowMapSize=S.mapSize),t.spotShadowMap[p]=x,t.spotShadowMatrix[p]=y.shadow.matrix,t.spot[p]=O,p++;else if(y.isRectAreaLight)(O=e.get(y)).color.copy(_).multiplyScalar(E/(y.width*y.height)),O.position.setFromMatrixPosition(y.matrixWorld),O.position.applyMatrix4(v),a.identity(),r.copy(y.matrixWorld),r.premultiply(v),a.extractRotation(r),O.halfWidth.set(.5*y.width,0,0),O.halfHeight.set(0,.5*y.height,0),O.halfWidth.applyMatrix4(a),O.halfHeight.applyMatrix4(a),t.rectArea[h]=O,h++;else if(y.isPointLight){if((O=e.get(y)).position.setFromMatrixPosition(y.matrixWorld),O.position.applyMatrix4(v),O.color.copy(y.color).multiplyScalar(y.intensity),O.distance=y.distance,O.decay=0===y.distance?0:y.decay,O.shadow=y.castShadow,y.castShadow){var S=y.shadow;O.shadowBias=S.bias,O.shadowRadius=S.radius,O.shadowMapSize=S.mapSize,O.shadowCameraNear=S.camera.near,O.shadowCameraFar=S.camera.far}t.pointShadowMap[d]=x,t.pointShadowMatrix[d]=y.shadow.matrix,t.point[d]=O,d++}else if(y.isHemisphereLight){var O=e.get(y);O.direction.setFromMatrixPosition(y.matrixWorld),O.direction.transformDirection(v),O.direction.normalize(),O.skyColor.copy(y.color).multiplyScalar(E),O.groundColor.copy(y.groundColor).multiplyScalar(E),t.hemi[m]=O,m++}}t.ambient[0]=u,t.ambient[1]=c,t.ambient[2]=l,t.directional.length=f,t.spot.length=p,t.rectArea.length=h,t.point.length=d,t.hemi.length=m,t.hash=f+","+d+","+p+","+h+","+m+","+o.length},state:t}}function Ge(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}function He(e){switch(e){case Ka:return["Linear","( value )"];case $a:return["sRGB","( value )"];case Xa:return["RGBE","( value )"];case Qa:return["RGBM","( value, 7.0 )"];case Ja:return["RGBM","( value, 16.0 )"];case es:return["RGBD","( value, 256.0 )"];case Ya:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function qe(e,t){var n=He(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ve(e){return""!==e}function We(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Ke(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){var n=ms[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Ke(n)})}function $e(e){return e.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function Ye(e,t,n,r,i,o){var a=e.context,s=r.defines,u=i.vertexShader,c=i.fragmentShader,l="SHADOWMAP_TYPE_BASIC";o.shadowMapType===$i?l="SHADOWMAP_TYPE_PCF":o.shadowMapType===Yi&&(l="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case qo:case Vo:f="ENVMAP_TYPE_CUBE";break;case Yo:case Xo:f="ENVMAP_TYPE_CUBE_UV";break;case Wo:case Ko:f="ENVMAP_TYPE_EQUIREC";break;case $o:f="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case Vo:case Ko:d="ENVMAP_MODE_REFRACTION"}switch(r.combine){case Io:p="ENVMAP_BLENDING_MULTIPLY";break;case jo:p="ENVMAP_BLENDING_MIX";break;case Lo:p="ENVMAP_BLENDING_ADD"}}var h,m,v=e.gammaFactor>0?e.gammaFactor:1,g=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ve).join("\n")}(r.extensions,o,t),b=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),y=a.createProgram();r.isRawShaderMaterial?((h=[b].filter(Ve).join("\n")).length>0&&(h+="\n"),(m=[g,b].filter(Ve).join("\n")).length>0&&(m+="\n")):(h=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+o.numClippingPlanes,o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ve).join("\n"),m=[g,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+v,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.envMap?"#define "+d:"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+o.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(o.numClippingPlanes-o.numClipIntersection),o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+l:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Bo?"#define TONE_MAPPING":"",o.toneMapping!==Bo?ms.tonemapping_pars_fragment:"",o.toneMapping!==Bo?function(e,t){var n;switch(t){case Fo:n="Linear";break;case Uo:n="Reinhard";break;case zo:n="Uncharted2";break;case Go:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?ms.encodings_pars_fragment:"",o.mapEncoding?qe("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?qe("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?qe("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?function(e,t){var n=He(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Ve).join("\n")),u=We(u=Ke(u),o),c=We(c=Ke(c),o),r.isShaderMaterial||(u=$e(u),c=$e(c));var _=h+u,E=m+c,w=Ge(a,a.VERTEX_SHADER,_),x=Ge(a,a.FRAGMENT_SHADER,E);a.attachShader(y,w),a.attachShader(y,x),void 0!==r.index0AttributeName?a.bindAttribLocation(y,0,r.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(y,0,"position"),a.linkProgram(y);var S=a.getProgramInfoLog(y),O=a.getShaderInfoLog(w),M=a.getShaderInfoLog(x),T=!0,C=!0;!1===a.getProgramParameter(y,a.LINK_STATUS)?(T=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(y,a.VALIDATE_STATUS),"gl.getProgramInfoLog",S,O,M)):""!==S?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",S):""!==O&&""!==M||(C=!1),C&&(this.diagnostics={runnable:T,material:r,programLog:S,vertexShader:{log:O,prefix:h},fragmentShader:{log:M,prefix:m}}),a.deleteShader(w),a.deleteShader(x);var P;this.getUniforms=function(){return void 0===P&&(P=new W(a,y,e)),P};var A;return this.getAttributes=function(){return void 0===A&&(A=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(a,y)),A},this.destroy=function(){a.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Es++,this.code=n,this.usedTimes=1,this.program=y,this.vertexShader=w,this.fragmentShader=x,this}function Xe(e,t,n){function r(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Ka,n===Ka&&t&&(n=Ya),n}var i=[],o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(t,i,a,s,u,c,l){var f=o[t.type],d=l.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),o=Math.min(i,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}(l):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var h=e.getRenderTarget();return{shaderID:f,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:r(h?h.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:r(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:r(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Yo||t.envMap.mapping===Xo),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:r(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:u,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===Qi,flipSided:t.side===Zi,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var o=0;o<a.length;o++)r.push(n[a[o]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(n,r,o,a){for(var s,u=0,c=i.length;u<c;u++){var l=i[u];if(l.code===a){++(s=l).usedTimes;break}}return void 0===s&&(s=new Ye(e,t,a,n,r,o),i.push(s)),s},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function Ze(e,t,n,r,i,o,a){function s(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n);return r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function u(e){return rs.isPowerOfTwo(e.width)&&rs.isPowerOfTwo(e.height)}function c(e,t){return e.generateMipmaps&&t&&e.minFilter!==ea&&e.minFilter!==ra}function l(t){return t===ea||t===ta||t===na?e.NEAREST:e.LINEAR}function f(t){var n=t.target;n.removeEventListener("dispose",f),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}(n),a.textures--}function d(t){var n=t.target;n.removeEventListener("dispose",d),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}(n),a.textures--}function p(t,l){var d=r.get(t);if(t.version>0&&d.__version!==t.version){var p=t.image;if(void 0===p)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==p.complete)return void function(t,r,l){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",f),t.__webglTexture=e.createTexture(),a.textures++);n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var d=s(r.image,i.maxTextureSize);(function(e){return e.wrapS!==Qo||e.wrapT!==Qo||e.minFilter!==ea&&e.minFilter!==ra})(r)&&!1===u(d)&&(d=function(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.width=rs.floorPowerOfTwo(e.width),t.height=rs.floorPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}(d));var p=u(d),m=o.convert(r.format),v=o.convert(r.type);h(e.TEXTURE_2D,r,p);var g,y=r.mipmaps;if(r.isDepthTexture){var _=e.DEPTH_COMPONENT;if(r.type===da){if(!b)throw new Error("Float Depth Texture only supported in WebGL2.0");_=e.DEPTH_COMPONENT32F}else b&&(_=e.DEPTH_COMPONENT16);r.format===Sa&&_===e.DEPTH_COMPONENT&&r.type!==ca&&r.type!==fa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=ca,v=o.convert(r.type)),r.format===Oa&&(_=e.DEPTH_STENCIL,r.type!==ga&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=ga,v=o.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,_,d.width,d.height,0,m,v,null)}else if(r.isDataTexture)if(y.length>0&&p){for(var E=0,w=y.length;E<w;E++)g=y[E],n.texImage2D(e.TEXTURE_2D,E,m,g.width,g.height,0,m,v,g.data);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,m,d.width,d.height,0,m,v,d.data);else if(r.isCompressedTexture)for(var E=0,w=y.length;E<w;E++)g=y[E],r.format!==_a&&r.format!==ya?n.getCompressedTextureFormats().indexOf(m)>-1?n.compressedTexImage2D(e.TEXTURE_2D,E,m,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,E,m,g.width,g.height,0,m,v,g.data);else if(y.length>0&&p){for(var E=0,w=y.length;E<w;E++)g=y[E],n.texImage2D(e.TEXTURE_2D,E,m,m,v,g);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,m,m,v,d);c(r,p)&&e.generateMipmap(e.TEXTURE_2D);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(d,t,l);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_2D,d.__webglTexture)}function h(n,a,s){var u;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===Qo&&a.wrapT===Qo||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,l(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,l(a.minFilter)),a.minFilter!==ea&&a.minFilter!==ra&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),u=t.get("EXT_texture_filter_anisotropic")){if(a.type===da&&null===t.get("OES_texture_float_linear"))return;if(a.type===pa&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function m(t,i,a,s){var u=o.convert(i.texture.format),c=o.convert(i.texture.type);n.texImage2D(s,0,u,i.width,i.height,0,u,c,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function v(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function g(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),p(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Sa)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==Oa)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),v(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),v(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}var b="undefined"!=typeof WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext;this.setTexture2D=p,this.setTextureCube=function(t,l){var d=r.get(t);if(6===t.image.length)if(t.version>0&&d.__version!==t.version){d.__image__webglTextureCube||(t.addEventListener("dispose",f),d.__image__webglTextureCube=e.createTexture(),a.textures++),n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,d.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var p=t&&t.isCompressedTexture,m=t.image[0]&&t.image[0].isDataTexture,v=[],g=0;g<6;g++)v[g]=p||m?m?t.image[g].image:t.image[g]:s(t.image[g],i.maxCubemapSize);var b=u(v[0]),y=o.convert(t.format),_=o.convert(t.type);for(h(e.TEXTURE_CUBE_MAP,t,b),g=0;g<6;g++)if(p)for(var E,w=v[g].mipmaps,x=0,S=w.length;x<S;x++)E=w[x],t.format!==_a&&t.format!==ya?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,x,y,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,x,y,E.width,E.height,0,y,_,E.data);else m?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,y,v[g].width,v[g].height,0,y,_,v[g].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,y,y,_,v[g]);c(t,b)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),d.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,d.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",d),o.__webglTexture=e.createTexture(),a.textures++;var s=!0===t.isWebGLRenderTargetCube,l=u(t);if(s)for(i.__webglFramebuffer=[],f=0;f<6;f++)i.__webglFramebuffer[f]=e.createFramebuffer();else i.__webglFramebuffer=e.createFramebuffer();if(s){n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),h(e.TEXTURE_CUBE_MAP,t.texture,l);for(var f=0;f<6;f++)m(i.__webglFramebuffer[f],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+f);c(t.texture,l)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),h(e.TEXTURE_2D,t.texture,l),m(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),c(t.texture,l)&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&g(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(c(i,u(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),e.generateMipmap(o),n.bindTexture(o,null)}}}function Qe(e,t,n,r){le.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Je(e){Qe.call(this),this.cameras=e||[]}function et(e,t){return{convert:function(n){var r;if(n===Zo)return e.REPEAT;if(n===Qo)return e.CLAMP_TO_EDGE;if(n===Jo)return e.MIRRORED_REPEAT;if(n===ea)return e.NEAREST;if(n===ta)return e.NEAREST_MIPMAP_NEAREST;if(n===na)return e.NEAREST_MIPMAP_LINEAR;if(n===ra)return e.LINEAR;if(n===ia)return e.LINEAR_MIPMAP_NEAREST;if(n===oa)return e.LINEAR_MIPMAP_LINEAR;if(n===aa)return e.UNSIGNED_BYTE;if(n===ha)return e.UNSIGNED_SHORT_4_4_4_4;if(n===ma)return e.UNSIGNED_SHORT_5_5_5_1;if(n===va)return e.UNSIGNED_SHORT_5_6_5;if(n===sa)return e.BYTE;if(n===ua)return e.SHORT;if(n===ca)return e.UNSIGNED_SHORT;if(n===la)return e.INT;if(n===fa)return e.UNSIGNED_INT;if(n===da)return e.FLOAT;if(n===pa&&null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES;if(n===ba)return e.ALPHA;if(n===ya)return e.RGB;if(n===_a)return e.RGBA;if(n===Ea)return e.LUMINANCE;if(n===wa)return e.LUMINANCE_ALPHA;if(n===Sa)return e.DEPTH_COMPONENT;if(n===Oa)return e.DEPTH_STENCIL;if(n===lo)return e.FUNC_ADD;if(n===fo)return e.FUNC_SUBTRACT;if(n===po)return e.FUNC_REVERSE_SUBTRACT;if(n===vo)return e.ZERO;if(n===go)return e.ONE;if(n===bo)return e.SRC_COLOR;if(n===yo)return e.ONE_MINUS_SRC_COLOR;if(n===_o)return e.SRC_ALPHA;if(n===Eo)return e.ONE_MINUS_SRC_ALPHA;if(n===wo)return e.DST_ALPHA;if(n===xo)return e.ONE_MINUS_DST_ALPHA;if(n===So)return e.DST_COLOR;if(n===Oo)return e.ONE_MINUS_DST_COLOR;if(n===Mo)return e.SRC_ALPHA_SATURATE;if((n===Ma||n===Ta||n===Ca||n===Pa)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(n===Ma)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ta)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ca)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Pa)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===Aa||n===Na||n===ka||n===Ra)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===Aa)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Na)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ka)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ra)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Da&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((n===ho||n===mo)&&null!==(r=t.get("EXT_blend_minmax"))){if(n===ho)return r.MIN_EXT;if(n===mo)return r.MAX_EXT}return n===ga&&null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:0}}}function tt(e){function t(){return null===j?Q:1}function n(){(ge=new function(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}(me)).get("WEBGL_depth_texture"),ge.get("OES_texture_float"),ge.get("OES_texture_float_linear"),ge.get("OES_texture_half_float"),ge.get("OES_texture_half_float_linear"),ge.get("OES_standard_derivatives"),ge.get("OES_element_index_uint"),ge.get("ANGLE_instanced_arrays"),We=new et(me,ge),be=new function(e,t,n){function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var i,o=void 0!==n.precision?n.precision:"highp",a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var s=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),h=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=c>0,g=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:s,maxTextures:u,maxVertexTextures:c,maxTextureSize:l,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:h,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:g,floatVertexTextures:v&&g}}(me,ge,e),(_e=new function(e,t,n){function r(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}function i(t){!0!==y[t]&&(e.enable(t),y[t]=!0)}function o(t){!1!==y[t]&&(e.disable(t),y[t]=!1)}function a(t,r,a,s,u,c,l,f){if(t!==io?i(e.BLEND):o(e.BLEND),t!==co){if(t!==w||f!==P)switch(t){case ao:f?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case so:f?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case uo:f?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:f?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}x=null,S=null,O=null,M=null,T=null,C=null}else u=u||r,c=c||a,l=l||s,r===x&&u===M||(e.blendEquationSeparate(n.convert(r),n.convert(u)),x=r,M=u),a===S&&s===O&&c===T&&l===C||(e.blendFuncSeparate(n.convert(a),n.convert(s),n.convert(c),n.convert(l)),S=a,O=s,T=c,C=l);w=t,P=f}function s(t){A!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),A=t)}function u(t){t!==zi?(i(e.CULL_FACE),t!==N&&(t===Gi?e.cullFace(e.BACK):t===Hi?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):o(e.CULL_FACE),N=t}function c(t,n,r){t?(i(e.POLYGON_OFFSET_FILL),R===n&&D===r||(e.polygonOffset(n,r),R=n,D=r)):o(e.POLYGON_OFFSET_FILL)}function f(t){void 0===t&&(t=e.TEXTURE0+I-1),B!==t&&(e.activeTexture(t),B=t)}var d=new function(){var t=!1,n=new l,r=null,i=new l(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},p=new function(){var t=!1,n=null,r=null,a=null;return{setTest:function(t){t?i(e.DEPTH_TEST):o(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case To:e.depthFunc(e.NEVER);break;case Co:e.depthFunc(e.ALWAYS);break;case Po:e.depthFunc(e.LESS);break;case Ao:e.depthFunc(e.LEQUAL);break;case No:e.depthFunc(e.EQUAL);break;case ko:e.depthFunc(e.GEQUAL);break;case Ro:e.depthFunc(e.GREATER);break;case Do:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,n=null,r=null,a=null}}},h=new function(){var t=!1,n=null,r=null,a=null,s=null,u=null,c=null,l=null,f=null;return{setTest:function(t){t?i(e.STENCIL_TEST):o(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,i){r===t&&a===n&&s===i||(e.stencilFunc(t,n,i),r=t,a=n,s=i)},setOp:function(t,n,r){u===t&&c===n&&l===r||(e.stencilOp(t,n,r),u=t,c=n,l=r)},setLocked:function(e){t=e},setClear:function(t){f!==t&&(e.clearStencil(t),f=t)},reset:function(){t=!1,n=null,r=null,a=null,s=null,u=null,c=null,l=null,f=null}}},m=e.getParameter(e.MAX_VERTEX_ATTRIBS),v=new Uint8Array(m),g=new Uint8Array(m),b=new Uint8Array(m),y={},_=null,E=null,w=null,x=null,S=null,O=null,M=null,T=null,C=null,P=!1,A=null,N=null,k=null,R=null,D=null,I=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),j=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),L=parseFloat(j)>=1,B=null,F={},U=new l,z=new l,G={};return G[e.TEXTURE_2D]=r(e.TEXTURE_2D,e.TEXTURE_2D,1),G[e.TEXTURE_CUBE_MAP]=r(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),d.setClear(0,0,0,1),p.setClear(1),h.setClear(0),i(e.DEPTH_TEST),p.setFunc(Ao),s(!1),u(Gi),i(e.CULL_FACE),i(e.BLEND),a(oo),{buffers:{color:d,depth:p,stencil:h},initAttributes:function(){for(var e=0,t=v.length;e<t;e++)v[e]=0},enableAttribute:function(n){v[n]=1,0===g[n]&&(e.enableVertexAttribArray(n),g[n]=1),0!==b[n]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),b[n]=0)},enableAttributeAndDivisor:function(n,r){v[n]=1,0===g[n]&&(e.enableVertexAttribArray(n),g[n]=1),b[n]!==r&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,r),b[n]=r)},disableUnusedAttributes:function(){for(var t=0,n=g.length;t!==n;++t)g[t]!==v[t]&&(e.disableVertexAttribArray(t),g[t]=0)},enable:i,disable:o,getCompressedTextureFormats:function(){if(null===_&&(_=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)_.push(n[r]);return _},useProgram:function(t){return E!==t&&(e.useProgram(t),E=t,!0)},setBlending:a,setMaterial:function(t){t.side===Qi?o(e.CULL_FACE):i(e.CULL_FACE),s(t.side===Zi),!0===t.transparent?a(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):a(io),p.setFunc(t.depthFunc),p.setTest(t.depthTest),p.setMask(t.depthWrite),d.setMask(t.colorWrite),c(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:s,setCullFace:u,setLineWidth:function(t){t!==k&&(L&&e.lineWidth(t),k=t)},setPolygonOffset:c,setScissorTest:function(t){t?i(e.SCISSOR_TEST):o(e.SCISSOR_TEST)},activeTexture:f,bindTexture:function(t,n){null===B&&f();var r=F[B];void 0===r&&(r={type:void 0,texture:void 0},F[B]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||G[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){for(var t=0;t<g.length;t++)1===g[t]&&(e.disableVertexAttribArray(t),g[t]=0);y={},_=null,B=null,F={},E=null,w=null,A=null,N=null,d.reset(),p.reset(),h.reset()}}}(me,ge,We)).scissor(H.copy(ee).multiplyScalar(Q)),_e.viewport(G.copy(J).multiplyScalar(Q)),we=new function(){var e={};return{get:function(t){var n=t.uuid,r=e[n];return void 0===r&&(r={},e[n]=r),r},remove:function(t){delete e[t.uuid]},clear:function(){e={}}}},xe=new Ze(me,ge,_e,we,be,We,pe),Se=new ae(me),Te=new function(e,t,n){function r(e){var a=e.target,s=i[a.id];null!==s.index&&t.remove(s.index);for(var u in s.attributes)t.remove(s.attributes[u]);a.removeEventListener("dispose",r),delete i[a.id];var c=o[a.id];c&&(t.remove(c),delete o[a.id]),(c=o[s.id])&&(t.remove(c),delete o[s.id]),n.geometries--}var i={},o={};return{get:function(e,t){var o=i[t.id];return o||(t.addEventListener("dispose",r),t.isBufferGeometry?o=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Me).setFromObject(e)),o=t._bufferGeometry),i[t.id]=o,n.geometries++,o)},update:function(n){var r=n.index,i=n.attributes;null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER);for(var o in i)t.update(i[o],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,c=s.length;u<c;u++)t.update(s[u],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var r=o[n.id];if(r)return r;var i=[],a=n.index,s=n.attributes;if(null!==a)for(var u=0,c=(p=a.array).length;u<c;u+=3){var l=p[u+0],f=p[u+1],d=p[u+2];i.push(l,f,f,d,d,l)}else for(var p=s.position.array,u=0,c=p.length/3-1;u<c;u+=3){var l=u+0,f=u+1,d=u+2;i.push(l,f,f,d,d,l)}return r=new(Oe(i)>65535?Ee:ye)(i,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),o[n.id]=r,r}}}(me,Se,pe),Pe=new function(e,t){var n={};return{update:function(r){var i=t.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a},clear:function(){n={}}}}(Te,he),Be=new function(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=s.length,c=t[i.id];if(void 0===c){for(c=[],d=0;d<u;d++)c[d]=[d,0];t[i.id]=c}for(var l=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal,d=0;d<u;d++)0!==(p=c[d])[1]&&(l&&i.removeAttribute("morphTarget"+d),f&&i.removeAttribute("morphNormal"+d));for(d=0;d<u;d++)(p=c[d])[0]=d,p[1]=s[d];for(c.sort(Ue),d=0;d<8;d++){var p=c[d];if(p){var h=p[0],m=p[1];if(m){l&&i.addAttribute("morphTarget"+d,l[h]),f&&i.addAttribute("morphNormal"+d,f[h]),n[d]=m;continue}}n[d]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}(me),De=new Xe(D,ge,be),Re=new ze,Ie=new Fe,Le=new function(e,t,n,r){function i(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}var o,a,s,u=new K(0),c=0;return{getClearColor:function(){return u},setClearColor:function(e,t){u.set(e),i(u,c=void 0!==t?t:1)},getClearAlpha:function(){return c},setClearAlpha:function(e){i(u,c=e)},render:function(t,r,l,f){var d=r.background;null===d?i(u,c):d&&d.isColor&&(i(d,1),f=!0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&d.isCubeTexture?(void 0===s&&((s=new je(new Ce(1,1,1),new ke({uniforms:vs.cube.uniforms,vertexShader:vs.cube.vertexShader,fragmentShader:vs.cube.fragmentShader,side:Zi,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(s.geometry)),s.material.uniforms.tCube.value=d,t.push(s,s.geometry,s.material,0,null)):d&&d.isTexture&&(void 0===o&&(o=new fe(-1,1,1,-1,0,1),a=new je(new Ae(2,2),new Ne({depthTest:!1,depthWrite:!1,fog:!1})),n.update(a.geometry)),a.material.map=d,e.renderBufferDirect(o,null,a.geometry,a.material,a,null))}}}(D,_e,Te,T),Ge=new function(e,t,n){var r;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.calls++,n.vertices+=i,r===e.TRIANGLES?n.faces+=i/3:r===e.POINTS&&(n.points+=i)},this.renderInstances=function(i,o,a){var s=t.get("ANGLE_instanced_arrays");if(null!==s){var u=i.attributes.position;u.isInterleavedBufferAttribute?(a=u.data.count,s.drawArraysInstancedANGLE(r,0,a,i.maxInstancedCount)):s.drawArraysInstancedANGLE(r,o,a,i.maxInstancedCount),n.calls++,n.vertices+=a*i.maxInstancedCount,r===e.TRIANGLES?n.faces+=i.maxInstancedCount*a/3:r===e.POINTS&&(n.points+=i.maxInstancedCount*a)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(me,ge,he),He=new function(e,t,n){var r,i,o;this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,o=e.bytesPerElement},this.render=function(t,a){e.drawElements(r,a,i,t*o),n.calls++,n.vertices+=a,r===e.TRIANGLES?n.faces+=a/3:r===e.POINTS&&(n.points+=a)},this.renderInstances=function(a,s,u){var c=t.get("ANGLE_instanced_arrays");null!==c?(c.drawElementsInstancedANGLE(r,u,i,s*o,a.maxInstancedCount),n.calls++,n.vertices+=u*a.maxInstancedCount,r===e.TRIANGLES?n.faces+=a.maxInstancedCount*u/3:r===e.POINTS&&(n.points+=a.maxInstancedCount*u)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(me,ge,he),qe=new Y(D,me,_e,xe,be),Ve=new Z(D,me,_e,xe,be),D.info.programs=De.programs,D.context=me,D.capabilities=be,D.extensions=ge,D.properties=we,D.renderLists=Ie,D.state=_e}function r(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function i(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1,n()}function a(e){var t=e.target;t.removeEventListener("dispose",a),function(e){c(e),we.remove(e)}(t)}function c(e){var t=we.get(e).program;e.program=void 0,void 0!==t&&De.releaseProgram(t)}function f(e){null!==tt&&tt(e);var t=Ke.getDevice();t&&t.isPresenting?t.requestAnimationFrame(f):window.requestAnimationFrame(f)}function d(e,t,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isLight)P.push(e),e.castShadow&&A.push(e);else if(e.isSprite)e.frustumCulled&&!ne.intersectsSprite(e)||k.push(e);else if(e.isLensFlare)R.push(e);else if(e.isImmediateRenderObject)n&&de.setFromMatrixPosition(e.matrixWorld).applyMatrix4(le),N.push(e,null,e.material,de.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||ne.intersectsObject(e))){n&&de.setFromMatrixPosition(e.matrixWorld).applyMatrix4(le);var r=Pe.update(e),i=e.material;if(Array.isArray(i))for(var o=r.groups,a=0,s=o.length;a<s;a++){var u=o[a],c=i[u.materialIndex];c&&c.visible&&N.push(e,r,c,de.z,u)}else i.visible&&N.push(e,r,i,de.z,null)}for(var l=e.children,a=0,s=l.length;a<s;a++)d(l[a],t,n)}}function h(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){z=n;for(var f=n.cameras,d=0,p=f.length;d<p;d++){var h=f[d];if(s.layers.test(h.layers)){var v=h.bounds,g=v.x*$,b=v.y*X,y=v.z*$,_=v.w*X;_e.viewport(G.set(g,b,y,_).multiplyScalar(Q)),m(s,t,h,u,c,l)}}}else z=null,m(s,t,n,u,c,l)}}function m(e,t,n,r,i,o){if(e.onBeforeRender(D,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){_e.setMaterial(i);var a=g(n,t.fog,i,e);F="",function(e,t,n){e.render(function(e){D.renderBufferImmediate(e,t,n)})}(e,a,i)}else D.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(D,t,n,r,i,o)}function v(e,t,n){var r=we.get(e),i=De.getParameters(e,Re.state,A,t,se.numPlanes,se.numIntersection,n),o=De.getProgramCode(e,i),s=r.program,u=!0;if(void 0===s)e.addEventListener("dispose",a);else if(s.code!==o)c(e);else{if(void 0!==i.shaderID)return;u=!1}if(u){if(i.shaderID){var l=vs[i.shaderID];r.shader={name:e.type,uniforms:hs.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader),s=De.acquireProgram(e,r.shader,i,o),r.program=s,e.program=s}var f=s.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(d=0;d<D.maxMorphTargets;d++)f["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var d=0;d<D.maxMorphNormals;d++)f["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var p=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=se.numPlanes,r.numIntersection=se.numIntersection,p.clippingPlanes=se.uniform),r.fog=t,r.lightsHash=Re.state.hash,e.lights&&(p.ambientLightColor.value=Re.state.ambient,p.directionalLights.value=Re.state.directional,p.spotLights.value=Re.state.spot,p.rectAreaLights.value=Re.state.rectArea,p.pointLights.value=Re.state.point,p.hemisphereLights.value=Re.state.hemi,p.directionalShadowMap.value=Re.state.directionalShadowMap,p.directionalShadowMatrix.value=Re.state.directionalShadowMatrix,p.spotShadowMap.value=Re.state.spotShadowMap,p.spotShadowMatrix.value=Re.state.spotShadowMatrix,p.pointShadowMap.value=Re.state.pointShadowMap,p.pointShadowMatrix.value=Re.state.pointShadowMatrix);var h=r.program.getUniforms(),m=W.seqWithValue(h.seq,p);r.uniformsList=m}function g(e,t,n,r){V=0;var i=we.get(n);if(ue&&(ce||e!==U)){var o=e===U&&n.id===B;se.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,o)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:n.lights&&i.lightsHash!==Re.state.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===se.numPlanes&&i.numIntersection===se.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(v(n,t,r),n.needsUpdate=!1);var a=!1,s=!1,u=!1,c=i.program,l=c.getUniforms(),f=i.shader.uniforms;if(_e.useProgram(c.program)&&(a=!0,s=!0,u=!0),n.id!==B&&(B=n.id,s=!0),a||e!==U){if(l.setValue(me,"projectionMatrix",e.projectionMatrix),be.logarithmicDepthBuffer&&l.setValue(me,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),U!==(z||e)&&(U=z||e,s=!0,u=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var d=l.map.cameraPosition;void 0!==d&&d.setValue(me,de.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&l.setValue(me,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){l.setOptional(me,r,"bindMatrix"),l.setOptional(me,r,"bindMatrixInverse");var h=r.skeleton;if(h){var m=h.bones;if(be.floatVertexTextures){if(void 0===h.boneTexture){var g=Math.sqrt(4*m.length);g=rs.ceilPowerOfTwo(g),g=Math.max(g,4);var E=new Float32Array(g*g*4);E.set(h.boneMatrices);var w=new p(E,g,g,_a,da);h.boneMatrices=E,h.boneTexture=w,h.boneTextureSize=g}l.setValue(me,"boneTexture",h.boneTexture),l.setValue(me,"boneTextureSize",h.boneTextureSize)}else l.setOptional(me,h,"boneMatrices")}}return s&&(l.setValue(me,"toneMappingExposure",D.toneMappingExposure),l.setValue(me,"toneMappingWhitePoint",D.toneMappingWhitePoint),n.lights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(f,u),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(f,t),n.isMeshBasicMaterial?b(f,n):n.isMeshLambertMaterial?(b(f,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(f,n)):n.isMeshPhongMaterial?(b(f,n),n.isMeshToonMaterial?function(e,t){y(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(f,n):y(f,n)):n.isMeshStandardMaterial?(b(f,n),n.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,_(e,t)}(f,n):_(f,n)):n.isMeshDepthMaterial?(b(f,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(f,n)):n.isMeshDistanceMaterial?(b(f,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(f,n)):n.isMeshNormalMaterial?(b(f,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale);t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(f,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(f,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(f,n)):n.isPointsMaterial?function(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*Q,e.scale.value=.5*X,e.map.value=t.map,null!==t.map){if(!0===t.map.matrixAutoUpdate){var n=t.map.offset,r=t.map.repeat,i=t.map.rotation,o=t.map.center;t.map.matrix.setUvTransform(n.x,n.y,r.x,r.y,i,o.x,o.y)}e.uvTransform.value.copy(t.map.matrix)}}(f,n):n.isShadowMaterial&&(f.color.value=n.color,f.opacity.value=n.opacity),void 0!==f.ltcMat&&(f.ltcMat.value=ps.LTC_MAT_TEXTURE),void 0!==f.ltcMag&&(f.ltcMag.value=ps.LTC_MAG_TEXTURE),W.upload(me,i.uniformsList,f,D)),l.setValue(me,"modelViewMatrix",r.modelViewMatrix),l.setValue(me,"normalMatrix",r.normalMatrix),l.setValue(me,"modelMatrix",r.matrixWorld),c}function b(e,t){e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;if(t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){if(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate){var r=n.offset,i=n.repeat,o=n.rotation,a=n.center;n.matrix.setUvTransform(r.x,r.y,i.x,i.y,o,a.x,a.y)}e.uvTransform.value.copy(n.matrix)}}function y(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function _(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}console.log("THREE.WebGLRenderer",Fi);var E=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),w=void 0!==e.context?e.context:null,x=void 0!==e.alpha&&e.alpha,S=void 0===e.depth||e.depth,O=void 0===e.stencil||e.stencil,M=void 0!==e.antialias&&e.antialias,T=void 0===e.premultipliedAlpha||e.premultipliedAlpha,C=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,P=[],A=[],N=null,k=[],R=[];this.domElement=E,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Fo,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var D=this,I=!1,j=null,L=null,B=-1,F="",U=null,z=null,G=new l,H=new l,q=null,V=0,$=E.width,X=E.height,Q=1,J=new l(0,0,$,X),ee=new l(0,0,$,X),te=!1,ne=new ie,se=new function(){function e(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),n.numPlanes=i,n.numIntersection=0}function t(e,t,r,i){var o=null!==e?e.length:0,a=null;if(0!==o){if(a=l.value,!0!==i||null===a){var u=r+4*o,f=t.matrixWorldInverse;c.getNormalMatrix(f),(null===a||a.length<u)&&(a=new Float32Array(u));for(var d=0,p=r;d!==o;++d,p+=4)s.copy(e[d]).applyMatrix4(f,c),s.normal.toArray(a,p),a[p+3]=s.constant}l.value=a,l.needsUpdate=!0}return n.numPlanes=o,a}var n=this,r=null,i=0,o=!1,a=!1,s=new re,c=new u,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,a){var s=0!==e.length||n||0!==i||o;return o=n,r=t(e,a,0),i=e.length,s},this.beginShadows=function(){a=!0,t(null)},this.endShadows=function(){a=!1,e()},this.setState=function(n,s,u,c,f,d){if(!o||null===n||0===n.length||a&&!u)a?t(null):e();else{var p=a?0:i,h=4*p,m=f.clippingState||null;l.value=m,m=t(n,c,h,d);for(var v=0;v!==h;++v)m[v]=r[v];f.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=p}}},ue=!1,ce=!1,le=new o,de=new s,pe={geometries:0,textures:0},he={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:he,memory:pe,programs:null};var me;try{var ve={alpha:x,depth:S,stencil:O,antialias:M,premultipliedAlpha:T,preserveDrawingBuffer:C};if(null===(me=w||E.getContext("webgl",ve)||E.getContext("experimental-webgl",ve)))throw null!==E.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===me.getShaderPrecisionFormat&&(me.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),E.addEventListener("webglcontextlost",r,!1),E.addEventListener("webglcontextrestored",i,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var ge,be,_e,we,xe,Se,Te,Pe,Re,De,Ie,Le,Be,Ge,He,qe,Ve,We;n();var Ke=new function(e){function t(){if(null!==r&&r.isPresenting){var t=r.getEyeParameters("left"),i=t.renderWidth,o=t.renderHeight;h=e.getPixelRatio(),p=e.getSize(),e.setDrawingBufferSize(2*i,o,1)}else n.enabled&&e.setDrawingBufferSize(p.width,p.height,h)}var n=this,r=null,i=null;"undefined"!=typeof window&&"VRFrameData"in window&&(i=new window.VRFrameData);var a=new o,s=new o,u=new o,c=new Qe;c.bounds=new l(0,0,.5,1),c.layers.enable(1);var f=new Qe;f.bounds=new l(.5,0,.5,1),f.layers.enable(2);var d=new Je([c,f]);d.layers.enable(1),d.layers.enable(2);var p,h;"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",t,!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e)},this.getCamera=function(e){if(null===r)return e;r.depthNear=e.near,r.depthFar=e.far,r.getFrameData(i);var t=i.pose;null!==t.position?e.position.fromArray(t.position):e.position.set(0,0,0),null!==t.orientation&&e.quaternion.fromArray(t.orientation),e.updateMatrixWorld();var n=r.stageParameters;if(this.standing&&n&&(s.fromArray(n.sittingToStandingTransform),u.getInverse(s),e.matrixWorld.multiply(s),e.matrixWorldInverse.multiply(u)),!1===r.isPresenting)return e;c.near=e.near,f.near=e.near,c.far=e.far,f.far=e.far,d.matrixWorld.copy(e.matrixWorld),d.matrixWorldInverse.copy(e.matrixWorldInverse),c.matrixWorldInverse.fromArray(i.leftViewMatrix),f.matrixWorldInverse.fromArray(i.rightViewMatrix),this.standing&&n&&(c.matrixWorldInverse.multiply(u),f.matrixWorldInverse.multiply(u));var o=e.parent;null!==o&&(a.getInverse(o.matrixWorld),c.matrixWorldInverse.multiply(a),f.matrixWorldInverse.multiply(a)),c.matrixWorld.getInverse(c.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),c.projectionMatrix.fromArray(i.leftProjectionMatrix),f.projectionMatrix.fromArray(i.rightProjectionMatrix),d.projectionMatrix.copy(c.projectionMatrix);var l=r.getLayers();if(l.length){var p=l[0];null!==p.leftBounds&&4===p.leftBounds.length&&c.bounds.fromArray(p.leftBounds),null!==p.rightBounds&&4===p.rightBounds.length&&f.bounds.fromArray(p.rightBounds)}return d},this.getStandingMatrix=function(){return s},this.submitFrame=function(){r&&r.isPresenting&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",t)}}(D);this.vr=Ke;var $e=new oe(D,Pe,be.maxTextureSize);this.shadowMap=$e,this.getContext=function(){return me},this.getContextAttributes=function(){return me.getContextAttributes()},this.forceContextLoss=function(){var e=ge.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=ge.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(e){void 0!==e&&(Q=e,this.setSize($,X,!1))},this.getSize=function(){return{width:$,height:X}},this.setSize=function(e,t,n){var r=Ke.getDevice();r&&r.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):($=e,X=t,E.width=e*Q,E.height=t*Q,!1!==n&&(E.style.width=e+"px",E.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:$*Q,height:X*Q}},this.setDrawingBufferSize=function(e,t,n){$=e,X=t,Q=n,E.width=e*n,E.height=t*n,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){J.set(e,X-t-r,n,r),_e.viewport(G.copy(J).multiplyScalar(Q))},this.setScissor=function(e,t,n,r){ee.set(e,X-t-r,n,r),_e.scissor(H.copy(ee).multiplyScalar(Q))},this.setScissorTest=function(e){_e.setScissorTest(te=e)},this.getClearColor=function(){return Le.getClearColor()},this.setClearColor=function(){Le.setClearColor.apply(Le,arguments)},this.getClearAlpha=function(){return Le.getClearAlpha()},this.setClearAlpha=function(){Le.setClearAlpha.apply(Le,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=me.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=me.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=me.STENCIL_BUFFER_BIT),me.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.dispose=function(){E.removeEventListener("webglcontextlost",r,!1),E.removeEventListener("webglcontextrestored",i,!1),Ie.dispose(),Ke.dispose()},this.renderBufferImmediate=function(e,t,n){_e.initAttributes();var r=we.get(e);e.hasPositions&&!r.position&&(r.position=me.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=me.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=me.createBuffer()),e.hasColors&&!r.color&&(r.color=me.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(me.bindBuffer(me.ARRAY_BUFFER,r.position),me.bufferData(me.ARRAY_BUFFER,e.positionArray,me.DYNAMIC_DRAW),_e.enableAttribute(i.position),me.vertexAttribPointer(i.position,3,me.FLOAT,!1,0,0)),e.hasNormals){if(me.bindBuffer(me.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,u=(s[o+0]+s[o+3]+s[o+6])/3,c=(s[o+1]+s[o+4]+s[o+7])/3,l=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=u,s[o+1]=c,s[o+2]=l,s[o+3]=u,s[o+4]=c,s[o+5]=l,s[o+6]=u,s[o+7]=c,s[o+8]=l}me.bufferData(me.ARRAY_BUFFER,e.normalArray,me.DYNAMIC_DRAW),_e.enableAttribute(i.normal),me.vertexAttribPointer(i.normal,3,me.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(me.bindBuffer(me.ARRAY_BUFFER,r.uv),me.bufferData(me.ARRAY_BUFFER,e.uvArray,me.DYNAMIC_DRAW),_e.enableAttribute(i.uv),me.vertexAttribPointer(i.uv,2,me.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==to&&(me.bindBuffer(me.ARRAY_BUFFER,r.color),me.bufferData(me.ARRAY_BUFFER,e.colorArray,me.DYNAMIC_DRAW),_e.enableAttribute(i.color),me.vertexAttribPointer(i.color,3,me.FLOAT,!1,0,0)),_e.disableUnusedAttributes(),me.drawArrays(me.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,n,r,i,o,a){_e.setMaterial(i);var s=g(e,n,i,o),u=r.id+"_"+s.id+"_"+(!0===i.wireframe),c=!1;u!==F&&(F=u,c=!0),o.morphTargetInfluences&&(Be.update(o,r,i,s),c=!0);var l=r.index,f=r.attributes.position,d=1;!0===i.wireframe&&(l=Te.getWireframeAttribute(r),d=2);var p,h=Ge;null!==l&&(p=Se.get(l),(h=He).setIndex(p)),c&&(!function(e,t,n,r){if(n&&n.isInstancedBufferGeometry&&null===ge.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===r&&(r=0),_e.initAttributes();var i=n.attributes,o=t.getAttributes(),a=e.defaultAttributeValues;for(var s in o){var u=o[s];if(u>=0){var c=i[s];if(void 0!==c){var l=c.normalized,f=c.itemSize,d=Se.get(c);if(void 0===d)continue;var p=d.buffer,h=d.type,m=d.bytesPerElement;if(c.isInterleavedBufferAttribute){var v=c.data,g=v.stride,b=c.offset;v&&v.isInstancedInterleavedBuffer?(_e.enableAttributeAndDivisor(u,v.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=v.meshPerAttribute*v.count)):_e.enableAttribute(u),me.bindBuffer(me.ARRAY_BUFFER,p),me.vertexAttribPointer(u,f,h,l,g*m,(r*g+b)*m)}else c.isInstancedBufferAttribute?(_e.enableAttributeAndDivisor(u,c.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=c.meshPerAttribute*c.count)):_e.enableAttribute(u),me.bindBuffer(me.ARRAY_BUFFER,p),me.vertexAttribPointer(u,f,h,l,0,r*f*m)}else if(void 0!==a){var y=a[s];if(void 0!==y)switch(y.length){case 2:me.vertexAttrib2fv(u,y);break;case 3:me.vertexAttrib3fv(u,y);break;case 4:me.vertexAttrib4fv(u,y);break;default:me.vertexAttrib1fv(u,y)}}}}_e.disableUnusedAttributes()}}(i,s,r),null!==l&&me.bindBuffer(me.ELEMENT_ARRAY_BUFFER,p.buffer));var m=0;null!==l?m=l.count:void 0!==f&&(m=f.count);var v=r.drawRange.start*d,b=r.drawRange.count*d,y=null!==a?a.start*d:0,_=null!==a?a.count*d:1/0,E=Math.max(v,y),w=Math.min(m,v+b,y+_)-1,x=Math.max(0,w-E+1);if(0!==x){if(o.isMesh)if(!0===i.wireframe)_e.setLineWidth(i.wireframeLinewidth*t()),h.setMode(me.LINES);else switch(o.drawMode){case qa:h.setMode(me.TRIANGLES);break;case Va:h.setMode(me.TRIANGLE_STRIP);break;case Wa:h.setMode(me.TRIANGLE_FAN)}else if(o.isLine){var S=i.linewidth;void 0===S&&(S=1),_e.setLineWidth(S*t()),o.isLineSegments?h.setMode(me.LINES):o.isLineLoop?h.setMode(me.LINE_LOOP):h.setMode(me.LINE_STRIP)}else o.isPoints&&h.setMode(me.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&h.renderInstances(r,E,x):h.render(E,x)}},this.compile=function(e,t){P.length=0,A.length=0,e.traverse(function(e){e.isLight&&(P.push(e),e.castShadow&&A.push(e))}),Re.setup(P,A,t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)v(t.material[n],e.fog,t);else v(t.material,e.fog,t)})};var Ye=!1,tt=null;this.animate=function(e){tt=e,function(){if(!Ye){var e=Ke.getDevice();e&&e.isPresenting?e.requestAnimationFrame(f):window.requestAnimationFrame(f),Ye=!0}}()},this.render=function(e,t,n,r){if(t&&t.isCamera){if(!I){F="",B=-1,U=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Ke.enabled&&(t=Ke.getCamera(t)),le.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ne.setFromMatrix(le),P.length=0,A.length=0,k.length=0,R.length=0,ce=this.localClippingEnabled,ue=se.init(this.clippingPlanes,ce,t),(N=Ie.get(e,t)).init(),d(e,t,D.sortObjects),!0===D.sortObjects&&N.sort(),ue&&se.beginShadows(),$e.render(A,e,t),Re.setup(P,A,t),ue&&se.endShadows(),he.frame++,he.calls=0,he.vertices=0,he.faces=0,he.points=0,void 0===n&&(n=null),this.setRenderTarget(n),Le.render(N,e,t,r);var i=N.opaque,o=N.transparent;if(e.overrideMaterial){var a=e.overrideMaterial;i.length&&h(i,e,t,a),o.length&&h(o,e,t,a)}else i.length&&h(i,e,t),o.length&&h(o,e,t);Ve.render(k,e,t),qe.render(R,e,t,G),n&&xe.updateRenderTargetMipmap(n),_e.buffers.depth.setTest(!0),_e.buffers.depth.setMask(!0),_e.buffers.color.setMask(!0),_e.setPolygonOffset(!1),Ke.enabled&&Ke.submitFrame()}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(e,t){_e.setCullFace(e),_e.setFlipSided(t===Vi)},this.allocTextureUnit=function(){var e=V;return e>=be.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+be.maxTextures),V+=1,e},this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),xe.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),xe.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?xe.setTextureCube(t,n):xe.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return j},this.setRenderTarget=function(e){j=e,e&&void 0===we.get(e).__webglFramebuffer&&xe.setupRenderTarget(e);var t=null,n=!1;if(e){var r=we.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,G.copy(e.viewport),H.copy(e.scissor),q=e.scissorTest}else G.copy(J).multiplyScalar(Q),H.copy(ee).multiplyScalar(Q),q=te;if(L!==t&&(me.bindFramebuffer(me.FRAMEBUFFER,t),L=t),_e.viewport(G),_e.scissor(H),_e.setScissorTest(q),n){var i=we.get(e.texture);me.framebufferTexture2D(me.FRAMEBUFFER,me.COLOR_ATTACHMENT0,me.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(e&&e.isWebGLRenderTarget){var a=we.get(e).__webglFramebuffer;if(a){var s=!1;a!==L&&(me.bindFramebuffer(me.FRAMEBUFFER,a),s=!0);try{var u=e.texture,c=u.format,l=u.type;if(c!==_a&&We.convert(c)!==me.getParameter(me.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===aa||We.convert(l)===me.getParameter(me.IMPLEMENTATION_COLOR_READ_TYPE)||l===da&&(ge.get("OES_texture_float")||ge.get("WEBGL_color_buffer_float"))||l===pa&&ge.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");me.checkFramebufferStatus(me.FRAMEBUFFER)===me.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&me.readPixels(t,n,r,i,We.convert(c),We.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&me.bindFramebuffer(me.FRAMEBUFFER,L)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function nt(e,t){this.name="",this.color=new K(e),this.density=void 0!==t?t:25e-5}function rt(e,t,n){this.name="",this.color=new K(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function it(){ce.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ot(e,t,n,r,i){ce.call(this),this.lensFlares=[],this.positionScreen=new s,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,i)}function at(e){Q.call(this),this.type="SpriteMaterial",this.color=new K(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function st(e){ce.call(this),this.type="Sprite",this.material=void 0!==e?e:new at}function ut(){ce.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ct(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new o)}}function lt(){ce.call(this),this.type="Bone"}function ft(e,t){je.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o,this.bindMatrixInverse=new o;var n=new ct(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function dt(e){Q.call(this),this.type="LineBasicMaterial",this.color=new K(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function pt(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new ht(e,t);ce.call(this),this.type="Line",this.geometry=void 0!==e?e:new Me,this.material=void 0!==t?t:new dt({color:16777215*Math.random()})}function ht(e,t){pt.call(this,e,t),this.type="LineSegments"}function mt(e,t){pt.call(this,e,t),this.type="LineLoop"}function vt(e){Q.call(this),this.type="PointsMaterial",this.color=new K(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function gt(e,t){ce.call(this),this.type="Points",this.geometry=void 0!==e?e:new Me,this.material=void 0!==t?t:new vt({color:16777215*Math.random()})}function bt(){ce.call(this),this.type="Group"}function yt(e,t,n,r,i,o,a,s,u){function l(){var e=f.image;e.readyState>=e.HAVE_CURRENT_DATA&&(f.needsUpdate=!0),requestAnimationFrame(l)}c.call(this,e,t,n,r,i,o,a,s,u),this.generateMipmaps=!1;var f=this;requestAnimationFrame(l)}function _t(e,t,n,r,i,o,a,s,u,l,f,d){c.call(this,null,o,a,s,u,l,r,i,f,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Et(e,t,n,r,i,o,a,s,u,l){if((l=void 0!==l?l:Sa)!==Sa&&l!==Oa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===Sa&&(n=ca),void 0===n&&l===Oa&&(n=ga),c.call(this,null,r,i,o,a,s,l,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:ea,this.minFilter=void 0!==s?s:ea,this.flipY=!1,this.generateMipmaps=!1}function wt(e){Me.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,u,c,l,f,d=[],p=[0,0],h={},m=["a","b","c"];if(e&&e.isGeometry){var v=e.faces;for(t=0,r=v.length;t<r;t++){var g=v[t];for(n=0;n<3;n++)u=g[m[n]],c=g[m[(n+1)%3]],p[0]=Math.min(u,c),p[1]=Math.max(u,c),void 0===h[l=p[0]+","+p[1]]&&(h[l]={index1:p[0],index2:p[1]})}for(l in h)a=h[l],f=e.vertices[a.index1],d.push(f.x,f.y,f.z),f=e.vertices[a.index2],d.push(f.x,f.y,f.z)}else if(e&&e.isBufferGeometry){var b,y,_,E,w,x,S;if(f=new s,null!==e.index){for(b=e.attributes.position,y=e.index,0===(_=e.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),i=0,o=_.length;i<o;++i)for(t=w=(E=_[i]).start,r=w+E.count;t<r;t+=3)for(n=0;n<3;n++)u=y.getX(t+n),c=y.getX(t+(n+1)%3),p[0]=Math.min(u,c),p[1]=Math.max(u,c),void 0===h[l=p[0]+","+p[1]]&&(h[l]={index1:p[0],index2:p[1]});for(l in h)a=h[l],f.fromBufferAttribute(b,a.index1),d.push(f.x,f.y,f.z),f.fromBufferAttribute(b,a.index2),d.push(f.x,f.y,f.z)}else for(t=0,r=(b=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)x=3*t+n,f.fromBufferAttribute(b,x),d.push(f.x,f.y,f.z),S=3*t+(n+1)%3,f.fromBufferAttribute(b,S),d.push(f.x,f.y,f.z)}this.addAttribute("position",new we(d,3))}function xt(e,t,n){pe.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new St(e,t,n)),this.mergeVertices()}function St(e,t,n){Me.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],u=[],c=[],l=new s,f=new s,d=new s,p=new s,h=new s,m=t+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=t;i++){var g=i/t;f=e(g,v,f),a.push(f.x,f.y,f.z),g-1e-5>=0?(d=e(g-1e-5,v,d),p.subVectors(f,d)):(d=e(g+1e-5,v,d),p.subVectors(d,f)),v-1e-5>=0?(d=e(g,v-1e-5,d),h.subVectors(f,d)):(d=e(g,v+1e-5,d),h.subVectors(d,f)),l.crossVectors(p,h).normalize(),u.push(l.x,l.y,l.z),c.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var b=r*m+i,y=r*m+i+1,_=(r+1)*m+i+1,E=(r+1)*m+i;o.push(b,y,E),o.push(y,_,E)}this.setIndex(o),this.addAttribute("position",new we(a,3)),this.addAttribute("normal",new we(u,3)),this.addAttribute("uv",new we(c,2))}function Ot(e,t,n,r){pe.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Mt(e,t,n,r)),this.mergeVertices()}function Mt(e,t,n,r){function o(e){l.push(e.x,e.y,e.z)}function a(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function u(e,t,n,r){r<0&&1===e.x&&(f[t]=e.x-1),0===n.x&&0===n.z&&(f[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}Me.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var l=[],f=[];!function(e){for(var n=new s,r=new s,i=new s,u=0;u<t.length;u+=3)a(t[u+0],n),a(t[u+1],r),a(t[u+2],i),function(e,t,n,r){var i,a,s=Math.pow(2,r),u=[];for(i=0;i<=s;i++){u[i]=[];var c=e.clone().lerp(n,i/s),l=t.clone().lerp(n,i/s),f=s-i;for(a=0;a<=f;a++)u[i][a]=0===a&&i===s?c:c.clone().lerp(l,a/f)}for(i=0;i<s;i++)for(a=0;a<2*(s-i)-1;a++){var d=Math.floor(a/2);a%2==0?(o(u[i][d+1]),o(u[i+1][d]),o(u[i][d])):(o(u[i][d+1]),o(u[i+1][d+1]),o(u[i+1][d]))}}(n,r,i,e)}(r=r||0),function(e){for(var t=new s,n=0;n<l.length;n+=3)t.x=l[n+0],t.y=l[n+1],t.z=l[n+2],t.normalize().multiplyScalar(e),l[n+0]=t.x,l[n+1]=t.y,l[n+2]=t.z}(n),function(){for(var e=new s,t=0;t<l.length;t+=3){e.x=l[t+0],e.y=l[t+1],e.z=l[t+2];var n=c(e)/2/Math.PI+.5,r=function(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(e)/Math.PI+.5;f.push(n,1-r)}!function(){for(var e=new s,t=new s,n=new s,r=new s,o=new i,a=new i,d=new i,p=0,h=0;p<l.length;p+=9,h+=6){e.set(l[p+0],l[p+1],l[p+2]),t.set(l[p+3],l[p+4],l[p+5]),n.set(l[p+6],l[p+7],l[p+8]),o.set(f[h+0],f[h+1]),a.set(f[h+2],f[h+3]),d.set(f[h+4],f[h+5]),r.copy(e).add(t).add(n).divideScalar(3);var m=c(r);u(o,h+0,e,m),u(a,h+2,t,m),u(d,h+4,n,m)}}(),function(){for(var e=0;e<f.length;e+=6){var t=f[e+0],n=f[e+2],r=f[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(f[e+0]+=1),n<.2&&(f[e+2]+=1),r<.2&&(f[e+4]+=1))}}()}(),this.addAttribute("position",new we(l,3)),this.addAttribute("normal",new we(l.slice(),3)),this.addAttribute("uv",new we(f,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Tt(e,t){pe.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ct(e,t)),this.mergeVertices()}function Ct(e,t){Mt.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Pt(e,t){pe.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new At(e,t)),this.mergeVertices()}function At(e,t){Mt.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Nt(e,t){pe.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new kt(e,t)),this.mergeVertices()}function kt(e,t){var n=(1+Math.sqrt(5))/2;Mt.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Rt(e,t){pe.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Dt(e,t)),this.mergeVertices()}function Dt(e,t){var n=(1+Math.sqrt(5))/2,r=1/n;Mt.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function It(e,t,n,r,i,o){pe.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new jt(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function jt(e,t,n,r,o){function a(i){h=e.getPointAt(i/t,h);var o=u.normals[i],a=u.binormals[i];for(l=0;l<=r;l++){var s=l/r*Math.PI*2,c=Math.sin(s),p=-Math.cos(s);d.x=p*o.x+c*a.x,d.y=p*o.y+c*a.y,d.z=p*o.z+c*a.z,d.normalize(),v.push(d.x,d.y,d.z),f.x=h.x+n*d.x,f.y=h.y+n*d.y,f.z=h.z+n*d.z,m.push(f.x,f.y,f.z)}}Me.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:o},t=t||64,n=n||1,r=r||8,o=o||!1;var u=e.computeFrenetFrames(t,o);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;var c,l,f=new s,d=new s,p=new i,h=new s,m=[],v=[],g=[],b=[];!function(){for(c=0;c<t;c++)a(c);a(!1===o?t:0),function(){for(c=0;c<=t;c++)for(l=0;l<=r;l++)p.x=c/t,p.y=l/r,g.push(p.x,p.y)}(),function(){for(l=1;l<=t;l++)for(c=1;c<=r;c++){var e=(r+1)*(l-1)+(c-1),n=(r+1)*l+(c-1),i=(r+1)*l+c,o=(r+1)*(l-1)+c;b.push(e,n,o),b.push(n,i,o)}}()}(),this.setIndex(b),this.addAttribute("position",new we(m,3)),this.addAttribute("normal",new we(v,3)),this.addAttribute("uv",new we(g,2))}function Lt(e,t,n,r,i,o,a){pe.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Bt(e,t,n,r,i,o)),this.mergeVertices()}function Bt(e,t,n,r,i,o){function a(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}Me.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var u,c,l=[],f=[],d=[],p=[],h=new s,m=new s,v=new s,g=new s,b=new s,y=new s,_=new s;for(u=0;u<=n;++u){var E=u/n*i*Math.PI*2;for(a(E,i,o,e,v),a(E+.01,i,o,e,g),y.subVectors(g,v),_.addVectors(g,v),b.crossVectors(y,_),_.crossVectors(b,y),b.normalize(),_.normalize(),c=0;c<=r;++c){var w=c/r*Math.PI*2,x=-t*Math.cos(w),S=t*Math.sin(w);h.x=v.x+(x*_.x+S*b.x),h.y=v.y+(x*_.y+S*b.y),h.z=v.z+(x*_.z+S*b.z),f.push(h.x,h.y,h.z),m.subVectors(h,v).normalize(),d.push(m.x,m.y,m.z),p.push(u/n),p.push(c/r)}}for(c=1;c<=n;c++)for(u=1;u<=r;u++){var O=(r+1)*(c-1)+(u-1),M=(r+1)*c+(u-1),T=(r+1)*c+u,C=(r+1)*(c-1)+u;l.push(O,M,C),l.push(M,T,C)}this.setIndex(l),this.addAttribute("position",new we(f,3)),this.addAttribute("normal",new we(d,3)),this.addAttribute("uv",new we(p,2))}function Ft(e,t,n,r,i){pe.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Ut(e,t,n,r,i)),this.mergeVertices()}function Ut(e,t,n,r,i){Me.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,u=[],c=[],l=[],f=[],d=new s,p=new s,h=new s;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var m=a/r*i,v=o/n*Math.PI*2;p.x=(e+t*Math.cos(v))*Math.cos(m),p.y=(e+t*Math.cos(v))*Math.sin(m),p.z=t*Math.sin(v),c.push(p.x,p.y,p.z),d.x=e*Math.cos(m),d.y=e*Math.sin(m),h.subVectors(p,d).normalize(),l.push(h.x,h.y,h.z),f.push(a/r),f.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var g=(r+1)*o+a-1,b=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,_=(r+1)*o+a;u.push(g,b,_),u.push(b,y,_)}this.setIndex(u),this.addAttribute("position",new we(c,3)),this.addAttribute("normal",new we(l,3)),this.addAttribute("uv",new we(f,2))}function zt(e,t){pe.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Gt(e,t)),this.mergeVertices()}function Gt(e,t){void 0!==e&&(Me.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function Ht(e,t){pe.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new qt(e,t)),this.mergeVertices()}function qt(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new pe;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Gt.call(this,r,t),this.type="TextBufferGeometry"}function Vt(e,t,n,r,i,o,a){pe.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Wt(e,t,n,r,i,o,a)),this.mergeVertices()}function Wt(e,t,n,r,i,o,a){Me.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var u,c,l=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),f=0,d=[],p=new s,h=new s,m=[],v=[],g=[],b=[];for(c=0;c<=n;c++){var y=[],_=c/n;for(u=0;u<=t;u++){var E=u/t;p.x=-e*Math.cos(r+E*i)*Math.sin(o+_*a),p.y=e*Math.cos(o+_*a),p.z=e*Math.sin(r+E*i)*Math.sin(o+_*a),v.push(p.x,p.y,p.z),h.set(p.x,p.y,p.z).normalize(),g.push(h.x,h.y,h.z),b.push(E,1-_),y.push(f++)}d.push(y)}for(c=0;c<n;c++)for(u=0;u<t;u++){var w=d[c][u+1],x=d[c][u],S=d[c+1][u],O=d[c+1][u+1];(0!==c||o>0)&&m.push(w,x,O),(c!==n-1||l<Math.PI)&&m.push(x,S,O)}this.setIndex(m),this.addAttribute("position",new we(v,3)),this.addAttribute("normal",new we(g,3)),this.addAttribute("uv",new we(b,2))}function Kt(e,t,n,r,i,o){pe.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new $t(e,t,n,r,i,o)),this.mergeVertices()}function $t(e,t,n,r,o,a){Me.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:a},e=e||.5,t=t||1,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var u,c,l,f=[],d=[],p=[],h=[],m=e,v=(t-e)/(r=void 0!==r?Math.max(1,r):1),g=new s,b=new i;for(c=0;c<=r;c++){for(l=0;l<=n;l++)u=o+l/n*a,g.x=m*Math.cos(u),g.y=m*Math.sin(u),d.push(g.x,g.y,g.z),p.push(0,0,1),b.x=(g.x/t+1)/2,b.y=(g.y/t+1)/2,h.push(b.x,b.y);m+=v}for(c=0;c<r;c++){var y=c*(n+1);for(l=0;l<n;l++){var _=u=l+y,E=u+n+1,w=u+n+2,x=u+1;f.push(_,E,x),f.push(E,w,x)}}this.setIndex(f),this.addAttribute("position",new we(d,3)),this.addAttribute("normal",new we(p,3)),this.addAttribute("uv",new we(h,2))}function Yt(e,t,n,r){pe.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Xt(e,t,n,r)),this.mergeVertices()}function Xt(e,t,n,r){Me.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=rs.clamp(r,0,2*Math.PI);var o,a,u,c=[],l=[],f=[],d=1/t,p=new s,h=new i;for(a=0;a<=t;a++){var m=n+a*d*r,v=Math.sin(m),g=Math.cos(m);for(u=0;u<=e.length-1;u++)p.x=e[u].x*v,p.y=e[u].y,p.z=e[u].x*g,l.push(p.x,p.y,p.z),h.x=a/t,h.y=u/(e.length-1),f.push(h.x,h.y)}for(a=0;a<t;a++)for(u=0;u<e.length-1;u++){var b=o=u+a*e.length,y=o+e.length,_=o+e.length+1,E=o+1;c.push(b,y,E),c.push(y,_,E)}if(this.setIndex(c),this.addAttribute("position",new we(l,3)),this.addAttribute("uv",new we(f,2)),this.computeVertexNormals(),r===2*Math.PI){var w=this.attributes.normal.array,x=new s,S=new s,O=new s;for(o=t*e.length*3,a=0,u=0;a<e.length;a++,u+=3)x.x=w[u+0],x.y=w[u+1],x.z=w[u+2],S.x=w[o+u+0],S.y=w[o+u+1],S.z=w[o+u+2],O.addVectors(x,S).normalize(),w[u+0]=w[o+u+0]=O.x,w[u+1]=w[o+u+1]=O.y,w[u+2]=w[o+u+2]=O.z}}function Zt(e,t){pe.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Qt(e,t)),this.mergeVertices()}function Qt(e,t){function n(e){var n,s,c,l=i.length/3,f=e.extractPoints(t),d=f.shape,p=f.holes;if(!1===ws.isClockWise(d))for(d=d.reverse(),n=0,s=p.length;n<s;n++)c=p[n],!0===ws.isClockWise(c)&&(p[n]=c.reverse());var h=ws.triangulateShape(d,p);for(n=0,s=p.length;n<s;n++)c=p[n],d=d.concat(c);for(n=0,s=d.length;n<s;n++){var m=d[n];i.push(m.x,m.y,0),o.push(0,0,1),a.push(m.x,m.y)}for(n=0,s=h.length;n<s;n++){var v=h[n],g=v[0]+l,b=v[1]+l,y=v[2]+l;r.push(g,b,y),u+=3}}Me.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],i=[],o=[],a=[],s=0,u=0;if(!1===Array.isArray(e))n(e);else for(var c=0;c<e.length;c++)n(e[c]),this.addGroup(s,u,c),s+=u,u=0;this.setIndex(r),this.addAttribute("position",new we(i,3)),this.addAttribute("normal",new we(o,3)),this.addAttribute("uv",new we(a,2))}function Jt(e,t){Me.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(rs.DEG2RAD*t),u=[0,0],c={},l=["a","b","c"];e.isBufferGeometry?(o=new pe).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var f=o.vertices,d=o.faces,p=0,h=d.length;p<h;p++)for(var m=d[p],v=0;v<3;v++)n=m[l[v]],r=m[l[(v+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),void 0===c[i=u[0]+","+u[1]]?c[i]={index1:u[0],index2:u[1],face1:p,face2:void 0}:c[i].face2=p;for(i in c){var g=c[i];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var b=f[g.index1];a.push(b.x,b.y,b.z),b=f[g.index2],a.push(b.x,b.y,b.z)}}this.addAttribute("position",new we(a,3))}function en(e,t,n,r,i,o,a,s){pe.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new tn(e,t,n,r,i,o,a,s)),this.mergeVertices()}function tn(e,t,n,r,o,a,u,c){function l(n){var o,a,l,g=new i,_=new s,E=0,w=!0===n?e:t,x=!0===n?1:-1;for(a=v,o=1;o<=r;o++)p.push(0,b*x,0),h.push(0,x,0),m.push(.5,.5),v++;for(l=v,o=0;o<=r;o++){var S=o/r*c+u,O=Math.cos(S),M=Math.sin(S);_.x=w*M,_.y=b*x,_.z=w*O,p.push(_.x,_.y,_.z),h.push(0,x,0),g.x=.5*O+.5,g.y=.5*M*x+.5,m.push(g.x,g.y),v++}for(o=0;o<r;o++){var T=a+o,C=l+o;!0===n?d.push(C,C+1,T):d.push(C+1,C,T),E+=3}f.addGroup(y,E,!0===n?1:2),y+=E}Me.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:o,openEnded:a,thetaStart:u,thetaLength:c};var f=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,o=Math.floor(o)||1,a=void 0!==a&&a,u=void 0!==u?u:0,c=void 0!==c?c:2*Math.PI;var d=[],p=[],h=[],m=[],v=0,g=[],b=n/2,y=0;!function(){var i,a,l=new s,_=new s,E=0,w=(t-e)/n;for(a=0;a<=o;a++){var x=[],S=a/o,O=S*(t-e)+e;for(i=0;i<=r;i++){var M=i/r,T=M*c+u,C=Math.sin(T),P=Math.cos(T);_.x=O*C,_.y=-S*n+b,_.z=O*P,p.push(_.x,_.y,_.z),l.set(C,w,P).normalize(),h.push(l.x,l.y,l.z),m.push(M,1-S),x.push(v++)}g.push(x)}for(i=0;i<r;i++)for(a=0;a<o;a++){var A=g[a][i],N=g[a+1][i],k=g[a+1][i+1],R=g[a][i+1];d.push(A,N,R),d.push(N,k,R),E+=6}f.addGroup(y,E,0),y+=E}(),!1===a&&(e>0&&l(!0),t>0&&l(!1)),this.setIndex(d),this.addAttribute("position",new we(p,3)),this.addAttribute("normal",new we(h,3)),this.addAttribute("uv",new we(m,2))}function nn(e,t,n,r,i,o,a){en.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function rn(e,t,n,r,i,o,a){tn.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function on(e,t,n,r){pe.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new an(e,t,n,r)),this.mergeVertices()}function an(e,t,n,r){Me.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var o,a,u=[],c=[],l=[],f=[],d=new s,p=new i;for(c.push(0,0,0),l.push(0,0,1),f.push(.5,.5),a=0,o=3;a<=t;a++,o+=3){var h=n+a/t*r;d.x=e*Math.cos(h),d.y=e*Math.sin(h),c.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(c[o]/e+1)/2,p.y=(c[o+1]/e+1)/2,f.push(p.x,p.y)}for(o=1;o<=t;o++)u.push(o,o+1,0);this.setIndex(u),this.addAttribute("position",new we(c,3)),this.addAttribute("normal",new we(l,3)),this.addAttribute("uv",new we(f,2))}function sn(e){Q.call(this),this.type="ShadowMaterial",this.color=new K(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(e)}function un(e){ke.call(this,e),this.type="RawShaderMaterial"}function cn(e){Q.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new K(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new K(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ln(e){cn.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function fn(e){Q.call(this),this.type="MeshPhongMaterial",this.color=new K(16777215),this.specular=new K(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new K(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Io,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function dn(e){fn.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function pn(e){Q.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function hn(e){Q.call(this),this.type="MeshLambertMaterial",this.color=new K(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new K(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Io,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function mn(e){dt.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function vn(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){s=e}}function gn(e){this.manager=void 0!==e?e:Ms}function bn(e){this.manager=void 0!==e?e:Ms,this._parser=null}function yn(e){this.manager=void 0!==e?e:Ms,this._parser=null}function _n(e){this.manager=void 0!==e?e:Ms}function En(e){this.manager=void 0!==e?e:Ms}function wn(e){this.manager=void 0!==e?e:Ms}function xn(e,t){ce.call(this),this.type="Light",this.color=new K(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Sn(e,t,n){xn.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ce.DefaultUp),this.updateMatrix(),this.groundColor=new K(t)}function On(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new o}function Mn(){On.call(this,new Qe(50,1,.5,500))}function Tn(e,t,n,r,i,o){xn.call(this,e,t),this.type="SpotLight",this.position.copy(ce.DefaultUp),this.updateMatrix(),this.target=new ce,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Mn}function Cn(e,t,n,r){xn.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new On(new Qe(90,1,.5,500))}function Pn(){On.call(this,new fe(-5,5,5,-5,.5,500))}function An(e,t){xn.call(this,e,t),this.type="DirectionalLight",this.position.copy(ce.DefaultUp),this.updateMatrix(),this.target=new ce,this.shadow=new Pn}function Nn(e,t){xn.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function kn(e,t,n,r){xn.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Rn(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Dn(e,t,n,r){Rn.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function In(e,t,n,r){Rn.call(this,e,t,n,r)}function jn(e,t,n,r){Rn.call(this,e,t,n,r)}function Ln(e,t,n,r){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=Cs.convertArray(t,this.TimeBufferType),this.values=Cs.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function Bn(e,t,n,r){Ln.call(this,e,t,n,r)}function Fn(e,t,n,r){Rn.call(this,e,t,n,r)}function Un(e,t,n,r){Ln.call(this,e,t,n,r)}function zn(e,t,n,r){Ln.call(this,e,t,n,r)}function Gn(e,t,n,r){Ln.call(this,e,t,n,r)}function Hn(e,t,n){Ln.call(this,e,t,n)}function qn(e,t,n,r){Ln.call(this,e,t,n,r)}function Vn(e,t,n,r){Ln.apply(this,e,t,n,r)}function Wn(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=rs.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Kn(e){this.manager=void 0!==e?e:Ms,this.textures={}}function $n(e){this.manager=void 0!==e?e:Ms}function Yn(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Xn(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Ms,this.withCredentials=!1}function Zn(e){this.manager=void 0!==e?e:Ms,this.texturePath=""}function Qn(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Jn(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function er(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function tr(){this.type="Curve",this.arcLengthDivisions=200}function nr(e,t){tr.call(this),this.type="LineCurve",this.v1=e||new i,this.v2=t||new i}function rr(){tr.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ir(e,t,n,r,i,o,a,s){tr.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function or(e){tr.call(this),this.type="SplineCurve",this.points=e||[]}function ar(e,t,n,r){tr.call(this),this.type="CubicBezierCurve",this.v0=e||new i,this.v1=t||new i,this.v2=n||new i,this.v3=r||new i}function sr(e,t,n){tr.call(this),this.type="QuadraticBezierCurve",this.v0=e||new i,this.v1=t||new i,this.v2=n||new i}function ur(e){rr.call(this),this.type="Path",this.currentPoint=new i,e&&this.setFromPoints(e)}function cr(e){ur.call(this,e),this.type="Shape",this.holes=[]}function lr(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function fr(e){this.type="Font",this.data=e}function dr(e){this.manager=void 0!==e?e:Ms}function pr(e){this.manager=void 0!==e?e:Ms}function hr(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Qe,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Qe,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function mr(e,t,n){ce.call(this),this.type="CubeCamera";var r=new Qe(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new s(1,0,0)),this.add(r);var i=new Qe(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new s(-1,0,0)),this.add(i);var o=new Qe(90,1,e,t);o.up.set(0,0,1),o.lookAt(new s(0,1,0)),this.add(o);var a=new Qe(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new s(0,-1,0)),this.add(a);var u=new Qe(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new s(0,0,1)),this.add(u);var c=new Qe(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new s(0,0,-1)),this.add(c);var l={format:ya,magFilter:ra,minFilter:ra};this.renderTarget=new d(n,n,l),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,s=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,u,n),n.texture.generateMipmaps=s,n.activeCubeFace=5,e.render(t,c,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function vr(){ce.call(this),this.type="AudioListener",this.context=js.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function gr(e){ce.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function br(e){gr.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function yr(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function _r(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Er(e,t,n){var r=n||wr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function wr(e,t,n){this.path=t,this.parsedPath=n||wr.parseTrackName(t),this.node=wr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function xr(){this.uuid=rs.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Sr(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:za,endingEnd:za},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ja,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Or(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Mr(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Tr(){Me.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Cr(e,t,n,r){this.uuid=rs.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Pr(e,t){this.uuid=rs.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Ar(e,t,n){Pr.call(this,e,t),this.meshPerAttribute=n||1}function Nr(e,t,n){he.call(this,e,t),this.meshPerAttribute=n||1}function kr(e,t,n,r){this.ray=new Re(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Rr(e,t){return e.distance-t.distance}function Dr(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)Dr(i[o],t,n,!0)}function Ir(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function jr(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Lr(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function Br(e){ce.call(this),this.material=e,this.render=function(){}}function Fr(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new Me,c=new we(2*a*3,3);u.addAttribute("position",c),ht.call(this,u,new dt({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Ur(e,t){ce.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Me,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new we(r,3));var u=new dt({fog:!1});this.cone=new ht(n,u),this.add(this.cone),this.update()}function zr(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,zr(e.children[n]));return t}function Gr(e){for(var t=zr(e),n=new Me,r=[],i=[],o=new K(0,0,1),a=new K(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new we(r,3)),n.addAttribute("color",new we(i,3));var c=new dt({vertexColors:ro,depthTest:!1,depthWrite:!1,transparent:!0});ht.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Hr(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Wt(t,4,2),i=new Ne({wireframe:!0,fog:!1});je.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function qr(e,t){ce.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new dt({fog:!1}),r=new Me;r.addAttribute("position",new he(new Float32Array(15),3)),this.line=new pt(r,n),this.add(this.line),this.update()}function Vr(e,t,n){ce.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new At(t);r.rotateY(.5*Math.PI),this.material=new Ne({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=ro);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new he(o,3)),this.add(new je(r,this.material)),this.update()}function Wr(e,t,n,r){e=e||10,t=t||10,n=new K(void 0!==n?n:4473924),r=new K(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],u=[],c=0,l=0,f=-a;c<=t;c++,f+=o){s.push(-a,0,f,a,0,f),s.push(f,0,-a,f,0,a);var d=c===i?n:r;d.toArray(u,l),l+=3,d.toArray(u,l),l+=3,d.toArray(u,l),l+=3,d.toArray(u,l),l+=3}var p=new Me;p.addAttribute("position",new we(s,3)),p.addAttribute("color",new we(u,3));var h=new dt({vertexColors:ro});ht.call(this,p,h)}function Kr(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new K(void 0!==i?i:4473924),o=new K(void 0!==o?o:8947848);var a,s,u,c,l,f,d,p=[],h=[];for(c=0;c<=t;c++)u=c/t*(2*Math.PI),a=Math.sin(u)*e,s=Math.cos(u)*e,p.push(0,0,0),p.push(a,0,s),d=1&c?i:o,h.push(d.r,d.g,d.b),h.push(d.r,d.g,d.b);for(c=0;c<=n;c++)for(d=1&c?i:o,f=e-e/n*c,l=0;l<r;l++)u=l/r*(2*Math.PI),a=Math.sin(u)*f,s=Math.cos(u)*f,p.push(a,0,s),h.push(d.r,d.g,d.b),u=(l+1)/r*(2*Math.PI),a=Math.sin(u)*f,s=Math.cos(u)*f,p.push(a,0,s),h.push(d.r,d.g,d.b);var m=new Me;m.addAttribute("position",new we(p,3)),m.addAttribute("color",new we(h,3));var v=new dt({vertexColors:ro});ht.call(this,m,v)}function $r(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new Me,c=new we(2*a*3,3);u.addAttribute("position",c),ht.call(this,u,new dt({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Yr(e,t,n){ce.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new Me;r.addAttribute("position",new we([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new dt({fog:!1});this.lightPlane=new pt(r,i),this.add(this.lightPlane),(r=new Me).addAttribute("position",new we([0,0,0,0,0,1],3)),this.targetLine=new pt(r,i),this.add(this.targetLine),this.update()}function Xr(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){o.push(0,0,0),a.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(o.length/3-1)}var r=new Me,i=new dt({color:16777215,vertexColors:no}),o=[],a=[],s={},u=new K(16755200),c=new K(16711680),l=new K(43775),f=new K(16777215),d=new K(3355443);t("n1","n2",u),t("n2","n4",u),t("n4","n3",u),t("n3","n1",u),t("f1","f2",u),t("f2","f4",u),t("f4","f3",u),t("f3","f1",u),t("n1","f1",u),t("n2","f2",u),t("n3","f3",u),t("n4","f4",u),t("p","n1",c),t("p","n2",c),t("p","n3",c),t("p","n4",c),t("u1","u2",l),t("u2","u3",l),t("u3","u1",l),t("c","t",f),t("p","c",d),t("cn1","cn2",d),t("cn3","cn4",d),t("cf1","cf2",d),t("cf3","cf4",d),r.addAttribute("position",new we(o,3)),r.addAttribute("color",new we(a,3)),ht.call(this,r,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function Zr(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Me;i.setIndex(new he(n,1)),i.addAttribute("position",new he(r,3)),ht.call(this,i,new dt({color:t})),this.matrixAutoUpdate=!1,this.update()}function Qr(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Me;i.setIndex(new he(r,1)),i.addAttribute("position",new we([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ht.call(this,i,new dt({color:n})),this.geometry.computeBoundingSphere()}function Jr(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new Me;i.addAttribute("position",new we([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),pt.call(this,i,new dt({color:r}));var o=new Me;o.addAttribute("position",new we([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new je(o,new Ne({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function ei(e,t,n,r,i,o){ce.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Ls&&((Ls=new Me).addAttribute("position",new we([0,0,0,0,1,0],3)),(Bs=new tn(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new pt(Ls,new dt({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new je(Bs,new Ne({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function ti(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Me;n.addAttribute("position",new we(t,3)),n.addAttribute("color",new we([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new dt({vertexColors:ro});ht.call(this,n,r)}function ni(){function e(e,o,a,s){t=e,n=a,r=-3*e+3*o-2*a-s,i=2*e-2*o+a+s}var t=0,n=0,r=0,i=0;return{initCatmullRom:function(t,n,r,i,o){e(n,r,o*(r-t),o*(i-n))},initNonuniformCatmullRom:function(t,n,r,i,o,a,s){var u=(n-t)/o-(r-t)/(o+a)+(r-n)/a,c=(r-n)/a-(i-n)/(a+s)+(i-r)/s;e(n,r,u*=a,c*=a)},calc:function(e){var o=e*e;return t+n*e+r*o+i*(o*e)}}}function ri(e,t,n,r){tr.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function ii(e,t,n,r){tr.call(this),this.type="CubicBezierCurve3",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s,this.v3=r||new s}function oi(e,t,n){tr.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s}function ai(e,t){tr.call(this),this.type="LineCurve3",this.v1=e||new s,this.v2=t||new s}function si(e,t,n,r,i,o){ir.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function ui(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new de(e,t,n,i,o,a)}function ci(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function li(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function fi(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new gt(e,t)}function di(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new st(e)}function pi(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new gt(e,t)}function hi(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new vt(e)}function mi(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new vt(e)}function vi(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new vt(e)}function gi(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new s(e,t,n)}function bi(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new he(e,t).setDynamic(!0)}function yi(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new me(e,t)}function _i(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ve(e,t)}function Ei(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ge(e,t)}function wi(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new be(e,t)}function xi(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ye(e,t)}function Si(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new _e(e,t)}function Oi(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ee(e,t)}function Mi(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new we(e,t)}function Ti(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new xe(e,t)}function Ci(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ri.call(this,e),this.type="catmullrom",this.closed=!0}function Pi(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ri.call(this,e),this.type="catmullrom"}function Ai(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ri.call(this,e),this.type="catmullrom"}function Ni(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new ti(e)}function ki(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Zr(e,t)}function Ri(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ht(new Jt(e.geometry),new dt({color:void 0!==t?t:16777215}))}function Di(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ht(new wt(e.geometry),new dt({color:void 0!==t?t:16777215}))}function Ii(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new gn(e)}function ji(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new yn(e)}function Li(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Bi(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"WebGLRenderTargetCube",function(){return d}),n.d(t,"WebGLRenderTarget",function(){return f}),n.d(t,"WebGLRenderer",function(){return tt}),n.d(t,"ShaderLib",function(){return vs}),n.d(t,"UniformsLib",function(){return ps}),n.d(t,"UniformsUtils",function(){return hs}),n.d(t,"ShaderChunk",function(){return ms}),n.d(t,"FogExp2",function(){return nt}),n.d(t,"Fog",function(){return rt}),n.d(t,"Scene",function(){return it}),n.d(t,"LensFlare",function(){return ot}),n.d(t,"Sprite",function(){return st}),n.d(t,"LOD",function(){return ut}),n.d(t,"SkinnedMesh",function(){return ft}),n.d(t,"Skeleton",function(){return ct}),n.d(t,"Bone",function(){return lt}),n.d(t,"Mesh",function(){return je}),n.d(t,"LineSegments",function(){return ht}),n.d(t,"LineLoop",function(){return mt}),n.d(t,"Line",function(){return pt}),n.d(t,"Points",function(){return gt}),n.d(t,"Group",function(){return bt}),n.d(t,"VideoTexture",function(){return yt}),n.d(t,"DataTexture",function(){return p}),n.d(t,"CompressedTexture",function(){return _t}),n.d(t,"CubeTexture",function(){return h}),n.d(t,"CanvasTexture",function(){return X}),n.d(t,"DepthTexture",function(){return Et}),n.d(t,"Texture",function(){return c}),n.d(t,"CompressedTextureLoader",function(){return bn}),n.d(t,"DataTextureLoader",function(){return yn}),n.d(t,"CubeTextureLoader",function(){return En}),n.d(t,"TextureLoader",function(){return wn}),n.d(t,"ObjectLoader",function(){return Zn}),n.d(t,"MaterialLoader",function(){return Kn}),n.d(t,"BufferGeometryLoader",function(){return $n}),n.d(t,"DefaultLoadingManager",function(){return Ms}),n.d(t,"LoadingManager",function(){return vn}),n.d(t,"JSONLoader",function(){return Xn}),n.d(t,"ImageLoader",function(){return _n}),n.d(t,"FontLoader",function(){return dr}),n.d(t,"FileLoader",function(){return gn}),n.d(t,"Loader",function(){return Yn}),n.d(t,"Cache",function(){return Os}),n.d(t,"AudioLoader",function(){return pr}),n.d(t,"SpotLightShadow",function(){return Mn}),n.d(t,"SpotLight",function(){return Tn}),n.d(t,"PointLight",function(){return Cn}),n.d(t,"RectAreaLight",function(){return kn}),n.d(t,"HemisphereLight",function(){return Sn}),n.d(t,"DirectionalLightShadow",function(){return Pn}),n.d(t,"DirectionalLight",function(){return An}),n.d(t,"AmbientLight",function(){return Nn}),n.d(t,"LightShadow",function(){return On}),n.d(t,"Light",function(){return xn}),n.d(t,"StereoCamera",function(){return hr}),n.d(t,"PerspectiveCamera",function(){return Qe}),n.d(t,"OrthographicCamera",function(){return fe}),n.d(t,"CubeCamera",function(){return mr}),n.d(t,"ArrayCamera",function(){return Je}),n.d(t,"Camera",function(){return le}),n.d(t,"AudioListener",function(){return vr}),n.d(t,"PositionalAudio",function(){return br}),n.d(t,"AudioContext",function(){return js}),n.d(t,"AudioAnalyser",function(){return yr}),n.d(t,"Audio",function(){return gr}),n.d(t,"VectorKeyframeTrack",function(){return Bn}),n.d(t,"StringKeyframeTrack",function(){return Gn}),n.d(t,"QuaternionKeyframeTrack",function(){return Un}),n.d(t,"NumberKeyframeTrack",function(){return zn}),n.d(t,"ColorKeyframeTrack",fu€€