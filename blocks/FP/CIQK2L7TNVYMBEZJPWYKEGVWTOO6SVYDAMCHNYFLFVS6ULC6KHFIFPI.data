
º²// U-Nion infrastructure ...

// format : .dot
// see also [*](https://graphviz.gitlab.io/_pages/pdf/dotguide.pdf)
// vim: nospell

digraph {
 PUBLIC [shape=box, style=dashed];

 // load balancing par zone (region geographique de l'utilisateur) 
 CDN -> loadb [taillabel = ".*"]

 PUBLIC -> CDN [label = ".media, .tv,\n.app, .fr, .world,\n .club, .shop,\n.fund, ..."]

 // 3+1 machines principales
 { UNION, OVH, WCO, INF [style=filled,color="#8080D0"] }
 loadb -> OVH [taillabel = ".media"]
 loadb -> INF [taillabel = ".tv"]
 loadb -> WCO [taillabel = ".tech"]

 // fully interconnected "IPLD clusters"
 INF -> OVH -> WCO -> INF
 INF -> WCO -> OVH -> INF

 PUBLIC -> UNION [taillabel = ".org"] // seulement pour l'admin et intranet

 // Attached Storage (cloud,ssd,hdd)
 I250G [label="250G",shape=box];
 W250G [label="250G",shape=box];
 O250G [label="250G",shape=box];
 U250G [label="250G (ssd)",shape=box ];
 U100T [label="NAS (hdd)",shape=box, style=filled,color="#7a7a7a"];

 // all data locally cached and replicated "CAS"
 INF -> I250G [arrowhead=none];
 WCO -> W250G [arrowhead=none];
 OVH -> O250G [arrowhead=none];
 UNION -> U250G,U100T // disque replicat WCO
 { rank=same; INF I250G }
 { rank=same; WCO W250G }
 { rank=same; OVH O250G }

 UNION -> PK -> WCO, OVH, INF [style=dashed color="#800180"]

 WCO -> UNION // WCO machine de dev, mirrored to Union (rsync) hors cluster
 UNION -> WCO [style=dashed]; 

 // assigned persons :
 Gilles [ shape=box; style=dotted];
 Michel [ shape=box; style=dotted];
 Greg [ shape=box; style=dotted];
 Indiana [ shape=box; style=dotted];

Gilles -> INF [style=dashed taillabel=".live"];
Michel -> UNION [style=dashed taillabel=".net"];
Greg -> WCO [style=dashed dir=none];
Indiana -> UNION [style=dashed dir=none];

 // Key Infrastructure
 Gilles, Michel -> PK [label="oob, vpn" color=red style=dotted];

 // { rank=same; loadb Michel Gilles }
 { rank=same; UNION PK INF }
 { rank=same; WCO U100T }
 { rank=same; Greg BK1 }


 // optional "cold" backup

 // strategy : 3 backup instantaneously restorables
 BK1 [label="BK1 (CD)" style=none color=none];
 BK2 [label="BK2 (cold storage / tape)" style=none color=none];
 U250G -> BK1 [style=dotted];
 U100T -> BK2 [style=dotted];

}
²