
Š€€€er,r.nameAsBuffer)};e.exports=function(e){return n(e,i)}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";var n=r(107)(r(1334)),i=r(1142);t=e.exports;var a=function(e){var t=e.Data,r=e.Links||[];return n.PBNode.encode(function(e){var t={};return e.Data&&e.Data.length>0?t.Data=e.Data:t.Data=null,e.Links&&e.Links.length>0?t.Links=e.Links.map((function(e){return{Hash:e.Hash.buffer,Name:e.Name,Tsize:e.Tsize}})):t.Links=null,t}({Data:t,Links:r}))};t.serializeDAGNode=a,t.serializeDAGNodeLike=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={Data:e};return r.Links=t.map((function(e){return i.isDAGLink(e)?e:i.util.createDagLinkFromB58EncodedHash(e)})),a(r)}},function(e,t,r){"use strict";e.exports="// An IPFS MerkleDAG Link\nmessage PBLink {\n\n  // multihash of the target object\n  optional bytes Hash = 1;\n\n  // utf string name. should be unique per object\n  optional string Name = 2;\n\n  // cumulative size of target object\n  optional uint64 Tsize = 3;\n}\n\n// An IPFS MerkleDAG Node\nmessage PBNode {\n\n  // refs to other objects\n  repeated PBLink Links = 2;\n\n  // opaque user data\n  optional bytes Data = 1;\n}"},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(11),s=r(126),o=r(1330);(t=e.exports).codec=s.DAG_PB,t.defaultHashAlg=s.SHA2_256;var u=function(){var e=i(n.mark((function e(r,i){var u,f,c,h,d;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={cidVersion:1,hashAlg:t.defaultHashAlg},f=Object.assign(u,i),e.next=4,o(r,f.hashAlg);case 4:return c=e.sent,h=s.print[t.codec],d=new a(f.cidVersion,h,c),e.abrupt("return",d);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.cid=u},function(e,t,r){"use strict";(e.exports=r(1142)).util=r(1680)},function(e,t,r){"use strict";(function(n){var i=r(107)(r(1334)),a=r(1142),s=r(1331),o=r(1333).serializeDAGNodeLike,u=r(1335);(t=e.exports).codec=u.codec,t.defaultHashAlg=u.defaultHashAlg;t.serialize=function(e){return s.isDAGNode(e)?e.serialize():o(e.Data,e.Links)},t.deserialize=function(e){var t=i.PBNode.decode(e),r=t.Links.map((function(e){return new a(e.Name,e.Tsize,e.Hash)})),o=null==t.Data?n.alloc(0):t.Data;return new s(o,r,e.length)},t.cid=function(e,t){return u.cid(e,t)}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(n){var i=r(2),a=r(13),s=r(1683),o=r(11),u=r(126),f=r(1187),c=r(1689),h=r(1691),d=r(1692);(t=e.exports).codec=u.GIT_RAW,t.defaultHashAlg=u.SHA1,t.serialize=function(e){if(null===e)throw new Error("dagNode passed to serialize was null");if(n.isBuffer(e)){if("blob"===e.slice(0,4).toString())return e;throw new Error("unexpected dagNode passed to serialize")}switch(e.gitType){case"commit":return c.serialize(e);case"tag":return h.serialize(e);default:return d.serialize(e)}},t.deserialize=function(e){var t=f.find(e,0),r=e.slice(0,t).toString().match(/([^ ]+) (\d+)/);if(!r)throw new Error("invalid object header");switch(r[1]){case"blob":return e;case"commit":return c.deserialize(e.slice(t+1));case"tag":return h.deserialize(e.slice(t+1));case"tree":return d.deserialize(e.slice(t+1));default:throw new Error("unknown object type "+r[1])}},t.cid=function(){var e=a(i.mark((function e(r,n){var a,f,c,h,d;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={cidVersion:1,hashAlg:t.defaultHashAlg},f=Object.assign(a,n),e.next=4,s(r,f.hashAlg);case 4:return c=e.sent,h=u.print[t.codec],d=new o(f.cidVersion,h,c),e.abrupt("return",d);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}).call(this,r(3).Buffer)},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(487),s=r(1695).BlockHeader,o=r(11),u=r(126),f=r(35),c=r(1777),h=u.ZCASH_BLOCK,d=u.DBL_SHA2_256,p=function(){var e=i(n.mark((function e(t,r){var i,a,s,f,p;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={cidVersion:1,hashAlg:d},a=Object.assign(i,r),e.next=4,c(t,a.hashAlg);case 4:return s=e.sent,f=u.print[h],p=new o(a.cidVersion,f,s),e.abrupt("return",p);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l=function(e){var t=f.encode(e,d);return new o(1,"zcash-block",t)};e.exports={hashToCid:l,ZCASH_BLOCK_HEADER_SIZE:1487,codec:h,defaultHashAlg:d,cid:p,deserialize:function(e){if(1487!==e.length)throw new Error("Zcash block header needs to be ".concat(1487," bytes"));var t=s.fromBuffer(e),r={difficulty:function(){return this.bits},parent:function(){return l(this.prevHash)},tx:function(){return l(this.merkleRoot)}};Object.entries(r).forEach((function(e){var r=a(e,2),n=r[0],i=r[1];Object.defineProperty(t,n,{enumerable:!0,get:i})}));return["bits","merkleRoot","prevHash","time"].forEach((function(e){e in t&&Object.defineProperty(t,e,{enumerable:!1})})),t},serialize:function(e){return e.toBuffer()}}},function(e,t,r){"use strict";(function(t){var n=r(1103),i=r(1143),a=r(1113),s=r(1119),o=r(1195),u=r(1104),f=r(1099),c=r(1097),h=r(1098),d=function e(t){if(!(this instanceof e))return new e(t);t&&this.set(t)};d.prototype.set=function(e){return this.hashbuf=e.hashbuf||this.hashbuf,this.endian=e.endian||this.endian,this.privkey=e.privkey||this.privkey,this.pubkey=e.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey),this.sig=e.sig||this.sig,this.k=e.k||this.k,this.verified=e.verified||this.verified,this},d.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey()},d.prototype.calci=function(){for(var e=0;e<4;e++){var t;this.sig.i=e;try{t=this.toPublicKey()}catch(r){console.error(r);continue}if(t.point.eq(this.pubkey.point))return this.sig.compressed=this.pubkey.compressed,this}throw this.sig.i=void 0,new Error("Unable to find valid recovery factor")},d.fromString=function(e){var t=JSON.parse(e);return new d(t)},d.prototype.randomK=function(){var e,t=i.getN();do{e=n.fromBuffer(o.getRandomBuffer(32))}while(!e.lt(t)||!e.gt(n.Zero));return this.k=e,this},d.prototype.deterministicK=function(e){c.isUndefined(e)&&(e=0);var r=new t(32);r.fill(1);var a=new t(32);a.fill(0);var s=this.privkey.bn.toBuffer({size:32}),o="little"===this.endian?f.reverse(this.hashbuf):this.hashbuf;a=u.sha256hmac(t.concat([r,new t([0]),s,o]),a),r=u.sha256hmac(r,a),a=u.sha256hmac(t.concat([r,new t([1]),s,o]),a),r=u.sha256hmac(r,a),r=u.sha256hmac(r,a);for(var h=n.fromBuffer(r),d=i.getN(),p=0;p<e||!h.lt(d)||!h.gt(n.Zero);p++)a=u.sha256hmac(t.concat([r,new t([0])]),a),r=u.sha256hmac(r,a),r=u.sha256hmac(r,a),h=n.fromBuffer(r);return this.k=h,this},d.prototype.toPublicKey=function(){var e=this.sig.i;h.checkArgument(0===e||1===e||2===e||3===e,new Error("i must be equal to 0, 1, 2, or 3"));var t=n.fromBuffer(this.hashbuf),r=this.sig.r,a=this.sig.s,o=1&e,u=e>>1,f=i.getN(),c=i.getG(),d=u?r.add(f):r,p=i.fromX(o,d);if(!p.mul(f).isInfinity())throw new Error("nR is not a valid curve point");var l=t.neg().mod(f),b=r.invm(f),v=p.mul(a).add(c.mul(l)).mul(b);return s.fromPoint(v,this.sig.compressed)},d.prototype.sigError=function(){if(!f.isBuffer(this.hashbuf)||32!==this.hashbuf.length)return"hashbuf must be a 32 byte buffer";var e=this.sig.r,t=this.sig.s;if(!e.gt(n.Zero)||!e.lt(i.getN())||!t.gt(n.Zero)||!t.lt(i.getN()))return"r and s not in range";var r=n.fromBuffer(this.hashbuf,this.endian?{endian:this.endian}:void 0),a=i.getN(),s=t.invm(a),o=s.mul(r).mod(a),u=s.mul(e).mod(a),c=i.getG().mulAdd(o,this.pubkey.point,u);return c.isInfinity()?"p is infinity":0!==c.getX().mod(a).cmp(e)&&"Invalid signature"},d.toLowS=function(e){return e.gt(n.fromBuffer(new t("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))&&(e=i.getN().sub(e)),e},d.prototype._findSignature=function(e,t){var r,a,s,o=i.getN(),u=i.getG(),f=0;do{(!this.k||f>0)&&this.deterministicK(f),f++,r=this.k,a=u.mul(r).x.mod(o),s=r.invm(o).mul(t.add(e.mul(a))).mod(o)}while(a.cmp(n.Zero)<=0||s.cmp(n.Zero)<=0);return{s:s=d.toLowS(s),r:a}},d.prototype.sign=function(){var e=this.hashbuf,t=this.privkey,r=t.bn;h.checkState(e&&t&&r,new Error("invalid parameters")),h.checkState(f.isBuffer(e)&&32===e.length,new Error("hashbuf must be a 32 byte buffer"));var i=n.fromBuffer(e,this.endian?{endian:this.endian}:void 0),s=this._findSignature(r,i);return s.compressed=this.pubkey.compressed,this.sig=new a(s),this},d.prototype.signRandomK=function(){return this.randomK(),this.sign()},d.prototype.toString=function(){var e={};return this.hashbuf&&(e.hashbuf=this.hashbuf.toString("hex")),this.privkey&&(e.privkey=this.privkey.toString()),this.pubkey&&(e.pubkey=this.pubkey.toString()),this.sig&&(e.sig=this.sig.toString()),this.k&&(e.k=this.k.toString()),JSON.stringify(e)},d.prototype.verify=function(){return this.sigError()?this.verified=!1:this.verified=!0,this},d.sign=function(e,t,r){return d().set({hashbuf:e,endian:r,privkey:t}).sign().sig},d.verify=function(e,t,r,n){return d().set({hashbuf:e,endian:n,sig:t,pubkey:r}).verify().verified},e.exports=d}).call(this,r(3).Buffer)},function(e){e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(e,t,r){t.pbkdf2=r(1702),t.pbkdf2Sync=r(1345)},function(e,t,r){(function(t){var r=Math.pow(2,30)-1;function n(e,r){if("string"!==typeof e&&!t.isBuffer(e))throw new TypeError(r+" must be a buffer or string")}e.exports=function(e,t,i,a){if(n(e,"Password"),n(t,"Salt"),"number"!==typeof i)throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if("number"!==typeof a)throw new TypeError("Key length not a number");if(a<0||a>r||a!==a)throw new TypeError("Bad key length")}}).call(this,r(3).Buffer)},function(e,t,r){(function(t){var r;t.browser?r="utf-8":r=parseInt(t.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary";e.exports=r}).call(this,r(17))},function(e,t,r){var n=r(504),i=r(290),a=r(291),s=r(1343),o=r(1344),u=r(30).Buffer,f=u.alloc(128),c={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function h(e,t,r){var s=function(e){return"rmd160"===e||"ripemd160"===e?function(e){return(new i).update(e).digest()}:"md5"===e?n:function(t){return a(e).update(t).digest()}}(e),o="sha512"===e||"sha384"===e?128:64;t.length>o?t=s(t):t.length<o&&(t=u.concat([t,f],o));for(var h=u.allocUnsafe(o+c[e]),d=u.allocUnsafe(o+c[e]),p=0;p<o;p++)h[p]=54^t[p],d[p]=92^t[p];var l=u.allocUnsafe(o+r+4);h.copy(l,0,0,o),this.ipad1=l,this.ipad2=h,this.opad=d,this.alg=e,this.blocksize=o,this.hash=s,this.size=c[e]}h.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,r,n,i){s(e,t,r,n),u.isBuffer(e)||(e=u.from(e,o)),u.isBuffer(t)||(t=u.from(t,o));var a=new h(i=i||"sha1",e,t.length),f=u.allocUnsafe(n),d=u.allocUnsafe(t.length+4);t.copy(d,0,0,t.length);for(var p=0,l=c[i],b=Math.ceil(n/l),v=1;v<=b;v++){d.writeUInt32BE(v,t.length);for(var y=a.run(d,a.ipad1),m=y,g=1;g<r;g++){m=a.run(m,a.ipad2);for(var _=0;_<l;_++)y[_]^=m[_]}y.copy(f,p),p+=l}return f}},function(e,t,r){var n=r(1154),i=r(30).Buffer,a=r(1347);function s(e){var t=e._cipher.encryptBlockRaw(e._prev);return a(e._prev),t}t.encrypt=function(e,t){var r=Math.ceil(t.length/16),a=e._cache.length;e._cache=i.concat([e._cache,i.allocUnsafe(16*r)]);for(var o=0;o<r;o++){var u=s(e),f=a+16*o;e._cache.writeUInt32BE(u[0],f+0),e._cache.writeUInt32BE(u[1],f+4),e._cache.writeUInt32BE(u[2],f+8),e._cache.writeUInt32BE(u[3],f+12)}var c=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),n(t,c)}},function(e,t){e.exports=function(e){for(var t,r=e.length;r--;){if(255!==(t=e.readUInt8(r))){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}},function(e){e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(e,t,r){var n=r(1188),i=r(30).Buffer,a=r(189),s=r(16),o=r(1717),u=r(1154),f=r(1347);function c(e,t,r,s){a.call(this);var u=i.alloc(4,0);this._cipher=new n.AES(t);var c=this._cipher.encryptBlock(u);this._ghash=new o(c),r=function(e,t,r){if(12===t.length)return e._finID=i.concat([t,i.from([0,0,0,1])]),i.concat([t,i.from([0,0,0,2])]);var n=new o(r),a=t.length,s=a%16;n.update(t),s&&(s=16-s,n.update(i.alloc(s,0))),n.update(i.alloc(8,0));var u=8*a,c=i.alloc(8);c.writeUIntBE(u,0,8),n.update(c),e._finID=n.state;var h=i.from(e._finID);return f(h),h}(this,r,c),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}s(c,a),c.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=i.alloc(t,0),this._ghash.update(t))}this._called=!0;var r=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(r),this._len+=e.length,r},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var r=0;e.length!==t.length&&r++;for(var n=Math.min(e.length,t.length),i=0;i<n;++i)r+=e[i]^t[i];return r}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},c.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=c},function(e,t,r){var n=r(1188),i=r(30).Buffer,a=r(189);function s(e,t,r,s){a.call(this),this._cipher=new n.AES(t),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._mode=e}r(16)(s,a),s.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},e.exports=s},function(e,t,r){var n=r(1132);e.exports=m,m.simpleSieve=v,m.fermatTest=y;var i=r(277),a=new i(24),s=new(r(1352)),o=new i(1),u=new i(2),f=new i(5),c=(new i(16),new i(8),new i(10)),h=new i(3),d=(new i(7),new i(11)),p=new i(4),l=(new i(12),null);function b(){if(null!==l)return l;var e=[];e[0]=2;for(var t=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),i=0;i<t&&e[i]<=n&&r%e[i]!==0;i++);t!==i&&e[i]<=n||(e[t++]=r)}return l=e,e}function v(e){for(var t=b(),r=0;r<t.length;r++)if(0===e.modn(t[r]))return 0===e.cmpn(t[r]);return!0}function y(e){var t=i.mont(e);return 0===u.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function m(e,t){if(e<16)return new i(2===t||5===t?[140,123]:[140,39]);var r,l;for(t=new i(t);;){for(r=new i(n(Math.ceil(e/8)));r.bitLength()>e;)r.ishrn(1);if(r.isEven()&&r.iadd(o),r.testn(1)||r.iadd(u),t.cmp(u)){if(!t.cmp(f))for(;r.mod(c).cmp(h);)r.iadd(p)}else for(;r.mod(a).cmp(d);)r.iadd(p);if(v(l=r.shrn(1))&&v(r)&&y(l)&&y(r)&&s.test(l)&&s.test(r))return r}}},function(e,t,r){var n=r(277),i=r(1220);function a(e){this.rand=e||new i.Rand}e.exports=a,a.create=function(e){return new a(e)},a.prototype._randbelow=function(e){var t=e.bitLength(),r=Math.ceil(t/8);do{var i=new n(this.rand.generate(r))}while(i.cmp(e)>=0);return i},a.prototype._randrange=function(e,t){var r=t.sub(e);return e.add(this._randbelow(r))},a.prototype.test=function(e,t,r){var i=e.bitLength(),a=n.mont(e),s=new n(1).toRed(a);t||(t=Math.max(1,i/48|0));for(var o=e.subn(1),u=0;!o.testn(u);u++);for(var f=e.shrn(u),c=o.toRed(a);t>0;t--){var h=this._randrange(new n(2),o);r&&r(h);var d=h.toRed(a).redPow(f);if(0!==d.cmp(s)&&0!==d.cmp(c)){for(var p=1;p<u;p++){if(0===(d=d.redSqr()).cmp(s))return!1;if(0===d.cmp(c))break}if(p===u)return!1}}return!0},a.prototype.getDivisor=function(e,t){var r=e.bitLength(),i=n.mont(e),a=new n(1).toRed(i);t||(t=Math.max(1,r/48|0));for(var s=e.subn(1),o=0;!s.testn(o);o++);for(var u=e.shrn(o),f=s.toRed(i);t>0;t--){var c=this._randrange(new n(2),s),h=e.gcd(c);if(0!==h.cmpn(1))return h;var d=c.toRed(i).redPow(u);if(0!==d.cmp(a)&&0!==d.cmp(f)){for(var p=1;p<o;p++){if(0===(d=d.redSqr()).cmp(a))return d.fromRed().subn(1).gcd(e);if(0===d.cmp(f))break}if(p===o)return(d=d.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},function(e,t,r){var n=r(16),i=r(1156).Reporter,a=r(3).Buffer;function s(e,t){i.call(this,t),a.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function o(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return e instanceof o||(e=new o(e,t)),this.length+=e.length,e}),this);else if("number"===typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"===typeof e)this.value=e,this.length=a.byteLength(e);else{if(!a.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}n(s,i),t.DecoderBuffer=s,s.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},s.prototype.restore=function(e){var t=new s(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,i.prototype.restore.call(this,e.reporter),t},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},s.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new s(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},s.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=o,o.prototype.join=function(e,t){return e||(e=new a(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach((function(r){r.join(e,t),t+=r.length})):("number"===typeof this.value?e[t]=this.value:"string"===typeof this.value?e.write(this.value,t):a.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)}},function(e,t,r){var n=t;n._reverse=function(e){var t={};return Object.keys(e).forEach((function(r){(0|r)==r&&(r|=0);var n=e[r];t[n]=r})),t},n.der=r(1730)},function(e,t,r){var n=r(16),i=r(1155),a=i.base,s=i.bignum,o=i.constants.der;function u(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new f,this.tree._init(e.body)}function f(e){a.Node.call(this,"der",e)}function c(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var n=o.tagClass[r>>6],i=0===(32&r);if(31===(31&r)){var a=r;for(r=0;128===(128&a);){if(a=e.readUInt8(t),e.isError(a))return a;r<<=7,r|=127&a}}else r&=31;return{cls:n,primitive:i,tag:r,tagStr:o.tag[r]}}function h(e,t,r){var n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(0===(128&n))return n;var i=127&n;if(i>4)return e.error("length octect is too long");n=0;for(var a=0;a<i;a++){n<<=8;var s=e.readUInt8(r);if(e.isError(s))return s;n|=s}return n}e.exports=u,u.prototype.decode=function(e,t){return e instanceof a.DecoderBuffer||(e=new a.DecoderBuffer(e,t)),this.tree._decode(e,t)},n(f,a.Node),f.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;var n=e.save(),i=c(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(n),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||r)},f.prototype._decodeTag=function(e,t,r){var n=c(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;var i=h(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');var a=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(i=e.offset-a.offset,e.restore(a),e.skip(i,'Failed to match body of: "'+t+'"'))},f.prototype._skipUntilEnd=function(e,t){for(;;){var r=c(e,t);if(e.isError(r))return r;var n,i=h(e,r.primitive,t);if(e.isError(i))return i;if(n=r.primitive||null!==i?e.skip(i):this._skipUntilEnd(e,t),e.isError(n))return n;if("end"===r.tagStr)break}},f.prototype._decodeList=function(e,t,r,n){for(var i=[];!e.isEmpty();){var a=this._peekTag(e,"end");if(e.isError(a))return a;var s=r.decode(e,"der",n);if(e.isError(s)&&a)break;i.push(s)}return i},f.prototype._decodeStr=function(e,t){if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}if("bmpstr"===t){var n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");for(var i="",a=0;a<n.length/2;a++)i+=String.fromCharCode(n.readUInt16BE(2*a));return i}if("numstr"===t){var s=e.raw().toString("ascii");return this._isNumstr(s)?s:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var o=e.raw().toString("ascii");return this._isPrintstr(o)?o:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},f.prototype._decodeObjid=function(e,t,r){for(var n,i=[],a=0;!e.isEmpty();){var s=e.readUInt8();a<<=7,a|=127&s,0===(128&s)&&(i.push(a),a=0)}128&s&&i.push(a);var o=i[0]/40|0,u=i[0]%40;if(n=r?i:[o,u].concat(i.slice(1)),t){var f=t[n.join(" ")];void 0===f&&(f=t[n.join(".")]),void 0!==f&&(n=f)}return n},f.prototype._decodeTime=function(e,t){var r=e.raw().toString();if("gentime"===t)var n=0|r.slice(0,4),i=0|r.slice(4,6),a=0|r.slice(6,8),s=0|r.slice(8,10),o=0|r.slice(10,12),u=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),a=0|r.slice(4,6),s=0|r.slice(6,8),o=0|r.slice(8,10),u=0|r.slice(10,12);n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,a,s,o,u,0)},f.prototype._decodeNull=function(e){return null},f.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},f.prototype._decodeInt=function(e,t){var r=e.raw(),n=new s(r);return t&&(n=t[n.toString(10)]||n),n},f.prototype._use=function(e,t){return"function"===typeof e&&(e=e(t)),e._getDecoder("der").tree}},function(e,t,r){var n=r(16),i=r(3).Buffer,a=r(1155),s=a.base,o=a.constants.der;function u(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new f,this.tree._init(e.body)}function f(e){s.Node.call(this,"der",e)}function c(e){return e<10?"0"+e:e}e.exports=u,u.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},n(f,s.Node),f.prototype._encodeComposite=function(e,t,r,n){var a,s=function(e,t,r,n){var i;"seqof"===e?e="seq":"setof"===e&&(e="set");if(o.tagByName.hasOwnProperty(e))i=o.tagByName[e];else{if("number"!==typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}if(i>=31)return n.error("Multi-octet tag encoding unsupported");t||(i|=32);return i|=o.tagClassByName[r||"universal"]<<6}(e,t,r,this.reporter);if(n.length<128)return(a=new i(2))[0]=s,a[1]=n.length,this._createEncoderBuffer([a,n]);for(var u=1,f=n.length;f>=256;f>>=8)u++;(a=new i(2+u))[0]=s,a[1]=128|u;f=1+u;for(var c=n.length;c>0;f--,c>>=8)a[f]=255&c;return this._createEncoderBuffer([a,n])},f.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var r=new i(2*e.length),n=0;n<e.length;n++)r.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(r)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},f.prototype._encodeObjid=function(e,t,r){if("string"===typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s\.]+/g);for(var n=0;n<e.length;n++)e[n]|=0}else if(Array.isArray(e)){e=e.slice();for(n=0;n<e.length;n++)e[n]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}var a=0;for(n=0;n<e.length;n++){var s=e[n];for(a++;s>=128;s>>=7)a++}var o=new i(a),u=o.length-1;for(n=e.length-1;n>=0;n--){s=e[n];for(o[u--]=127&s;(s>>=7)>0;)o[u--]=128|127&s}return this._createEncoderBuffer(o)},f.prototype._encodeTime=function(e,t){var r,n=new Date(e);return"gentime"===t?r=[c(n.getFullYear()),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[c(n.getFullYear()%100),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},f.prototype._encodeNull=function(){return this._createEncoderBuffer("")},f.prototype._encodeInt=function(e,t){if("string"===typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!==typeof e&&!i.isBuffer(e)){var r=e.toArray();!e.sign&&128&r[0]&&r.unshift(0),e=new i(r)}if(i.isBuffer(e)){var n=e.length;0===e.length&&n++;var a=new i(n);return e.copy(a),0===e.length&&(a[0]=0),this._createEncoderBuffer(a)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);n=1;for(var s=e;s>=256;s>>=8)n++;for(s=(a=new Array(n)).length-1;s>=0;s--)a[s]=255&e,e>>=8;return 128&a[0]&&a.unshift(0),this._createEncoderBuffer(new i(a))},f.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},f.prototype._use=function(e,t){return"function"===typeof e&&(e=e(t)),e._getEncoder("der").tree},f.prototype._skipDefault=function(e,t,r){var n,i=this._baseState;if(null===i.default)return!1;var a=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,r).join()),a.length!==i.defaultBuffer.length)return!1;for(n=0;n<a.length;n++)if(a[n]!==i.defaultBuffer[n])return!1;return!0}},function(e){e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(e,t,r){var n=r(485),i=r(30).Buffer;function a(e){var t=i.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var r,s=i.alloc(0),o=0;s.length<t;)r=a(o++),s=i.concat([s,n("sha1").update(e).update(r).digest()]);return s.slice(0,t)}},function(e,t){e.exports=function(e,t){for(var r=e.length,n=-1;++n<r;)e[n]^=t[n];return e}},function(e,t,r){var n=r(277),i=r(30).Buffer;e.exports=function(e,t){return i.from(e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed().toArray())}},function(e,t){for(var r="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",n={},i=0;i<r.length;i++)n[r.charAt(i)]=i;var a=58;e.exports={encode:function(e){if(0===e.length)return"";var t,n,i=[0];for(t=0;t<e.length;t++){for(n=0;n<i.length;n++)i[n]<<=8;i[0]+=e[t];var s=0;for(n=0;n<i.length;++n)i[n]+=s,s=i[n]/a|0,i[n]%=a;for(;s;)i.push(s%a),s=s/a|0}for(t=0;0===e[t]&&t<e.length-1;t++)i.push(0);return i.reverse().map((function(e){return r[e]})).join("")},decode:function(e){if(0===e.length)return[];var t,r,i=[0];for(t=0;t<e.length;t++){var s=e[t];if(!(s in n))throw new Error("Non-base58 character");for(r=0;r<i.length;r++)i[r]*=a;i[0]+=n[s];var o=0;for(r=0;r<i.length;++r)i[r]+=o,o=i[r]>>8,i[r]&=255;for(;o;)i.push(255&o),o>>=8}for(t=0;"1"===e[t]&&t<e.length-1;t++)i.push(0);return i.reverse()}}},function(e,t,r){"use strict";(function(t){var n=r(1134),i=r(1124),a=r(1110),s=r(1104),o=r(1239),u=r(1119),f=r(1113),c=r(1133),h=r(1098),d=r(1097),p=r(1112),l=r(3),b=r(1099),v=r(1101),y=function e(t){return this instanceof e?(this.chunks=[],b.isBuffer(t)?e.fromBuffer(t):t instanceof n?e.fromAddress(t):t instanceof e?e.fromBuffer(t.toBuffer()):"string"===typeof t?e.fromString(t):void("undefined"!==typeof t&&this.set(t))):new e(t)};y.prototype.set=function(e){return this.chunks=e.chunks||this.chunks,this},y.fromBuffer=function(e){var t=new y;t.chunks=[];for(var r=new i(e);!r.finished();)try{var n,a,s=r.readUInt8();s>0&&s<o.OP_PUSHDATA1?(n=s,t.chunks.push({buf:r.read(n),len:n,opcodenum:s})):s===o.OP_PUSHDATA1?(n=r.readUInt8(),a=r.read(n),t.chunks.push({buf:a,len:n,opcodenum:s})):s===o.OP_PUSHDATA2?(n=r.readUInt16LE(),a=r.read(n),t.chunks.push({buf:a,len:n,opcodenum:s})):s===o.OP_PUSHDATA4?(n=r.readUInt32LE(),a=r.read(n),t.chunks.push({buf:a,len:n,opcodenum:s})):t.chunks.push({opcodenum:s})}catch(u){if(u instanceof RangeError)throw new p.Script.InvalidBuffer(e.toString("hex"));throw u}return t},y.prototype.toBuffer=function(){for(var e=new a,t=0;t<this.chunks.length;t++){var r=this.chunks[t],n=r.opcodenum;e.writeUInt8(r.opcodenum),r.buf&&(n<o.OP_PUSHDATA1?e.write(r.buf):n===o.OP_PUSHDATA1?(e.writeUInt8(r.len),e.write(r.buf)):n===o.OP_PUSHDATA2?(e.writeUInt16LE(r.len),e.write(r.buf)):n===o.OP_PUSHDATA4&&(e.writeUInt32LE(r.len),e.write(r.buf)))}return e.concat()},y.fromASM=function(e){var r=new y;r.chunks=[];for(var n=e.split(" "),i=0;i<n.length;){var a=n[i],s=o(a).toNumber();if(d.isUndefined(s)){var u=new t(n[i],"hex");r.chunks.push({buf:u,len:u.length,opcodenum:u.length}),i+=1}else s===o.OP_PUSHDATA1||s===o.OP_PUSHDATA2||s===o.OP_PUSHDATA4?(r.chunks.push({buf:new t(n[i+2],"hex"),len:parseInt(n[i+1]),opcodenum:s}),i+=3):(r.chunks.push({opcodenum:s}),i+=1)}return r},y.fromHex=function(e){return new y(new l.Buffer(e,"hex"))},y.fromString=function(e){if(v.isHexa(e)||0===e.length)return new y(new l.Buffer(e,"hex"));var r=new y;r.chunks=[];for(var n=e.split(" "),i=0;i<n.length;){var a=n[i],s=o(a).toNumber();if(d.isUndefined(s)){if(!((s=parseInt(a))>0&&s<o.OP_PUSHDATA1))throw new Error("Invalid script: "+JSON.stringify(e));r.chunks.push({buf:new t(n[i+1].slice(2),"hex"),len:s,opcodenum:s}),i+=2}else if(s===o.OP_PUSHDATA1||s===o.OP_PUSHDATA2||s===o.OP_PUSHDATA4){if("0x"!==n[i+2].slice(0,2))throw new Error("Pushdata data must start with 0x");r.chunks.push({buf:new t(n[i+2].slice(2),"hex"),len:parseInt(n[i+1]),opcodenum:s}),i+=3}else r.chunks.push({opcodenum:s}),i+=1}return r},y.prototype._chunkToString=function(e,t){var r=e.opcodenum,n="asm"===t,i="";if(e.buf)r!==o.OP_PUSHDATA1&&r!==o.OP_PUSHDATA2&&r!==o.OP_PUSHDATA4||(i=i+" "+o(r).toString()),e.len>0&&(i=n?i+" "+e.buf.toString("hex"):i+" "+e.len+" 0x"+e.buf.toString("hex"));else if("undefined"!==typeof o.reverseMap[r])i=i+" "+o(r).toString();else{var a=r.toString(16);a.length%2!==0&&(a="0"+a),i=n?i+" "+a:i+" 0x"+a}return i},y.prototype.toASM=function(){for(var e="",t=0;t<this.chunks.length;t++){var r=this.chunks[t];e+=this._chunkToString(r,"asm")}return e.substr(1)},y.prototype.toString=function(){for(var e="",t=0;t<this.chunks.length;t++){var r=this.chunks[t];e+=this._chunkToString(r)}return e.substr(1)},y.prototype.toHex=function(){return this.toBuffer().toString("hex")},y.prototype.inspect=function(){return"<Script: "+this.toString()+">"},y.prototype.isPublicKeyHashOut=function(){return!(5!==this.chunks.length||this.chunks[0].opcodenum!==o.OP_DUP||this.chunks[1].opcodenum!==o.OP_HASH160||!this.chunks[2].buf||20!==this.chunks[2].buf.length||this.chunks[3].opcodenum!==o.OP_EQUALVERIFY||this.chunks[4].opcodenum!==o.OP_CHECKSIG)},y.prototype.isPublicKeyHashIn=function(){if(2===this.chunks.length){var e=this.chunks[0].buf,t=this.chunks[1].buf;if(e&&e.length&&48===e[0]&&t&&t.length){var r=t[0];if((4===r||6===r||7===r)&&65===t.length)return!0;if((3===r||2===r)&&33===t.length)return!0}}return!1},y.prototype.getPublicKey=function(){return h.checkState(this.isPublicKeyOut(),"Can't retreive PublicKey from a non-PK output"),this.chunks[0].buf},y.prototype.getPublicKeyHash=function(){return h.checkState(this.isPublicKeyHashOut(),"Can't retrieve PublicKeyHash from a non-PKH output"),this.chunks[2].buf},y.prototype.isPublicKeyOut=function(){if(2===this.chunks.length&&this.chunks[0].buf&&this.chunks[0].buf.length&&this.chunks[1].opcodenum===o.OP_CHECKSIG){var e=this.chunks[0].buf,t=e[0],r=!1;if((4!==t&&6!==t&&7!==t||65!==e.length)&&(3!==t&&2!==t||33!==e.length)||(r=!0),r)return u.isValid(e)}return!1},y.prototype.isPublicKeyIn=function(){if(1===this.chunks.length){var e=this.chunks[0].buf;if(e&&e.length&&48===e[0])return!0}return!1},y.prototype.isScriptHashOut=function(){var e=this.toBuffer();return 23===e.length&&e[0]===o.OP_HASH160&&20===e[1]&&e[e.length-1]===o.OP_EQUAL},y.prototype.isScriptHashIn=function(){if(this.chunks.length<=1)return!1;var e,t=this.chunks[this.chunks.length-1].buf;if(!t)return!1;try{e=y.fromBuffer(t)}catch(r){if(r instanceof p.Script.InvalidBuffer)return!1;throw r}return e.classify()!==y.types.UNKNOWN},y.prototype.isMultisigOut=function(){return this.chunks.length>3&&o.isSmallIntOp(this.chunks[0].opcodenum)&&this.chunks.slice(1,this.chunks.length-2).every((function(e){return e.buf&&b.isBuffer(e.buf)}))&&o.isSmallIntOp(this.chunks[this.chunks.length-2].opcodenum)&&this.chunks[this.chunks.length-1].opcodenum===o.OP_CHECKMULTISIG},y.prototype.isMultisigIn=function(){return this.chunks.length>=2&&0===this.chunks[0].opcodenum&&this.chunks.slice(1,this.chunks.length).every((function(e){return e.buf&&b.isBuffer(e.buf)&&f.isTxDER(e.buf)}))},y.prototype.isDataOut=function(){return this.chunks.length>=1&&this.chunks[0].opcodenum===o.OP_RETURN&&(1===this.chunks.length||2===this.chunks.length&&this.chunks[1].buf&&this.chunks[1].buf.length<=y.OP_RETURN_STANDARD_SIZE&&this.chunks[1].length===this.chunks.len)},y.prototype.getData=function(){if(this.isDataOut()||this.isScriptHashOut())return d.isUndefined(this.chunks[1])?new t(0):new t(this.chunks[1].buf);if(this.isPublicKeyHashOut())return new t(this.chunks[2].buf);throw new Error("Unrecognized script type to get data from")},y.prototype.isPushOnly=function(){return d.every(this.chunks,(function(e){return e.opcodenum<=o.OP_16}))},(y.types={}).UNKNOWN="Unknown",y.types.PUBKEY_OUT="Pay to public key",y.types.PUBKEY_IN="Spend from public key",y.types.PUBKEYHASH_OUT="Pay to public key hash",y.types.PUBKEYHASH_IN="Spend from public key hash",y.types.SCRIPTHASH_OUT="Pay to script hash",y.types.SCRIPTHASH_IN="Spend from script hash",y.types.MULTISIG_OUT="Pay to multisig",y.types.MULTISIG_IN="Spend from multisig",y.types.DATA_OUT="Data push",y.OP_RETURN_STANDARD_SIZE=80,y.prototype.classify=function(){if(this._isInput)return this.classifyInput();if(this._isOutput)return this.classifyOutput();var e=this.classifyOutput();return e!=y.types.UNKNOWN?e:this.classifyInput()},(y.outputIdentifiers={}).PUBKEY_OUT=y.prototype.isPublicKeyOut,y.outputIdentifiers.PUBKEYHASH_OUT=y.prototype.isPublicKeyHashOut,y.outputIdentifiers.MULTISIG_OUT=y.prototype.isMultisigOut,y.outputIdentifiers.SCRIPTHASH_OUT=y.prototype.isScriptHashOut,y.outputIdentifiers.DATA_OUT=y.prototype.isDataOut,y.prototype.classifyOutput=function(){for(var e in y.outputIdentifiers)if(y.outputIdentifiers[e].bind(this)())return y.types[e];return y.types.UNKNOWN},(y.inputIdentifiers={}).PUBKEY_IN=y.prototype.isPublicKeyIn,y.inputIdentifiers.PUBKEYHASH_IN=y.prototype.isPublicKeyHashIn,y.inputIdentifiers.MULTISIG_IN=y.prototype.isMultisigIn,y.inputIdentifiers.SCRIPTHASH_IN=y.prototype.isScriptHashIn,y.prototype.classifyInput=function(){for(var e in y.inputIdentifiers)if(y.inputIdentifiers[e].bind(this)())return y.types[e];return y.types.UNKNOWN},y.prototype.isStandard=function(){return this.classify()!==y.types.UNKNOWN},y.prototype.prepend=function(e){return this._addByType(e,!0),this},y.prototype.equals=function(e){if(h.checkState(e instanceof y,"Must provide another script"),this.chunks.length!==e.chunks.length)return!1;var t;for(t=0;t<this.chunks.length;t++){if(b.isBuffer(this.chunks[t].buf)&&!b.isBuffer(e.chunks[t].buf))return!1;if(b.isBuffer(this.chunks[t].buf)&&!b.equals(this.chunks[t].buf,e.chunks[t].buf))return!1;if(this.chunks[t].opcodenum!==e.chunks[t].opcodenum)return!1}return!0},y.prototype.add=function(e){return this._addByType(e,!1),this},y.prototype._addByType=function(e,t){if("string"===typeof e)this._addOpcode(e,t);else if("number"===typeof e)this._addOpcode(e,t);else if(e instanceof o)this._addOpcode(e,t);else if(b.isBuffer(e))this._addBuffer(e,t);else if(e instanceof y)this.chunks=this.chunks.concat(e.chunks);else{if("object"!==typeof e)throw new Error("Invalid script chunk");this._insertAtPosition(e,t)}},y.prototype._insertAtPosition=function(e,t){t?this.chunks.unshift(e):this.chunks.push(e)},y.prototype._addOpcode=function(e,t){var r;return r="number"===typeof e?e:e instanceof o?e.toNumber():o(e).toNumber(),this._insertAtPosition({opcodenum:r},t),this},y.prototype._addBuffer=function(e,t){var r,n=e.length;if(n>=0&&n<o.OP_PUSHDATA1)r=n;else if(n<Math.pow(2,8))r=o.OP_PUSHDATA1;else if(n<Math.pow(2,16))r=o.OP_PUSHDATA2;else{if(!(n<Math.pow(2,32)))throw new Error("You can't push that much data");r=o.OP_PUSHDATA4}return this._insertAtPosition({buf:e,len:n,opcodenum:r},t),this},y.prototype.removeCodeseparators=function(){for(var e=[],t=0;t<this.chunks.length;t++)this.chunks[t].opcodenum!==o.OP_CODESEPARATOR&&e.push(this.chunks[t]);return this.chunks=e,this},y.buildMultisigOut=function(e,t,r){h.checkArgument(t<=e.length,"Number of required signatures must be less than or equal to the number of public keys"),r=r||{};var n=new y;n.add(o.smallInt(t));var i=e=d.map(e,u);r.noSorting||(i=d.sortBy(e,(function(e){return e.toString("hex")})));for(var a=0;a<i.length;a++){var s=i[a];n.add(s.toBuffer())}return n.add(o.smallInt(e.length)),n.add(o.OP_CHECKMULTISIG),n},y.buildMultisigIn=function(e,t,r,n){h.checkArgument(d.isArray(e)),h.checkArgument(d.isNumber(t)),h.checkArgument(d.isArray(r)),n=n||{};var i=new y;return i.add(o.OP_0),d.each(r,(function(e){h.checkArgument(b.isBuffer(e),"Signatures must be an array of Buffers"),i.add(e)})),i},y.buildP2SHMultisigIn=function(e,t,r,n){h.checkArgument(d.isArray(e)),h.checkArgument(d.isNumber(t)),h.checkArgument(d.isArray(r)),n=n||{};var i=new y;return i.add(o.OP_0),d.each(r,(function(e){h.checkArgument(b.isBuffer(e),"Signatures must be an array of Buffers"),i.add(e)})),i.add((n.cachedMultisig||y.buildMultisigOut(e,t,n)).toBuffer()),i},y.buildPublicKeyHashOut=function(e){h.checkArgument(!d.isUndefined(e)),h.checkArgument(e instanceof u||e instanceof n||d.isString(e)),e instanceof u?e=e.toAddress():d.isString(e)&&(e=new n(e));var t=new y;return t.add(o.OP_DUP).add(o.OP_HASH160).add(e.hashBuffer).add(o.OP_EQUALVERIFY).add(o.OP_CHECKSIG),t._network=e.network,t},y.buildPublicKeyOut=function(e){h.checkArgument(e instanceof u);var t=new y;return t.add(e.toBuffer()).add(o.OP_CHECKSIG),t},y.buildDataOut=function(e,r){h.checkArgument(d.isUndefined(e)||d.isString(e)||b.isBuffer(e)),d.isString(e)&&(e=new t(e,r));var n=new y;return n.add(o.OP_RETURN),d.isUndefined(e)||n.add(e),n},y.buildScriptHashOut=function(e){h.checkArgument(e instanceof y||e instanceof n&&e.isPayToScriptHash());var t=new y;return t.add(o.OP_HASH160).add(e instanceof n?e.hashBuffer:s.sha256ripemd160(e.toBuffer())).add(o.OP_EQUAL),t._network=e._network||e.network,t},y.buildPublicKeyIn=function(e,t){h.checkArgument(e instanceof f||b.isBuffer(e)),h.checkArgument(d.isUndefined(t)||d.isNumber(t)),e instanceof f&&(e=e.toBuffer());var r=new y;return r.add(b.concat([e,b.integerAsSingleByteBuffer(t||f.SIGHASH_ALL)])),r},y.buildPublicKeyHashIn=function(e,t,r){return h.checkArgument(t instanceof f||b.isBuffer(t)),h.checkArgument(d.isUndefined(r)||d.isNumber(r)),t instanceof f&&(t=t.toBuffer()),(new y).add(b.concat([t,b.integerAsSingleByteBuffer(r||f.SIGHASH_ALL)])).add(new u(e).toBuffer())},y.empty=function(){return new y},y.prototype.toScriptHashOut=function(){return y.buildScriptHashOut(this)},y.fromAddress=function(e){if((e=n(e)).isPayToScriptHash())return y.buildScriptHashOut(e);if(e.isPayToPublicKeyHash())return y.buildPublicKeyHashOut(e);throw new p.Script.UnrecognizedAddress(e)},y.prototype.getAddressInfo=function(e){if(this._isInput)return this._getInputAddressInfo();if(this._isOutput)return this._getOutputAddressInfo();var t=this._getOutputAddressInfo();return t||this._getInputAddressInfo()},y.prototype._getOutputAddressInfo=function(){var e={};if(this.isScriptHashOut())e.hashBuffer=this.getData(),e.type=n.PayToScriptHash;else{if(!this.isPublicKeyHashOut())return!1;e.hashBuffer=this.getData(),e.type=n.PayToPublicKeyHash}return e},y.prototype._getInputAddressInfo=function(){var e={};if(this.isPublicKeyHashIn())e.hashBuffer=s.sha256ripemd160(this.chunks[1].buf),e.type=n.PayToPublicKeyHash;else{if(!this.isScriptHashIn())return!1;e.hashBuffer=s.sha256ripemd160(this.chunks[this.chunks.length-1].buf),e.type=n.PayToScriptHash}return e},y.prototype.toAddress=function(e){var t=this.getAddressInfo();return!!t&&(t.network=c.get(e)||this._network||c.defaultNetwork,new n(t))},y.prototype.findAndDelete=function(e){for(var t=e.toBuffer().toString("hex"),r=0;r<this.chunks.length;r++){t===y({chunks:[this.chunks[r]]}).toBuffer().toString("hex")&&this.chunks.splice(r,1)}return this},y.prototype.checkMinimalPush=function(e){var t=this.chunks[e],r=t.buf,n=t.opcodenum;return!r||(0===r.length?n===o.OP_0:1===r.length&&r[0]>=1&&r[0]<=16?n===o.OP_1+(r[0]-1):1===r.length&&129===r[0]?n===o.OP_1NEGATE:r.length<=75?n===r.length:r.length<=255?n===o.OP_PUSHDATA1:!(r.length<=65535)||n===o.OP_PUSHDATA2)},y.prototype._decodeOP_N=function(e){if(e===o.OP_0)return 0;if(e>=o.OP_1&&e<=o.OP_16)return e-(o.OP_1-1);throw new Error("Invalid opcode: "+JSON.stringify(e))},y.prototype.getSignatureOperationsCount=function(e){e=!!d.isUndefined(e)||e;var t=this,r=0,n=o.OP_INVALIDOPCODE;return d.each(t.chunks,(function(i){var a=i.opcodenum;a==o.OP_CHECKSIG||a==o.OP_CHECKSIGVERIFY?r++:a!=o.OP_CHECKMULTISIG&&a!=o.OP_CHECKMULTISIGVERIFY||(e&&n>=o.OP_1&&n<=o.OP_16?r+=t._decodeOP_N(n):r+=20),n=a})),r},e.exports=y}).call(this,r(3).Buffer)},function(e,t,r){"use strict";var n=r(1097),i=r(1098),a=r(1101),s=r(1114),o=r(1134),u=r(1242);function f(e){if(!(this instanceof f))return new f(e);i.checkArgument(n.isObject(e),"Must provide an object from where to extract data");var t=e.address?new o(e.address):void 0,r=e.txid?e.txid:e.txId;if(!r||!a.isHexaString(r)||r.length>64)throw new Error("Invalid TXID in object",e);var c=n.isUndefined(e.vout)?e.outputIndex:e.vout;if(!n.isNumber(c))throw new Error("Invalid outputIndex, received "+c);i.checkArgument(!n.isUndefined(e.scriptPubKey)||!n.isUndefined(e.script),"Must provide the scriptPubKey for that output!");var h=new s(e.scriptPubKey||e.script);i.checkArgument(!n.isUndefined(e.amount)||!n.isUndefined(e.satoshis),"Must provide an amount for the output");var d=n.isUndefined(e.amount)?e.satoshis:new u.fromBTC(e.amount).toSatoshis();i.checkArgument(n.isNumber(d),"Amount must be a number"),a.defineImmutable(this,{address:t,txId:r,outputIndex:c,script:h,satoshis:d})}f.prototype.inspect=function(){return"<UnspentOutput: "+this.txId+":"+this.outputIndex+", satoshis: "+this.satoshis+", address: "+this.address+">"},f.prototype.toString=function(){return this.txId+":"+this.outputIndex},f.fromObject=function(e){return new f(e)},f.prototype.toObject=f.prototype.toJSON=function(){return{address:this.address?this.address.toString():void 0,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString("hex"),amount:u.fromSatoshis(this.satoshis).toBTC()}},e.exports=f},function(e,t,r){"use strict";(function(t){var n=r(1097),i=r(1196),a=r(1099),s=r(1124),o=r(1110),u=r(1104),f=(r(1101),r(1194)),c=r(1098);function h(e){if(!(this instanceof h))return new h(e);var t={};if(a.isBuffer(e))t=h._fromBufferReader(s(e));else{if(!n.isObject(e))throw new TypeError("Unrecognized argument for MerkleBlock");t={header:e.header instanceof i?e.header:i.fromObject(e.header),numTransactions:e.numTransactions,hashes:e.hashes,flags:e.flags}}return n.extend(this,t),this._flagBitsUsed=0,this._hashesUsed=0,this}h.fromBuffer=function(e){return h.fromBufferReader(s(e))},h.fromBufferReader=function(e){return new h(h._fromBufferReader(e))},h.prototype.toBuffer=function(){return this.toBufferWriter().concat()},h.prototype.toBufferWriter=function(e){e||(e=new o),e.write(this.header.toBuffer()),e.writeUInt32LE(this.numTransactions),e.writeVarintNum(this.hashes.length);for(var r=0;r<this.hashes.length;r++)e.write(new t(this.hashes[r],"hex"));for(e.writeVarintNum(this.flags.length),r=0;r<this.flags.length;r++)e.writeUInt8(this.flags[r]);return e},h.prototype.toObject=h.prototype.toJSON=function(){return{header:this.header.toObject(),numTransactions:this.numTransactions,hashes:this.hashes,flags:this.flags}},h.prototype.validMerkleTree=function(){if(c.checkState(n.isArray(this.flags),"MerkleBlock flags is not an array"),c.checkState(n.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)return!1;if(8*this.flags.length<this.hashes.length)return!1;var e=this._calcTreeHeight(),t={hashesUsed:0,flagBitsUsed:0},r=this._traverseMerkleTree(e,0,t);return t.hashesUsed===this.hashes.length&&a.equals(r,this.header.merkleRoot)},h.prototype._traverseMerkleTree=function(e,r,n){if((n=n||{}).txs=n.txs||[],n.flagBitsUsed=n.flagBitsUsed||0,n.hashesUsed=n.hashesUsed||0,n.flagBitsUsed>8*this.flags.length)return null;var i=this.flags[n.flagBitsUsed>>3]>>>(7&n.flagBitsUsed++)&1;if(0!==e&&i){var a=this._traverseMerkleTree(e-1,2*r,n),s=a;return 2*r+1<this._calcTreeWidth(e-1)&&(s=this._traverseMerkleTree(e-1,2*r+1,n)),u.sha256sha256(new t.concat([a,s]))}if(n.hashesUsed>=this.hashes.length)return null;var o=this.hashes[n.hashesUsed++];return 0===e&&i&&n.txs.push(o),new t(o,"hex")},h.prototype._calcTreeWidth=function(e){return this.numTransactions+(1<<e)-1>>e},h.prototype._calcTreeHeight=function(){for(var e=0;this._calcTreeWidth(e)>1;)e++;return e},h.prototype.hasTransaction=function(e){c.checkArgument(!n.isUndefined(e),"tx cannot be undefined"),c.checkArgument(e instanceof f||"string"===typeof e,'Invalid tx given, tx must be a "string" or "Transaction"');var r=e;e instanceof f&&(r=a.reverse(new t(e.id,"hex")).toString("hex"));var i=[],s=this._calcTreeHeight();return this._traverseMerkleTree(s,0,{txs:i}),-1!==i.indexOf(r)},h._fromBufferReader=function(e){c.checkState(!e.finished(),"No merkleblock data received");var t={};t.header=i.fromBufferReader(e),t.numTransactions=e.readUInt32LE();var r=e.readVarintNum();t.hashes=[];for(var n=0;n<r;n++)t.hashes.push(e.read(32).toString("hex"));var a=e.readVarintNum();for(t.flags=[],n=0;n<a;n++)t.flags.push(e.readUInt8());return t},h.fromObject=function(e){return new h(e)},e.exports=h}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(t){var n=r(184),i=r(3),a=r(1097),s=r(1098),o=r(1103),u=r(1193),f=r(1157),c=r(1104),h=r(1133),d=r(1243),p=r(1143),l=r(1192),b=r(1195),v=r(1112),y=v.HDPrivateKey,m=r(1099),g=r(1101);function _(e){if(e instanceof _)return e;if(!(this instanceof _))return new _(e);if(!e)return this._generateRandomly();if(h.get(e))return this._generateRandomly(e);if(a.isString(e)||m.isBuffer(e))if(_.isValidSerialized(e))this._buildFromSerialized(e);else if(g.isValidJSON(e))this._buildFromJSON(e);else{if(!m.isBuffer(e)||!_.isValidSerialized(e.toString()))throw _.getSerializedError(e);this._buildFromSerialized(e.toString())}else{if(!a.isObject(e))throw new y.UnrecognizedArgument(e);this._buildFromObject(e)}}_.isValidPath=function(e,t){if(a.isString(e)){var r=_._getDerivationIndexes(e);return null!==r&&a.all(r,_.isValidPath)}return!!a.isNumber(e)&&(e<_.Hardened&&!0===t&&(e+=_.Hardened),e>=0&&e<_.MaxIndex)},_._getDerivationIndexes=function(e){var t=e.split("/");if(a.contains(_.RootElementAlias,e))return[];if(!a.contains(_.RootElementAlias,t[0]))return null;var r=t.slice(1).map((function(e){var t="'"===e.slice(-1);if(t&&(e=e.slice(0,-1)),!e||"-"===e[0])return NaN;var r=+e;return t&&(r+=_.Hardened),r}));return a.any(r,isNaN)?null:r},_.prototype.derive=function(e,t){if(a.isNumber(e))return this._deriveWithNumber(e,t);if(a.isString(e))return this._deriveFromString(e);throw new y.InvalidDerivationArgument(e)},_.prototype._deriveWithNumber=function(e,t){if(!_.isValidPath(e,t))throw new y.InvalidPath(e);t=e>=_.Hardened||t,e<_.Hardened&&!0===t&&(e+=_.Hardened);var r=d.get(this.xprivkey,e,t);if(r)return r;var n,a=m.integerAsBuffer(e);n=t?m.concat([new i.Buffer([0]),this.privateKey.toBuffer(),a]):m.concat([this.publicKey.toBuffer(),a]);var s=c.sha512hmac(n,this._buffers.chainCode),u=o.fromBuffer(s.slice(0,32),{size:32}),f=s.slice(32,64),h=u.add(this.privateKey.toBigNumber()).mod(p.getN()).toBuffer({size:32}),l=new _({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:e,chainCode:f,privateKey:h});return d.set(this.xprivkey,e,t,l),l},_.prototype._deriveFromString=function(e){if(!_.isValidPath(e))throw new y.InvalidPath(e);return _._getDerivationIndexes(e).reduce((function(e,t){return e._deriveWithNumber(t)}),this)},_.isValidSerialized=function(e,t){return!_.getSerializedError(e,t)},_.getSerializedError=function(e,t){if(!a.isString(e)&&!m.isBuffer(e))return new y.UnrecognizedArgument("Expected string or buffer");if(!u.validCharacters(e))return new v.InvalidB58Char("(unknown)",e);try{e=f.decode(e)}catch(n){return new v.InvalidB58Checksum(e)}if(e.length!==_.DataLength)return new y.InvalidLength(e);if(!a.isUndefined(t)){var r=_._validateNetwork(e,t);if(r)return r}return null},_._validateNetwork=function(e,t){var r=h.get(t);if(!r)return new v.InvalidNetworkArgument(t);var n=e.slice(0,4);return m.integerFromBuffer(n)!==r.xprivkey?new v.InvalidNetwork(n):null},_.fromString=function(e){return s.checkArgument(a.isString(e),"No valid string was provided"),new _(e)},_.fromObject=function(e){return s.checkArgument(a.isObject(e),"No valid argument was provided"),new _(e)},_.prototype._buildFromJSON=function(e){return this._buildFromObject(JSON.parse(e))},_.prototype._buildFromObject=function(e){var t={version:e.network?m.integerAsBuffer(h.get(e.network).xprivkey):e.version,depth:a.isNumber(e.depth)?m.integerAsSingleByteBuffer(e.depth):e.depth,parentFingerPrint:a.isNumber(e.parentFingerPrint)?m.integerAsBuffer(e.parentFingerPrint):e.parentFingerPrint,childIndex:a.isNumber(e.childIndex)?m.integerAsBuffer(e.childIndex):e.childIndex,chainCode:a.isString(e.chainCode)?m.hexToBuffer(e.chainCode):e.chainCode,privateKey:a.isString(e.privateKey)&&g.isHexa(e.privateKey)?m.hexToBuffer(e.privateKey):e.privateKey,checksum:e.checksum?e.checksum.length?e.checksum:m.integerAsBuffer(e.checksum):void 0};return this._buildFromBuffers(t)},_.prototype._buildFromSerialized=function(e){var t=f.decode(e),r={version:t.slice(_.VersionStart,_.VersionEnd),depth:t.slice(_.DepthStart,_.DepthEnd),parentFingerPrint:t.slice(_.ParentFingerPrintStart,_.ParentFingerPrintEnd),childIndex:t.slice(_.ChildIndexStart,_.ChildIndexEnd),chainCode:t.slice(_.ChainCodeStart,_.ChainCodeEnd),privateKey:t.slice(_.PrivateKeyStart,_.PrivateKeyEnd),checksum:t.slice(_.ChecksumStart,_.ChecksumEnd),xprivkey:e};return this._buildFromBuffers(r)},_.prototype._generateRandomly=function(e){return _.fromSeed(b.getRandomBuffer(64),e)},_.fromSeed=function(e,r){if(g.isHexaString(e)&&(e=m.hexToBuffer(e)),!t.isBuffer(e))throw new y.InvalidEntropyArgument(e);if(e.length<16)throw new y.InvalidEntropyArgument.NotEnoughEntropy(e);if(e.length>64)throw new y.InvalidEntropyArgument.TooMuchEntropy(e);var n=c.sha512hmac(e,new i.Buffer("Bitcoin seed"));return new _({network:h.get(r)||h.defaultNetwork,depth:0,parentFingerPrint:0,childIndex:0,privateKey:n.slice(0,32),chainCode:n.slice(32,64)})},_.prototype._calcHDPublicKey=function(){if(!this._hdPublicKey){var e=r(1366);this._hdPublicKey=new e(this)}},_.prototype._buildFromBuffers=function(e){_._validateBufferArguments(e),g.defineImmutable(this,{_buffers:e});var r=[e.version,e.depth,e.parentFingerPrint,e.childIndex,e.chainCode,m.emptyBuffer(1),e.privateKey],n=i.Buffer.concat(r);if(e.checksum&&e.checksum.length){if(e.checksum.toString()!==f.checksum(n).toString())throw new v.InvalidB58Checksum(n)}else e.checksum=f.checksum(n);var a,s=h.get(m.integerFromBuffer(e.version));a=f.encode(i.Buffer.concat(r)),e.xprivkey=new t(a);var u=new l(o.fromBuffer(e.privateKey),s),d=u.toPublicKey(),p=_.ParentFingerPrintSize,b=c.sha256ripemd160(d.toBuffer()).slice(0,p);return g.defineImmutable(this,{xprivkey:a,network:s,depth:m.integerFromSingleByteBuffer(e.depth),privateKey:u,publicKey:d,fingerPrint:b}),this._hdPublicKey=null,Object.defineProperty(this,"hdPublicKey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey}}),Object.defineProperty(this,"xpubkey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey.xpubkey}}),this},_._validateBufferArguments=function(e){var t=function(t,r){var i=e[t];n(m.isBuffer(i),t+" argument is not a buffer"),n(i.length===r,t+" has not the expected size: found "+i.length+", expected "+r)};t("version",_.VersionSize),t("depth",_.DepthSize),t("parentFingerPrint",_.ParentFingerPrintSize),t("childIndex",_.ChildIndexSize),t("chainCode",_.ChainCodeSize),t("privateKey",_.PrivateKeySize),e.checksum&&e.checksum.length&&t("checksum",_.CheckSumSize)},_.prototype.toString=function(){return this.xprivkey},_.prototype.inspect=function(){return"<HDPrivateKey: "+this.xprivkey+">"},_.prototype.toObject=_.prototype.toJSON=function(){return{network:h.get(m.integerFromBuffer(this._buffers.version),"xprivkey").name,depth:m.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:m.integerFromBuffer(this.fingerPrint),parentFingerPrint:m.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:m.integerFromBuffer(this._buffers.childIndex),chainCode:m.bufferToHex(this._buffers.chainCode),privateKey:this.privateKey.toBuffer().toString("hex"),checksum:m.integerFromBuffer(this._buffers.checksum),xprivkey:this.xprivkey}},_.fromBuffer=function(e){return new _(e.toString())},_.prototype.toBuffer=function(){return m.copy(this._buffers.xprivkey)},_.DefaultDepth=0,_.DefaultFingerprint=0,_.DefaultChildIndex=0,_.Hardened=2147483648,_.MaxIndex=2*_.Hardened,_.RootElementAlias=["m","M","m'","M'"],_.VersionSize=4,_.DepthSize=1,_.ParentFingerPrintSize=4,_.ChildIndexSize=4,_.ChainCodeSize=32,_.PrivateKeySize=32,_.CheckSumSize=4,_.DataLength=78,_.SerializedByteSize=82,_.VersionStart=0,_.VersionEnd=_.VersionStart+_.VersionSize,_.DepthStart=_.VersionEnd,_.DepthEnd=_.DepthStart+_.DepthSize,_.ParentFingerPrintStart=_.DepthEnd,_.ParentFingerPrintEnd=_.ParentFingerPrintStart+_.ParentFingerPrintSize,_.ChildIndexStart=_.ParentFingerPrintEnd,_.ChildIndexEnd=_.ChildIndexStart+_.ChildIndexSize,_.ChainCodeStart=_.ChildIndexEnd,_.ChainCodeEnd=_.ChainCodeStart+_.ChainCodeSize,_.PrivateKeyStart=_.ChainCodeEnd+1,_.PrivateKeyEnd=_.PrivateKeyStart+_.PrivateKeySize,_.ChecksumStart=_.PrivateKeyEnd,_.ChecksumEnd=_.ChecksumStart+_.CheckSumSize,n(_.ChecksumEnd===_.SerializedByteSize),e.exports=_}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(t){var n=r(1097),i=r(1098),a=r(1103),s=r(1193),o=r(1157),u=r(1104),f=r(1365),c=r(1243),h=r(1133),d=r(1143),p=r(1119),l=r(1112),b=l,v=l.HDPublicKey,y=r(184),m=r(1101),g=r(1099);function _(e){if(e instanceof _)return e;if(!(this instanceof _))return new _(e);if(e){if(n.isString(e)||g.isBuffer(e)){var t=_.getSerializedError(e);if(t){if(g.isBuffer(e)&&!_.getSerializedError(e.toString()))return this._buildFromSerialized(e.toString());if(t instanceof v.ArgumentIsPrivateExtended)return new f(e).hdPublicKey;throw t}return this._buildFromSerialized(e)}if(n.isObject(e))return e instanceof f?this._buildFromPrivate(e):this._buildFromObject(e);throw new v.UnrecognizedArgument(e)}throw new v.MustSupplyArgument}_.isValidPath=function(e){if(n.isString(e)){var t=f._getDerivationIndexes(e);return null!==t&&n.all(t,_.isValidPath)}return!!n.isNumber(e)&&(e>=0&&e<_.Hardened)},_.prototype.derive=function(e,t){if(n.isNumber(e))return this._deriveWithNumber(e,t);if(n.isString(e))return this._deriveFromString(e);throw new v.InvalidDerivationArgument(e)},_.prototype._deriveWithNumber=function(e,t){if(e>=_.Hardened||t)throw new v.InvalidIndexCantDeriveHardened;if(e<0)throw new v.InvalidPath(e);var r=c.get(this.xpubkey,e,!1);if(r)return r;var n=g.integerAsBuffer(e),i=g.concat([this.publicKey.toBuffer(),n]),s=u.sha512hmac(i,this._buffers.chainCode),o=a.fromBuffer(s.slice(0,32),{size:32}),f=s.slice(32,64),h=p.fromPoint(d.getG().mul(o).add(this.publicKey.point)),l=new _({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:e,chainCode:f,publicKey:h});return c.set(this.xpubkey,e,!1,l),l},_.prototype._deriveFromString=function(e){if(n.contains(e,"'"))throw new v.InvalidIndexCantDeriveHardened;if(!_.isValidPath(e))throw new v.InvalidPath(e);return f._getDerivationIndexes(e).reduce((function(e,t){return e._deriveWithNumber(t)}),this)},_.isValidSerialized=function(e,t){return n.isNull(_.getSerializedError(e,t))},_.getSerializedError=function(e,t){if(!n.isString(e)&&!g.isBuffer(e))return new v.UnrecognizedArgument("expected buffer or string");if(!s.validCharacters(e))return new b.InvalidB58Char("(unknown)",e);try{e=o.decode(e)}catch(a){return new b.InvalidB58Checksum(e)}if(e.length!==_.DataSize)return new v.InvalidLength(e);if(!n.isUndefined(t)){var r=_._validateNetwork(e,t);if(r)return r}var i=g.integerFromBuffer(e.slice(0,4));return i===h.livenet.xprivkey||i===h.testnet.xprivkey?new v.ArgumentIsPrivateExtended:null},_._validateNetwork=function(e,t){var r=h.get(t);if(!r)return new b.InvalidNetworkArgument(t);var n=e.slice(_.VersionStart,_.VersionEnd);return g.integerFromBuffer(n)!==r.xpubkey?new b.InvalidNetwork(n):null},_.prototype._buildFromPrivate=function(e){var t=n.clone(e._buffers),r=d.getG().mul(a.fromBuffer(t.privateKey));return t.publicKey=d.pointToCompressed(r),t.version=g.integerAsBuffer(h.get(g.integerFromBuffer(t.version)).xpubkey),t.privateKey=void 0,t.checksum=void 0,t.xprivkey=void 0,this._buildFromBuffers(t)},_.prototype._buildFromObject=function(e){var t={version:e.network?g.integerAsBuffer(h.get(e.network).xpubkey):e.version,depth:n.isNumber(e.depth)?g.integerAsSingleByteBuffer(e.depth):e.depth,parentFingerPrint:n.isNumber(e.parentFingerPrint)?g.integerAsBuffer(e.parentFingerPrint):e.parentFingerPrint,childIndex:n.isNumber(e.childIndex)?g.integerAsBuffer(e.childIndex):e.childIndex,chainCode:n.isString(e.chainCode)?g.hexToBuffer(e.chainCode):e.chainCode,publicKey:n.isString(e.publicKey)?g.hexToBuffer(e.publicKey):g.isBuffer(e.publicKey)?e.publicKey:e.publicKey.toBuffer(),checksum:n.isNumber(e.checksum)?g.integerAsBuffer(e.checksum):e.checksum};return this._buildFromBuffers(t)},_.prototype._buildFromSerialized=function(e){var t=o.decode(e),r={version:t.slice(_.VersionStart,_.VersionEnd),depth:t.slice(_.DepthStart,_.DepthEnd),parentFingerPrint:t.slice(_.ParentFingerPrintStart,_.ParentFingerPrintEnd),childIndex:t.slice(_.ChildIndexStart,_.ChildIndexEnd),chainCode:t.slice(_.ChainCodeStart,_.ChainCodeEnd),publicKey:t.slice(_.PublicKeyStart,_.PublicKeyEnd),checksum:t.slice(_.ChecksumStart,_.ChecksumEnd),xpubkey:e};return this._buildFromBuffers(r)},_.prototype._buildFromBuffers=function(e){_._validateBufferArguments(e),m.defineImmutable(this,{_buffers:e});var r=[e.version,e.depth,e.parentFingerPrint,e.childIndex,e.chainCode,e.publicKey],n=g.concat(r),i=o.checksum(n);if(e.checksum&&e.checksum.length){if(e.checksum.toString("hex")!==i.toString("hex"))throw new b.InvalidB58Checksum(n,i)}else e.checksum=i;var a,s=h.get(g.integerFromBuffer(e.version));a=o.encode(g.concat(r)),e.xpubkey=new t(a);var f=new p(e.publicKey,{network:s}),c=_.ParentFingerPrintSize,d=u.sha256ripemd160(f.toBuffer()).slice(0,c);return m.defineImmutable(this,{xpubkey:a,network:s,depth:g.integerFromSingleByteBuffer(e.depth),publicKey:f,fingerPrint:d}),this},_._validateBufferArguments=function(e){var t=function(t,r){var n=e[t];y(g.isBuffer(n),t+" argument is not a buffer, it's "+typeof n),y(n.length===r,t+" has not the expected size: found "+n.length+", expected "+r)};t("version",_.VersionSize),t("depth",_.DepthSize),t("parentFingerPrint",_.ParentFingerPrintSize),t("childIndex",_.ChildIndexSize),t("chainCode",_.ChainCodeSize),t("publicKey",_.PublicKeySize),e.checksum&&e.checksum.length&&t("checksum",_.CheckSumSize)},_.fromString=function(e){return i.checkArgument(n.isString(e),"No valid string was provided"),new _(e)},_.fromObject=function(e){return i.checkArgument(n.isObject(e),"No valid argument was provided"),new _(e)},_.prototype.toString=function(){return this.xpubkey},_.prototype.inspect=function(){return"<HDPublicKey: "+this.xpubkey+">"},_.prototype.toObject=_.prototype.toJSON=function(){return{network:h.get(g.integerFromBuffer(this._buffers.version)).name,depth:g.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:g.integerFromBuffer(this.fingerPrint),parentFingerPrint:g.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:g.integerFromBuffer(this._buffers.childIndex),chainCode:g.bufferToHex(this._buffers.chainCode),publicKey:this.publicKey.toString(),checksum:g.integerFromBuffer(this._buffers.checksum),xpubkey:this.xpubkey}},_.fromBuffer=function(e){return new _(e)},_.prototype.toBuffer=function(){return g.copy(this._buffers.xpubkey)},_.Hardened=2147483648,_.RootElementAlias=["m","M"],_.VersionSize=4,_.DepthSize=1,_.ParentFingerPrintSize=4,_.ChildIndexSize=4,_.ChainCodeSize=32,_.PublicKeySize=33,_.CheckSumSize=4,_.DataSize=78,_.SerializedByteSize=82,_.VersionStart=0,_.VersionEnd=_.VersionStart+_.VersionSize,_.DepthStart=_.VersionEnd,_.DepthEnd=_.DepthStart+_.DepthSize,_.ParentFingerPrintStart=_.DepthEnd,_.ParentFingerPrintEnd=_.ParentFingerPrintStart+_.ParentFingerPrintSize,_.ChildIndexStart=_.ParentFingerPrintEnd,_.ChildIndexEnd=_.ChildIndexStart+_.ChildIndexSize,_.ChainCodeStart=_.ChildIndexEnd,_.ChainCodeEnd=_.ChainCodeStart+_.ChainCodeSize,_.PublicKeyStart=_.ChainCodeEnd,_.PublicKeyEnd=_.PublicKeyStart+_.PublicKeySize,_.ChecksumStart=_.PublicKeyEnd,_.ChecksumEnd=_.ChecksumStart+_.CheckSumSize,y(_.PublicKeyEnd===_.DataSize),y(_.ChecksumEnd===_.SerializedByteSize),e.exports=_}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(t){var n=r(1782),i=r(126),a=r(1244),s=r(1161),o=r(1798);e.exports=s(i.ETH_ACCOUNT_SNAPSHOT,(function(e){var r=new n(e),s={balance:r.balance,code:o.equals(r.codeHash)?t.alloc(0):a(i.RAW,r.codeHash),codeHash:r.codeHash,isEmpty:r.isEmpty(),isContract:r.isContract(),nonce:r.nonce,stateRoot:r.stateRoot,storage:a(i.ETH_STORAGE_TRIE,r.stateRoot),_ethObj:r};return Object.defineProperty(s,"_ethObj",{enumerable:!1}),s}))}).call(this,r(3).Buffer)},function(e,t){e.exports=function(e){if("string"!==typeof e)throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof e+", while checking isHexPrefixed.");return"0x"===e.slice(0,2)}},function(e,t,r){var n=r(2),i=r(13),a=r(11),s=r(126),o=r(1793),u=s.KECCAK_256;e.exports=function(e,t){return{deserialize:t,serialize:function(e){return e._ethObj.serialize()},cid:function(){var t=i(n.mark((function t(r,i){var f,c,h,d,p;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f={cidVersion:1,hashAlg:u},c=Object.assign(f,i),t.next=4,o(r,c.hashAlg);case 4:return h=t.sent,d=s.print[e],p=new a(c.cidVersion,d,h),t.abrupt("return",p);case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}}},function(e,t,r){"use strict";var n=r(1799),i=r(126),a=r(1244),s=r(1161);e.exports=s(i.ETH_BLOCK,(function(e){var t=new n(e),r={authorAddress:t.coinbase,bloom:t.bloom,difficulty:t.difficulty,extraData:t.extraData,gasLimit:t.gasLimit,gasUsed:t.gasUsed,mixHash:t.mixHash,nonce:t.nonce,number:t.number,ommerHash:t.uncleHash,ommers:a(i.ETH_BLOCK_LIST,t.uncleHash),parent:a(i.ETH_BLOCK,t.parentHash),parentHash:t.parentHash,state:a(i.ETH_STATE_TRIE,t.stateRoot),stateRoot:t.stateRoot,timestamp:t.timestamp,transactions:a(i.ETH_TX_TRIE,t.transactionsTrie),transactionReceipts:a(i.ETH_TX_RECEIPT_TRIE,t.receiptTrie),transactionReceiptTrieRoot:t.receiptTrie,transactionTrieRoot:t.transactionsTrie,_ethObj:t};return Object.defineProperty(r,"_ethObj",{enumerable:!1}),r}))},function(e,t,r){"use strict";var n=r(1821),i=r(1161),a=r(126);e.exports=i(a.ETH_TX,(function(e){var t=new n(e),r={data:t.data,fromAddress:t.from,gasLimit:t.gasLimit,gasPrice:t.gasPrice,isContractPublish:t.toCreationAddress(),nonce:t.nonce,r:t.r,s:t.s,signature:[t.v,t.r,t.s],toAddress:t.to,v:t.v,value:t.value,_ethObj:t};return Object.defineProperty(r,"_ethObj",{enumerable:!1}),r}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(1574),i=Object.prototype.hasOwnProperty,a=Object.propertyIsEnumerable,s=function(e,t,r){return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})},o=this,u={concatArrays:!1},f=function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),s=0;s<n.length;s++)a.call(e,n[s])&&t.push(n[s]);return t};function c(e){return Array.isArray(e)?function(e){var t=e.slice(0,0);return f(e).forEach((function(r){s(t,r,c(e[r]))})),t}(e):n(e)?function(e){var t=null===Object.getPrototypeOf(e)?Object.create(null):{};return f(e).forEach((function(r){s(t,r,c(e[r]))})),t}(e):e}var h=function(e,t,r,n){return r.forEach((function(r){r in e&&e[r]!==Object.getPrototypeOf(e)?s(e,r,p(e[r],t[r],n)):s(e,r,c(t[r]))})),e},d=function(e,t,r){var n=e.slice(0,0),a=0;return[e,t].forEach((function(t){for(var o=[],u=0;u<t.length;u++)i.call(t,u)&&(o.push(String(u)),s(n,a++,t===e?t[u]:c(t[u])));n=h(n,t,f(t).filter((function(e){return-1===o.indexOf(e)})),r)})),n};function p(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?d(e,t,r):n(t)&&n(e)?h(e,t,f(t),r):c(t)}e.exports=function(){for(var e=p(c(u),this!==o&&this||{},u),t={foobar:{}},r=0;r<arguments.length;r++){var i=arguments[r];if(void 0!==i){if(!n(i))throw new TypeError("`"+i+"` is not an Option Object");t=p(t,{foobar:i},e)}}return t.foobar}},function(e,t,r){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===n.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},function(e,t,r){"use strict";t.util=r(1313),t.resolver=r(1580),t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(3).Buffer,s=r(127),o=r(188),u=r(1577),f=r(1578).fromNumberTo32BitBuf,c=function(e){return function(){var t=i(n.mark((function t(r){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="sha3-224"===t.t0?3:"sha3-256"===t.t0?4:"sha3-384"===t.t0?5:"sha3-512"===t.t0?6:"shake-128"===t.t0?7:"shake-256"===t.t0?8:"keccak-224"===t.t0?9:"keccak-256"===t.t0?10:"keccak-384"===t.t0?11:"keccak-512"===t.t0?12:"murmur3-128"===t.t0?13:"murmur3-32"===t.t0?14:15;break;case 3:return t.abrupt("return",a.from(s.sha3_224.arrayBuffer(r)));case 4:return t.abrupt("return",a.from(s.sha3_256.arrayBuffer(r)));case 5:return t.abrupt("return",a.from(s.sha3_384.arrayBuffer(r)));case 6:return t.abrupt("return",a.from(s.sha3_512.arrayBuffer(r)));case 7:return t.abrupt("return",a.from(s.shake128.create(128).update(r).arrayBuffer()));case 8:return t.abrupt("return",a.from(s.shake256.create(256).update(r).arrayBuffer()));case 9:return t.abrupt("return",a.from(s.keccak224.arrayBuffer(r)));case 10:return t.abrupt("return",a.from(s.keccak256.arrayBuffer(r)));case 11:return t.abrupt("return",a.from(s.keccak384.arrayBuffer(r)));case 12:return t.abrupt("return",a.from(s.keccak512.arrayBuffer(r)));case 13:return t.abrupt("return",a.from(o.x64.hash128(r),"hex"));case 14:return t.abrupt("return",f(o.x86.hash32(r)));case 15:throw new TypeError("".concat(e," is not a supported algorithm"));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};e.exports={sha1:u("sha1"),sha2256:u("sha2-256"),sha2512:u("sha2-512"),dblSha2256:u("dbl-sha2-256"),sha3224:c("sha3-224"),sha3256:c("sha3-256"),sha3384:c("sha3-384"),sha3512:c("sha3-512"),shake128:c("shake-128"),shake256:c("shake-256"),keccak224:c("keccak-224"),keccak256:c("keccak-256"),keccak384:c("keccak-384"),keccak512:c("keccak-512"),murmur3128:c("murmur3-128"),murmur332:c("murmur3-32"),addBlake:r(1579)}},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(3).Buffer,s=self.crypto||self.msCrypto;e.exports=function(e){if("undefined"===typeof self||!self.crypto&&!self.msCrypto)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return function(){var t=i(n.mark((function t(r){var i;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="sha1"===t.t0?3:"sha2-256"===t.t0?8:"sha2-512"===t.t0?13:"dbl-sha2-256"===t.t0?18:26;break;case 3:return t.t1=a,t.next=6,s.subtle.digest({name:"SHA-1"},r);case 6:return t.t2=t.sent,t.abrupt("return",t.t1.from.call(t.t1,t.t2));case 8:return t.t3=a,t.next=11,s.subtle.digest({name:"SHA-256"},r);case 11:return t.t4=t.sent,t.abrupt("return",t.t3.from.call(t.t3,t.t4));case 13:return t.t5=a,t.next=16,s.subtle.digest({name:"SHA-512"},r);case 16:return t.t6=t.sent,t.abrupt("return",t.t5.from.call(t.t5,t.t6));case 18:return t.next=20,s.subtle.digest({name:"SHA-256"},r);case 20:return i=t.sent,t.t7=a,t.next=24,s.subtle.digest({name:"SHA-256"},i);case 24:return t.t8=t.sent,t.abrupt("return",t.t7.from.call(t.t7,t.t8));case 26:throw new Error("".concat(e," is not a supported algorithm"));case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},function(e,t,r){"use strict";var n=r(3).Buffer;e.exports={fromNumberTo32BitBuf:function(e){for(var t=new Array(4),r=0;r<4;r++)t[r]=255&e,e>>=8;return n.from(t)}}},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(3).Buffer,s=r(128),o={init:s.blake2bInit,update:s.blake2bUpdate,digest:s.blake2bFinal},u={init:s.blake2sInit,update:s.blake2sUpdate,digest:s.blake2sFinal},f=function(e,t){return function(){var r=i(n.mark((function r(i){var s;return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=t.init(e,null),t.update(s,i),r.abrupt("return",a.from(t.digest(s)));case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()};e.exports=function(e){for(var t=0;t<64;t++)e[45569+t]=f(t+1,o);for(var r=0;r<32;r++)e[45633+r]=f(r+1,u)}},function(e,t,r){"use strict";(function(e){var n=r(2),i=r(11),a=r(1313);t.resolve=function(e,t){for(var r=a.deserialize(e),n=t.split("/").filter(Boolean);n.length;){var s=n.shift();if(void 0===r[s])throw new Error("Object has no property '".concat(s,"'"));if(r=r[s],i.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}};var s=n.mark((function t(r,a){var s,o,u,f;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isBuffer(r)&&!i.isCID(r)&&"string"!==typeof r&&null!==r){n.next=2;break}return n.abrupt("return");case 2:s=0,o=Object.keys(r);case 3:if(!(s<o.length)){n.next=12;break}return u=o[s],f=void 0===a?u:a+"/"+u,n.next=8,f;case 8:return n.delegateYield(t(r[u],f),"t0",9);case 9:s++,n.next=3;break;case 12:case"end":return n.stop()}}),t)}));t.tree=n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.deserialize(t),e.delegateYield(s(r),"t0",2);case 2:case"end":return e.stop()}}),e)}))}).call(this,r(3).Buffer)},function(e,t,r){"use strict";t.DAGNode=r(1179),t.DAGLink=r(1141),t.resolver=r(1588),t.util=r(1181),t.codec=t.util.codec,t.defaultHashAlg=t.util.defaultHashAlg},function(e,t,r){"use strict";var n=r(185);e.exports=function(e,t,r){[""].concat(n(Object.keys(e))).includes(t)||Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return e._links[r].Hash}})}},function(e,t,r){"use strict";e.exports="// An IPFS MerkleDAG Link\nmessage PBLink {\n\n  // multihash of the target object\n  optional bytes Hash = 1;\n\n  // utf string name. should be unique per object\n  optional string Name = 2;\n\n  // cumulative size of target object\n  optional uint64 Tsize = 3;\n}\n\n// An IPFS MerkleDAG Node\nmessage PBNode {\n\n  // refs to other objects\n  repeated PBLink Links = 2;\n\n  // opaque user data\n  optional bytes Data = 1;\n}"},function(e,t,r){"use strict";var n=r(1141);e.exports.createDagLinkFromB58EncodedHash=function(e){return new n(e.Name||e.name||"",e.Tsize||e.Size||e.size||0,e.Hash||e.hash||e.multihash||e.cid)}},function(e,t,r){"use strict";var n=r(1182),i=n.cloneLinks,a=n.cloneData,s=r(1180);e.exports=function(e){var t=a(e),r=i(e);return s(t,r)}},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(1182),s=a.cloneLinks,o=a.cloneData,u=a.toDAGLink,f=r(1141),c=r(1179),h=r(1180),d=function(){var e=i(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.isDAGLink(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!c.isDAGNode(t)){e.next=4;break}return e.abrupt("return",u(t,{}));case 4:return e.abrupt("return",new f(t.Name||t.name,t.Tsize||t.size,t.Hash||t.multihash||t.hash||t.cid));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=i(n.mark((function e(t,r){var i,a,u;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s(t),a=o(t),e.next=4,d(r);case 4:return u=e.sent,i.push(u),e.abrupt("return",h(a,i));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();e.exports=p},function(e,t,r){"use strict";(function(t){var n=r(1182),i=n.cloneLinks,a=n.cloneData,s=r(1180),o=r(11);e.exports=function(e,r){var n=a(e),u=i(e);if("string"===typeof r)u=u.filter((function(e){return e.Name!==r}));else{if(!t.isBuffer(r)&&!o.isCID(r))throw new Error("second arg needs to be a name or CID");u=u.filter((function(e){return!e.Hash.equals(r)}))}return s(n,u)}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){var n=r(2),i=r(11),a=r(1181);t.resolve=function(e,t){for(var r=a.deserialize(e),n=t.split("/").filter(Boolean);n.length;){var s=n.shift();if(void 0===r[s])throw new Error("Object has no property '".concat(s,"'"));if(r=r[s],i.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}};var s=n.mark((function t(r,a){var s,o,u,f;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isBuffer(r)&&!i.isCID(r)&&"string"!==typeof r&&null!==r){n.next=2;break}return n.abrupt("return");case 2:s=0,o=Object.keys(r);case 3:if(!(s<o.length)){n.next=12;break}return u=o[s],f=void 0===a?u:a+"/"+u,n.next=8,f;case 8:return n.delegateYield(t(r[u],f),"t0",9);case 9:s++,n.next=3;break;case 12:case"end":return n.stop()}}),t)}));t.tree=n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.deserialize(t),e.delegateYield(s(r),"t0",2);case 2:case"end":return e.stop()}}),e)}))}).call(this,r(3).Buffer)},function(e,t,r){!function(e){"use strict";function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function n(e){return i(e)&&"number"===typeof e.length}function i(e){return"object"===typeof e&&null!==e}function a(e){return"undefined"!==typeof e}function s(e){return"function"===typeof e&&/^class /.test(Function.prototype.toString.call(e))}function o(e){if(null===e)return!0;switch(typeof e){case"string":case"number":case"symbol":case"undefined":case"boolean":return!0;default:return!1}}function u(e){if(e){var t=a(Promise)&&e instanceof Promise,r=e.then&&"function"===typeof e.then;return!(!t&&!r)}return!1}function f(e){return!(null===e||!a(e))&&("function"===typeof e[Symbol.iterator]||"function"===typeof e[Symbol.asyncIterator])}function c(e){return"string"===typeof e}function h(e){return"function"===typeof e}var d={isNumber:t,isPlainObject:r,isArrayLike:n,isObject:i,isDefined:a,isClass:s,isPrimitive:o,isPromise:u,isIterable:f,isString:c,isFunction:h};e.default=d,e.isArrayLike=n,e.isClass=s,e.isDefined=a,e.isFunction=h,e.isIterable=f,e.isNumber=t,e.isObject=i,e.isPlainObject=r,e.isPrimitive=o,e.isPromise=u,e.isString=c,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(39);t.first=function(){var e=i(n.mark((function e(t){var r,i,s,o,u,f,c;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,e.prev=2,o=a(t);case 4:return e.next=6,o.next();case 6:return u=e.sent,r=u.done,e.next=10,u.value;case 10:if(f=e.sent,r){e.next=17;break}return c=f,e.abrupt("return",c);case 14:r=!0,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),i=!0,s=e.t0;case 23:if(e.prev=23,e.prev=24,r||null==o.return){e.next=28;break}return e.next=28,o.return();case 28:if(e.prev=28,!i){e.next=31;break}throw s;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])})));return function(t){return e.apply(this,arguments)}}(),t.last=function(){var e=i(n.mark((function e(t){var r,i,s,o,u,f,c;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!0,s=!1,e.prev=2,u=a(t);case 4:return e.next=6,u.next();case 6:return f=e.sent,i=f.done,e.next=10,f.value;case 10:if(c=e.sent,i){e.next=16;break}r=c;case 13:i=!0,e.next=4;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),s=!0,o=e.t0;case 22:if(e.prev=22,e.prev=23,i||null==u.return){e.next=27;break}return e.next=27,u.return();case 27:if(e.prev=27,!s){e.next=30;break}throw o;case 30:return e.finish(27);case 31:return e.finish(22);case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,null,[[2,18,22,32],[23,,27,31]])})));return function(t){return e.apply(this,arguments)}}(),t.all=function(){var e=i(n.mark((function e(t){var r,i,s,o,u,f,c,h;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=!0,s=!1,e.prev=3,u=a(t);case 5:return e.next=7,u.next();case 7:return f=e.sent,i=f.done,e.next=11,f.value;case 11:if(c=e.sent,i){e.next=18;break}h=c,r.push(h);case 15:i=!0,e.next=5;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),s=!0,o=e.t0;case 24:if(e.prev=24,e.prev=25,i||null==u.return){e.next=29;break}return e.next=29,u.return();case 29:if(e.prev=29,!s){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(24);case 34:return e.abrupt("return",r);case 35:case"end":return e.stop()}}),e,null,[[3,20,24,34],[25,,29,33]])})));return function(t){return e.apply(this,arguments)}}(),t.extendIterator=function(e){return e.first=function(){return t.first(e)},e.last=function(){return t.last(e)},e.all=function(){return t.all(e)},e}},function(e,t,r){"use strict";(function(e){var n=r(2),i=r(11),a=r(1316);t.resolve=function(e,t){for(var r=a.deserialize(e),n=t.split("/").filter(Boolean);n.length;){var s=n.shift();if(void 0===r[s])throw new Error("Object has no property '".concat(s,"'"));if(r=r[s],i.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}};var s=n.mark((function t(r,a){var s,o,u,f;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isBuffer(r)&&!i.isCID(r)&&"string"!==typeof r&&null!==r){n.next=2;break}return n.abrupt("return");case 2:s=0,o=Object.keys(r);case 3:if(!(s<o.length)){n.next=12;break}return u=o[s],f=void 0===a?u:a+"/"+u,n.next=8,f;case 8:return n.delegateYield(t(r[u],f),"t0",9);case 9:s++,n.next=3;break;case 12:case"end":return n.stop()}}),t)}));t.tree=n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.deserialize(t),e.delegateYield(s(r),"t0",2);case 2:case"end":return e.stop()}}),e)}))}).call(this,r(3).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1593);t.bip32=n;var i=r(1224);t.address=i;var a=r(1121);t.crypto=a;var s=r(1227);t.ECPair=s;var o=r(1108);t.networks=o;var u=r(1184);t.payments=u;var f=r(1096);t.script=f;var c=r(1629);t.Block=c.Block;var h=r(1631);t.Psbt=h.Psbt;var d=r(1096);t.opcodes=d.OPS;var p=r(1185);t.Transaction=p.Transaction;var l=r(1649);t.TransactionBuilder=l.TransactionBuilder},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1594);t.fromSeed=n.fromSeed,t.fromBase58=n.fromBase58,t.fromPublicKey=n.fromPublicKey,t.fromPrivateKey=n.fromPrivateKey},function(e,t,r){"use strict";(function(e){var n=r(20),i=r(21);Object.defineProperty(t,"__esModule",{value:!0});var a=r(1595),s=r(1150),o=r(1130),u=r(1102),f=r(1323),c=u.BufferN(32),h=u.compile({wif:u.UInt8,bip32:{public:u.UInt32,private:u.UInt32}}),d={wif:128,bip32:{public:76067358,private:76066276}},p=Math.pow(2,31)-1;function l(e){return u.String(e)&&null!==e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function b(e){return u.UInt32(e)&&e<=p}var v=function(){function t(e,r,i,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;n(this,t),this.__D=e,this.__Q=r,this.chainCode=i,this.network=a,this.__DEPTH=s,this.__INDEX=o,this.__PARENT_FINGERPRINT=f,u(h,a),this.lowR=!1}return i(t,[{key:"isNeutered",value:function(){return void 0===this.__D}},{key:"neutered",value:function(){return g(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}},{key:"toBase58",value:function(){var t=this.network,r=this.isNeutered()?t.bip32.public:t.bip32.private,n=e.allocUnsafe(78);return n.writeUInt32BE(r,0),n.writeUInt8(this.depth,4),n.writeUInt32BE(this.parentFingerprint,5),n.writeUInt32BE(this.index,9),this.chainCode.copy(n,13),this.isNeutered()?this.publicKey.copy(n,45):(n.writeUInt8(0,45),this.privateKey.copy(n,46)),s.encode(n)}},{key:"toWIF",value:function(){if(!this.privateKey)throw new TypeError("Missing private key");return f.encode(this.network.wif,this.privateKey,!0)}},{key:"derive",value:function(t){u(u.UInt32,t);var r=t>=2147483648,n=e.allocUnsafe(37);if(r){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");n[0]=0,this.privateKey.copy(n,1),n.writeUInt32BE(t,33)}else this.publicKey.copy(n,0),n.writeUInt32BE(t,33);var i,s=a.hmacSHA512(this.chainCode,n),f=s.slice(0,32),c=s.slice(32);if(!o.isPrivate(f))return this.derive(t+1);if(this.isNeutered()){var h=o.pointAddScalar(this.publicKey,f,!0);if(null===h)return this.derive(t+1);i=g(h,c,this.network,this.depth+1,t,this.fingerprint.readUInt32BE(0))}else{var d=o.privateAdd(this.privateKey,f);if(null==d)return this.derive(t+1);i=m(d,c,this.network,this.depth+1,t,this.fingerprint.readUInt32BE(0))}return i}},{key:"deriveHardened",value:function(e){return u(b,e),this.derive(e+2147483648)}},{key:"derivePath",value:function(e){u(l,e);var t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");t=t.slice(1)}return t.reduce((function(e,t){var r;return"'"===t.slice(-1)?(r=parseInt(t.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(t,10),e.derive(r))}),this)}},{key:"sign",value:function(t,r){if(!this.privateKey)throw new Error("Missing private key");if(void 0===r&&(r=this.lowR),!1===r)return o.sign(t,this.privateKey);for(var n=o.sign(t,this.privateKey),i=e.alloc(32,0),a=0;n[0]>127;)a++,i.writeUIntLE(a,0,6),n=o.signWithEntropy(t,this.privateKey,i);return n}},{key:"verify",value:function(e,t){return o.verify(e,this.publicKey,t)}},{key:"depth",get:function(){return this.__DEPTH}},{key:"index",get:function(){return this.__INDEX}},{key:"parentFingerprint",get:function(){return this.__PARENT_FINGERPRINT}},{key:"publicKey",get:function(){return void 0===this.__Q&&(this.__Q=o.pointFromScalar(this.__D,!0)),this.__Q}},{key:"privateKey",get:function(){return this.__D}},{key:"identifier",get:function(){return a.hash160(this.publicKey)}},{key:"fingerprint",get:function(){return this.identifier.slice(0,4)}}]),t}();function y(e,t,r){return m(e,t,r)}function m(e,t,r,n,i,a){if(u({privateKey:c,chainCode:c},{privateKey:e,chainCode:t}),r=r||d,!o.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new v(e,void 0,t,r,n,i,a)}function g(e,t,r,n,i,a){if(u({publicKey:u.BufferN(33),chainCode:c},{publicKey:e,chainCode:t}),r=r||d,!o.isPoint(e))throw new TypeError("Point is not on the curve");return new v(void 0,e,t,r,n,i,a)}t.fromBase58=function(e,t){var r=s.decode(e);if(78!==r.length)throw new TypeError("Invalid buffer length");t=t||d;var n=r.readUInt32BE(0);if(n!==t.bip32.private&&n!==t.bip32.public)throw new TypeError("Invalid network version");var i=r[4],a=r.readUInt32BE(5);if(0===i&&0!==a)throw new TypeError("Invalid parent fingerprint");var o=r.readUInt32BE(9);if(0===i&&0!==o)throw new TypeError("Invalid index");var u,f=r.slice(13,45);if(n===t.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");u=m(r.slice(46,78),f,t,i,o,a)}else{u=g(r.slice(45,78),f,t,i,o,a)}return u},t.fromPrivateKey=y,t.fromPublicKey=function(e,t,r){return g(e,t,r)},t.fromSeed=function(t,r){if(u(u.Buffer,t),t.length<16)throw new TypeError("Seed should be at least 128 bits");if(t.length>64)throw new TypeError("Seed should be at most 512 bits");r=r||d;var n=a.hmacSHA512(e.from("Bitcoin seed","utf8"),t);return y(n.slice(0,32),n.slice(32),r)}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(485),i=r(489);t.hash160=function(e){var t=n("sha256").update(e).digest();try{return n("rmd160").update(t).digest()}catch(r){return n("ripemd160").update(t).digest()}},t.hmacSHA512=function(e,t){return i("sha512",e).update(t).digest()}},function(e,t,r){"use strict";var n=r(31),i=r(30).Buffer;e.exports=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var r=e(t);return n.encode(i.concat([t,r],t.length+4))},decode:function(e){var r=t(n.decode(e));if(!r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=n.decodeUnsafe(e);if(r)return t(r)}}}},function(e){e.exports=JSON.parse('{"name":"elliptic","version":"6.5.1","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^1.4.3","coveralls":"^3.0.4","grunt":"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.2","jscs":"^3.0.7","jshint":"^2.6.0","mocha":"^6.1.4"},"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.1.tgz","_integrity":"sha512-xvJINNLbTeWQjrl6X+7eQCrIy/YPv5XCpKW6kB5mKvtnGILoLDcySuwomfdzt0BMdLNVnuRNTuzKNHj0bva1Cg==","_from":"elliptic@6.5.1"}')},,function(e,t,r){"use strict";var n=r(1107),i=r(277),a=r(16),s=r(1183),o=n.assert;function u(e){s.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function f(e,t,r,n){s.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function c(e,t,r,n){s.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(u,s),e.exports=u,u.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new i(e.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(t))?r=a[0]:(r=a[1],o(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(r)}}},u.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),r=new i(2).toRed(t).redInvm(),n=r.redNeg(),a=new i(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(a).fromRed(),n.redSub(a).fromRed()]},u.prototype._getEndoBasis=function(e){for(var t,r,n,a,s,o,u,f,c,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=e,p=this.n.clone(),l=new i(1),b=new i(0),v=new i(0),y=new i(1),m=0;0!==d.cmpn(0);){var g=p.div(d);f=p.sub(g.mul(d)),c=v.sub(g.mul(l));var _=y.sub(g.mul(b));if(!n&&f.cmp(h)<0)t=u.neg(),r=l,n=f.neg(),a=c;else if(n&&2===++m)break;u=f,p=d,d=f,v=l,l=c,y=b,b=_}s=f.neg(),o=c;var w=n.sqr().add(a.sqr());return s.sqr().add(o.sqr()).cmp(w)>=0&&(s=t,o=r),n.negative&&(n=n.neg(),a=a.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:n,b:a},{a:s,b:o}]},u.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),a=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),o=a.mul(n.a),u=i.mul(r.b),f=a.mul(n.b);return{k1:e.sub(s).sub(o),k2:u.add(f).neg()}},u.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var a=n.fromRed().isOdd();return(t&&!a||!t&&a)&&(n=n.redNeg()),this.point(e,n)},u.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,a=0;a<e.length;a++){var s=this._endoSplit(t[a]),o=e[a],u=o._getBeta();s.k1.negative&&(s.k1.ineg(),o=o.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),n[2*a]=o,n[2*a+1]=u,i[2*a]=s.k1,i[2*a+1]=s.k2}for(var f=this._wnafMulAdd(1,n,i,2*a,r),c=0;c<2*a;c++)n[c]=null,i[c]=null;return f},a(f,s.BasePoint),u.prototype.point=function(e,t,r){return new f(this,e,t,r)},u.prototype.pointFromJSON=function(e,t){return f.fromJSON(this,e,t)},f.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},f.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},f.fromJSON=function(e,t,r){"string"===typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var a=t[2];return n.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[n].concat(a.doubles.points.map(i))},naf:a.naf&&{wnd:a.naf.wnd,points:[n].concat(a.naf.points.map(i))}},n},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.inf},f.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},f.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),a=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,s)},f.prototype.getX=function(){return this.x.fromRed()},f.prototype.getY=function(){return this.y.fromRed()},f.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},f.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},f.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},f.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},f.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},f.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(c,s.BasePoint),u.prototype.jpoint=function(e,t,r){return new c(this,e,t,r)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),a=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),o=n.redSub(i),u=a.redSub(s);if(0===o.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var f=o.redSqr(),c=f.redMul(o),h=n.redMul(f),d=u.redSqr().redIAdd(c).redISub(h).redISub(h),p=u.redMul(h.redISub(d)).redISub(a.redMul(c)),l=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(d,p,l)},c.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,a=e.y.redMul(t).redMul(this.z),s=r.redSub(n),o=i.redSub(a);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),f=u.redMul(s),c=r.redMul(u),h=o.redSqr().redIAdd(f).redISub(c).redISub(c),d=o.redMul(c.redISub(h)).redISub(i.redMul(f)),p=this.z.redMul(s);return this.curve.jpoint(h,d,p)},c.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var n=this.curve.a,i=this.curve.tinv,a=this.x,s=this.y,o=this.z,u=o.redSqr().redSqr(),f=s.redAdd(s);for(r=0;r<e;r++){var c=a.redSqr(),h=f.redSqr(),d=h.redSqr(),p=c.redAdd(c).redIAdd(c).redIAdd(n.redMul(u)),l=a.redMul(h),b=p.redSqr().redISub(l.redAdd(l)),v=l.redISub(b),y=p.redMul(v);y=y.redIAdd(y).redISub(d);var m=f.redMul(o);r+1<e&&(u=u.redMul(d)),a=b,o=m,f=y}return this.curve.jpoint(a,f.redMul(i),o)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(a);s=s.redIAdd(s);var o=n.redAdd(n).redIAdd(n),u=o.redSqr().redISub(s).redISub(s),f=a.redIAdd(a);f=(f=f.redIAdd(f)).redIAdd(f),e=u,t=o.redMul(s.redISub(u)).redISub(f),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(c).redISub(d);p=p.redIAdd(p);var l=c.redAdd(c).redIAdd(c),b=l.redSqr(),v=d.redIAdd(d);v=(v=v.redIAdd(v)).redIAdd(v),e=b.redISub(p).redISub(p),t=l.redMul(p.redISub(e)).redISub(v),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},c.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(a);s=s.redIAdd(s);var o=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=o.redSqr().redISub(s).redISub(s);e=u;var f=a.redIAdd(a);f=(f=f.redIAdd(f)).redIAdd(f),t=o.redMul(s.redISub(u)).redISub(f),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),p=this.x.redSub(c).redMul(this.x.redAdd(c));p=p.redAdd(p).redIAdd(p);var l=d.redIAdd(d),b=(l=l.redIAdd(l)).redAdd(l);e=p.redSqr().redISub(b),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(c);var v=h.redSqr();v=(v=(v=v.redIAdd(v)).redIAdd(v)).redIAdd(v),t=p.redMul(l.redISub(e)).redISub(v)}return this.curve.jpoint(e,t,r)},c.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),a=t.redSqr(),s=r.redSqr(),o=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(i)),u=t.redAdd(t),f=(u=u.redIAdd(u)).redMul(s),c=o.redSqr().redISub(f.redAdd(f)),h=f.redISub(c),d=s.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var p=o.redMul(h).redISub(d),l=r.redAdd(r).redMul(n);return this.curve.jpoint(c,p,l)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),a=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),o=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(a)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var f=i.redIAdd(s).redSqr().redISub(a).redISub(o).redISub(u),c=t.redMul(f);c=(c=c.redIAdd(c)).redIAdd(c);var h=this.x.redMul(o).redISub(c);h=(h=h.redIAdd(h)).redIAdd(h);var d=this.y.redMul(f.redMul(u.redISub(f)).redISub(s.redMul(o)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var p=this.z.redAdd(s).redSqr().redISub(r).redISub(o);return this.curve.jpoint(h,d,p)},c.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},c.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},c.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,r){"use strict";var n=r(277),i=r(16),a=r(1183),s=r(1107);function o(e){a.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(e,t,r){a.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(o,a),e.exports=o,o.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},i(u,a.BasePoint),o.prototype.decodePoint=function(e,t){return this.point(s.toArray(e,t),1)},o.prototype.point=function(e,t){return new u(this,e,t)},o.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(e,t){return new u(e,t[0],t[1]||e.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(r),s=i.redMul(n),o=t.z.redMul(a.redAdd(s).redSqr()),u=t.x.redMul(a.redISub(s).redSqr());return this.curve.point(o,u)},u.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var a=i.length-1;a>=0;a--)0===i[a]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,r){"use strict";var n=r(1107),i=r(277),a=r(16),s=r(1183),o=n.assert;function u(e){this.twisted=1!==(0|e.a),this.mOneA=this.twisted&&-1===(0|e.a),this.extended=this.mOneA,s.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|e.c)}function f(e,t,r,n,a){s.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=a&&new i(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(u,s),e.exports=u,u.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},u.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},u.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},u.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),a=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=n.redMul(a.redInvm()),o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var u=o.fromRed().isOdd();return(t&&!u||!t&&u)&&(o=o.redNeg()),this.point(e,o)},u.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),a=r.redMul(this.d).redMul(this.c2).redSub(this.a),s=n.redMul(a.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},u.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},a(f,s.BasePoint),u.prototype.pointFromJSON=function(e){return f.fromJSON(this,e)},u.prototype.point=function(e,t,r,n){return new f(this,e,t,r,n)},f.fromJSON=function(e,t){return new f(e,t[0],t[1],t[2])},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},f.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=n.redAdd(t),s=a.redSub(r),o=n.redSub(t),u=i.redMul(s),f=a.redMul(o),c=i.redMul(o),h=s.redMul(a);return this.curve.point(u,f,h,c)},f.prototype._projDbl=function(){var e,t,r,n=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),a=this.y.redSqr();if(this.curve.twisted){var s=(f=this.curve._mulA(i)).redAdd(a);if(this.zOne)e=n.redSub(i).redSub(a).redMul(s.redSub(this.curve.two)),t=s.redMul(f.redSub(a)),r=s.redSqr().redSub(s).redSub(s);else{var o=this.z.redSqr(),u=s.redSub(o).redISub(o);e=n.redSub(i).redISub(a).redMul(u),t=s.redMul(f.redSub(a)),r=s.redMul(u)}}else{var f=i.redAdd(a);o=this.curve._mulC(this.z).redSqr(),u=f.redSub(o).redSub(o);e=this.curve._mulC(n.redISub(f)).redMul(u),t=this.curve._mulC(f).redMul(i.redISub(a)),r=f.redMul(u)}return this.curve.point(e,t,r)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},f.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),a=r.redSub(t),s=i.redSub(n),o=i.redAdd(n),u=r.redAdd(t),f=a.redMul(s),c=o.redMul(u),h=a.redMul(u),d=s.redMul(o);return this.curve.point(f,c,d,h)},f.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),a=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(a).redMul(s),u=i.redSub(o),f=i.redAdd(o),c=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(s),h=n.redMul(u).redMul(c);return this.curve.twisted?(t=n.redMul(f).redMul(s.redSub(this.curve._mulA(a))),r=u.redMul(f)):(t=n.redMul(f).redMul(s.redSub(a)),r=this.curve._mulC(u).redMul(f)),this.curve.point(h,t,r)},f.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},f.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},f.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},f.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},f.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},f.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},f.prototype.getX=function(){return this.normalize(),this.x.fromRed()},f.prototype.getY=function(){return this.normalize(),this.y.fromRed()},f.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},f.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},f.prototype.toP=f.prototype.normalize,f.prototype.mixedAdd=f.prototype.add},function(e,t,r){"use strict";t.sha1=r(1603),t.sha224=r(1604),t.sha256=r(1320),t.sha384=r(1605),t.sha512=r(1321)},function(e,t,r){"use strict";var n=r(1117),i=r(1152),a=r(1319),s=n.rotl32,o=n.sum32,u=n.sum32_5,f=a.ft_1,c=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(d,c),e.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=s(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],a=this.h[1],c=this.h[2],d=this.h[3],p=this.h[4];for(n=0;n<r.length;n++){var l=~~(n/20),b=u(s(i,5),f(l,a,c,d),p,r[n],h[l]);p=d,d=c,c=s(a,30),a=i,i=b}this.h[0]=o(this.h[0],i),this.h[1]=o(this.h[1],a),this.h[2]=o(this.h[2],c),this.h[3]=o(this.h[3],d),this.h[4]=o(this.h[4],p)},d.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(e,t,r){"use strict";var n=r(1117),i=r(1320);function a(){if(!(this instanceof a))return new a;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(a,i),e.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(e,t,r){"use strict";var n=r(1117),i=r(1321);function a(){if(!(this instanceof a))return new a;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(a,i),e.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(e,t,r){"use strict";var n=r(1117),i=r(1152),a=n.rotl32,s=n.sum32,o=n.sum32_3,u=n.sum32_4,f=i.BlockHash;function c(){if(!(this instanceof c))return new c;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function d(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function p(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(c,f),t.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],f=this.h[3],c=this.h[4],m=r,g=n,_=i,w=f,S=c,k=0;k<80;k++){var E=s(a(u(r,h(k,n,i,f),e[l[k]+t],d(k)),v[k]),c);r=c,c=f,f=a(i,10),i=n,n=E,E=s(a(u(m,h(79-k,g,_,w),e[b[k]+t],p(k)),y[k]),S),m=S,S=w,w=a(_,10),_=g,g=E}E=o(this.h[1],i,w),this.h[1]=o(this.h[2],f,S),this.h[2]=o(this.h[3],c,m),this.h[3]=o(this.h[4],r,g),this.h[4]=o(this.h[0],n,_),this.h[0]=E},c.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,r){"use strict";var n=r(1117),i=r(484);function a(e,t,r){if(!(this instanceof a))return new a(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=a,a.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},a.prototype.update=function(e,t){return this.inner.update(e,t),this},a.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,r){"use strict";var n=r(277),i=r(1610),a=r(1107),s=r(1221),o=r(1220),u=a.assert,f=r(1611),c=r(1612);function h(e){if(!(this instanceof h))return new h(e);"string"===typeof e&&(u(s.hasOwnProperty(e),"Unknown curve "+e),e=s[e]),e instanceof s.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=h,h.prototype.keyPair=function(e){return new f(this,e)},h.prototype.keyFromPrivate=function(e,t){return f.fromPrivate(this,e,t)},h.prototype.keyFromPublic=function(e,t){return f.fromPublic(this,e,t)},h.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||o(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),a=this.n.sub(new n(2));;){var s=new n(t.generate(r));if(!(s.cmp(a)>0))return s.iaddn(1),this.keyFromPrivate(s)}},h.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},h.prototype.sign=function(e,t,r,a){"object"===typeof r&&(a=r,r=null),a||(a={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new n(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),u=e.toArray("be",s),f=new i({hash:this.hash,entropy:o,nonce:u,pers:a.pers,persEnc:a.persEnc||"utf8"}),h=this.n.sub(new n(1)),d=0;;d++){var p=a.k?a.k(d):new n(f.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(h)>=0)){var l=this.g.mul(p);if(!l.isInfinity()){var b=l.getX(),v=b.umod(this.n);if(0!==v.cmpn(0)){var y=p.invm(this.n).mul(v.mul(t.getPrivate()).iadd(e));if(0!==(y=y.umod(this.n)).cmpn(0)){var m=(l.getY().isOdd()?1:0)|(0!==b.cmp(v)?2:0);return a.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),m^=1),new c({r:v,s:y,recoveryParam:m})}}}}}},h.prototype.verify=function(e,t,r,i){e=this._truncateToN(new n(e,16)),r=this.keyFromPublic(r,i);var a=(t=new c(t,"hex")).r,s=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,u=s.invm(this.n),f=u.mul(e).umod(this.n),h=u.mul(a).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(f,r.getPublic(),h)).isInfinity()&&o.eqXToP(a):!(o=this.g.mulAdd(f,r.getPublic(),h)).isInfinity()&&0===o.getX().umod(this.n).cmp(a)},h.prototype.recoverPubKey=function(e,t,r,i){u((3&r)===r,"The recovery param is more than two bits"),t=new c(t,i);var a=this.n,s=new n(e),o=t.r,f=t.s,h=1&r,d=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");o=d?this.curve.pointFromX(o.add(this.curve.n),h):this.curve.pointFromX(o,h);var p=t.r.invm(a),l=a.sub(s).mul(p).umod(a),b=f.mul(p).umod(a);return this.g.mulAdd(l,o,b)},h.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new c(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var a;try{a=this.recoverPubKey(e,t,i)}catch(e){continue}if(a.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},function(e,t,r){"use strict";var n=r(1222),i=r(1317),a=r(484);function s(e){if(!(this instanceof s))return new s(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),r=i.toArray(e.nonce,e.nonceEnc||"hex"),n=i.toArray(e.pers,e.persEnc||"hex");a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}e.exports=s,s.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},s.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(e,t,r,n){"string"!==typeof t&&(n=r,r=t,t=null),e=i.toArray(e,t),r=i.toArray(r,n),a(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},s.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(n=r,r=t,t=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var s=a.slice(0,e);return this._update(r),this._reseed++,i.encode(s,t)}},function(e,t,r){"use strict";var n=r(277),i=r(1107).assert;function a(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=a,a.fromPublic=function(e,t,r){return t instanceof a?t:new a(e,{pub:t,pubEnc:r})},a.fromPrivate=function(e,t,r){return t instanceof a?t:new a(e,{priv:t,privEnc:r})},a.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},a.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},a.prototype.derive=function(e){return e.mul(this.priv).getX()},a.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},a.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,r){"use strict";var n=r(277),i=r(1107),a=i.assert;function s(e,t){if(e instanceof s)return e;this._importDER(e,t)||(a(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function o(){this.place=0}function u(e,t){var r=e[t.place++];if(!(128&r))return r;for(var n=15&r,i=0,a=0,s=t.place;a<n;a++,s++)i<<=8,i|=e[s];return t.place=s,i}function f(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function c(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}e.exports=s,s.prototype._importDER=function(e,t){e=i.toArray(e,t);var r=new o;if(48!==e[r.place++])return!1;if(u(e,r)+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var a=u(e,r),s=e.slice(r.place,a+r.place);if(r.place+=a,2!==e[r.place++])return!1;var f=u(e,r);if(e.length!==f+r.place)return!1;var c=e.slice(r.place,f+r.place);return 0===s[0]&&128&s[1]&&(s=s.slice(1)),0===c[0]&&128&c[1]&&(c=c.slice(1)),this.r=new n(s),this.s=new n(c),this.recoveryParam=null,!0},s.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=f(t),r=f(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];c(n,t.length),(n=n.concat(t)).push(2),c(n,r.length);var a=n.concat(r),s=[48];return c(s,a.length),s=s.concat(a),i.encode(s,e)}},function(e,t,r){"use strict";var n=r(1222),i=r(1221),a=r(1107),s=a.assert,o=a.parseBytes,u=r(1614),f=r(1615);function c(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof c))return new c(e);e=i[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}e.exports=c,c.prototype.sign=function(e,t){e=o(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),a=this.encodePoint(i),s=this.hashInt(a,r.pubBytes(),e).mul(r.priv()),u=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:a})},c.prototype.verify=function(e,t,r){e=o(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(a)},c.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return a.intFromLE(e.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(e){return u.fromPublic(this,e)},c.prototype.keyFromSecret=function(e){return u.fromSecret(this,e)},c.prototype.makeSignature=function(e){return e instanceof f?e:new f(this,e)},c.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},c.prototype.decodePoint=function(e){var t=(e=a.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!==(128&e[t]),i=a.intFromLE(r);return this.curve.pointFromY(i,n)},c.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(e){return a.intFromLE(e)},c.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,r){"use strict";var n=r(1107),i=n.assert,a=n.parseBytes,s=n.cachedProperty;function o(e,t){this.eddsa=e,this._secret=a(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=a(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},s(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),s(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},o.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},e.exports=o},function(e,t,r){"use strict";var n=r(277),i=r(1107),a=i.assert,s=i.cachedProperty,o=i.parseBytes;function u(e,t){this.eddsa=e,"object"!==typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=u},function(e,t,r){(function(t){var n=r(489),i=t.alloc(1,1),a=t.alloc(1,0);e.exports=function(e,r,s,o,u){var f=t.alloc(32,0),c=t.alloc(32,1);f=n("sha256",f).update(c).update(a).update(r).update(e).update(u||"").digest(),c=n("sha256",f).update(c).digest(),f=n("sha256",f).update(c).update(i).update(r).update(e).update(u||"").digest(),c=n("sha256",f).update(c).digest();for(var h=c=n("sha256",f).update(c).digest();!o(h)||!s(h);)f=n("sha256",f).update(c).update(a).digest(),c=n("sha256",f).update(c).digest(),h=c=n("sha256",f).update(c).digest();return h}}).call(this,r(3).Buffer)},function(e,t,r){(function(t){var n=r(1223),i=r(1322);function a(e){return t.isBuffer(e)}function s(e){return"string"===typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function o(e,t){var r=e.toJSON();function n(n){if(!e(n))return!1;if(n.length===t)return!0;throw i.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+n.length+")")}return n.toJSON=function(){return r},n}var u=o.bind(null,n.Array),f=o.bind(null,a),c=o.bind(null,s),h=o.bind(null,n.String);var d=Math.pow(2,53)-1;var p={ArrayN:u,Buffer:a,BufferN:f,Finite:function(e){return"number"===typeof e&&isFinite(e)},Hex:s,HexN:c,Int8:function(e){return e<<24>>24===e},Int16:function(e){return e<<16>>16===e},Int32:function(e){return(0|e)===e},Int53:function(e){return"number"===typeof e&&e>=-d&&e<=d&&Math.floor(e)===e},Range:function(e,t,r){function i(n,i){return r(n,i)&&n>e&&n<t}return r=r||n.Number,i.toJSON=function(){return"".concat(r.toJSON()," between [").concat(e,", ").concat(t,"]")},i},StringN:h,UInt8:function(e){return(255&e)===e},UInt16:function(e){return(65535&e)===e},UInt32:function(e){return e>>>0===e},UInt53:function(e){return"number"===typeof e&&e>=0&&e<=d&&Math.floor(e)===e}};for(var l in p)p[l].toJSON=function(e){return e}.bind(null,l);e.exports=p}).call(this,r(3).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1108),i=r(1096),a=r(1131),s=r(1102),o=i.OPS;t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),s({network:s.maybe(s.Object),output:s.maybe(s.Buffer),data:s.maybe(s.arrayOf(s.Buffer))},e);var r={name:"embed",network:e.network||n.bitcoin};if(a.prop(r,"output",(function(){if(e.data)return i.compile([o.OP_RETURN].concat(e.data))})),a.prop(r,"data",(function(){if(e.output)return i.decompile(e.output).slice(1)})),t.validate&&e.output){var u=i.decompile(e.output);if(u[0]!==o.OP_RETURN)throw new TypeError("Output is invalid");if(!u.slice(1).every(s.Buffer))throw new TypeError("Output is invalid");if(e.data&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(e.data,r.data))throw new TypeError("Data mismatch")}return Object.assign(r,e)}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e,t,r){t=t||4,r=void 0===r||r;var n=e.length;if(0===n)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&0===(127&e[n-1])&&(n<=1||0===(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){var i=e.readUInt32LE(0),a=e.readUInt8(4);return 128&a?-(4294967296*(-129&a)+i):4294967296*a+i}for(var s=0,o=0;o<n;++o)s|=e[o]<<8*o;return 128&e[n-1]?-(s&~(128<<8*(n-1))):s},t.encode=function(t){for(var r=Math.abs(t),n=function(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}(r),i=e.allocUnsafe(n),a=t<0,s=0;s<n;++s)i.writeUInt8(255&r,s),r>>=8;return 128&i[n-1]?i.writeUInt8(a?128:0,n-1):a&&(i[n-1]|=128),i}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1120),i=r(496),a=r(1102),s=e.alloc(1,0);function o(t){for(var r=0;0===t[r];)++r;return r===t.length?s:128&(t=t.slice(r))[0]?e.concat([s,t],1+t.length):t}function u(t){0===t[0]&&(t=t.slice(1));var r=e.alloc(32,0),n=Math.max(0,32-t.length);return t.copy(r,n),r}t.decode=function(t){var r=t.readUInt8(t.length-1),n=-129&r;if(n<=0||n>=4)throw new Error("Invalid hashType "+r);var a=i.decode(t.slice(0,-1)),s=u(a.r),o=u(a.s);return{signature:e.concat([s,o],64),hashType:r}},t.encode=function(t,r){a({signature:n.BufferN(64),hashType:n.UInt8},{signature:t,hashType:r});var s=-129&r;if(s<=0||s>=4)throw new Error("Invalid hashType "+r);var u=e.allocUnsafe(1);u.writeUInt8(r,0);var f=o(t.slice(0,32)),c=o(t.slice(32,64));return e.concat([i.encode(f,c),u])}}).call(this,r(3).Buffer)},function(e,t,r){var n=r(1225);function i(e){return e<n.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}e.exports={encodingLength:i,encode:function(e,t,r){var a=i(t);return 1===a?e.writeUInt8(t,r):2===a?(e.writeUInt8(n.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===a?(e.writeUInt8(n.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(n.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),a},decode:function(e,t){var r,i,a=e.readUInt8(t);if(a<n.OP_PUSHDATA1)r=a,i=1;else if(a===n.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),i=2}else if(a===n.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(a!==n.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=e.readUInt32LE(t+1),i=5}return{opcode:a,number:r,size:i}}}},function(e,t,r){var n=r(1225),i={};for(var a in n){i[n[a]]=a}e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1108),i=r(1096),a=r(1131),s=i.OPS,o=r(1102),u=r(1130),f=s.OP_RESERVED;function c(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}t.p2ms=function(e,t){if(!e.input&&!e.output&&(!e.pubkeys||void 0===e.m)&&!e.signatures)throw new TypeError("Not enough data");function r(e){return i.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===s.OP_0)}t=Object.assign({validate:!0},t||{}),o({network:o.maybe(o.Object),m:o.maybe(o.Number),n:o.maybe(o.Number),output:o.maybe(o.Buffer),pubkeys:o.maybe(o.arrayOf(u.isPoint)),signatures:o.maybe(o.arrayOf(r)),input:o.maybe(o.Buffer)},e);var h={network:e.network||n.bitcoin},d=[],p=!1;function l(e){p||(p=!0,d=i.decompile(e),h.m=d[0]-f,h.n=d[d.length-2]-f,h.pubkeys=d.slice(1,-2))}if(a.prop(h,"output",(function(){if(e.m&&h.n&&e.pubkeys)return i.compile([].concat(f+e.m,e.pubkeys,f+h.n,s.OP_CHECKMULTISIG))})),a.prop(h,"m",(function(){if(h.output)return l(h.output),h.m})),a.prop(h,"n",(function(){if(h.pubkeys)return h.pubkeys.length})),a.prop(h,"pubkeys",(function(){if(e.output)return l(e.output),h.pubkeys})),a.prop(h,"signatures",(function(){if(e.input)return i.decompile(e.input).slice(1)})),a.prop(h,"input",(function(){if(e.signatures)return i.compile([s.OP_0].concat(e.signatures))})),a.prop(h,"witness",(function(){if(h.input)return[]})),a.prop(h,"name",(function(){if(h.m&&h.n)return"p2ms(".concat(h.m," of ").concat(h.n,")")})),t.validate){if(e.output){if(l(e.output),!o.Number(d[0]))throw new TypeError("Output is invalid");if(!o.Number(d[d.length-2]))throw new TypeError("Output is invalid");if(d[d.length-1]!==s.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(h.m<=0||h.n>16||h.m>h.n||h.n!==d.length-3)throw new TypeError("Output is invalid");if(!h.pubkeys.every((function(e){return u.isPoint(e)})))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==h.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==h.n)throw new TypeError("n mismatch");if(e.pubkeys&&!c(e.pubkeys,h.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(h.n=e.pubkeys.length,h.n<h.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<h.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>h.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==s.OP_0)throw new TypeError("Input is invalid");if(0===h.signatures.length||!h.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!c(e.signatures,h.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(h,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1108),i=r(1096),a=r(1131),s=r(1102),o=i.OPS,u=r(1130);t.p2pk=function(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),s({network:s.maybe(s.Object),output:s.maybe(s.Buffer),pubkey:s.maybe(u.isPoint),signature:s.maybe(i.isCanonicalScriptSignature),input:s.maybe(s.Buffer)},e);var r=a.value((function(){return i.decompile(e.input)})),f={name:"p2pk",network:e.network||n.bitcoin};if(a.prop(f,"output",(function(){if(e.pubkey)return i.compile([e.pubkey,o.OP_CHECKSIG])})),a.prop(f,"pubkey",(function(){if(e.output)return e.output.slice(1,-1)})),a.prop(f,"signature",(function(){if(e.input)return r()[0]})),a.prop(f,"input",(function(){if(e.signature)return i.compile([e.signature])})),a.prop(f,"witness",(function(){if(f.input)return[]})),t.validate){if(e.output){if(e.output[e.output.length-1]!==o.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!u.isPoint(f.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(f.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(f.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==r().length)throw new TypeError("Input is invalid");if(!i.isCanonicalScriptSignature(f.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(f,e)}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1121),i=r(1108),a=r(1096),s=r(1131),o=r(1102),u=a.OPS,f=r(1130),c=r(1150);t.p2pkh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),o({network:o.maybe(o.Object),address:o.maybe(o.String),hash:o.maybe(o.BufferN(20)),output:o.maybe(o.BufferN(25)),pubkey:o.maybe(f.isPoint),signature:o.maybe(a.isCanonicalScriptSignature),input:o.maybe(o.Buffer)},t);var h=s.value((function(){var e=c.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}})),d=s.value((function(){return a.decompile(t.input)})),p=t.network||i.bitcoin,l={name:"p2pkh",network:p};if(s.prop(l,"address",(function(){if(l.hash){var t=e.allocUnsafe(21);return t.writeUInt8(p.pubKeyHash,0),l.hash.copy(t,1),c.encode(t)}})),s.prop(l,"hash",(function(){return t.output?t.output.slice(3,23):t.address?h().hash:t.pubkey||l.pubkey?n.hash160(t.pubkey||l.pubkey):void 0})),s.prop(l,"output",(function(){if(l.hash)return a.compile([u.OP_DUP,u.OP_HASH160,l.hash,u.OP_EQUALVERIFY,u.OP_CHECKSIG])})),s.prop(l,"pubkey",(function(){if(t.input)return d()[1]})),s.prop(l,"signature",(function(){if(t.input)return d()[0]})),s.prop(l,"input",(function(){if(t.pubkey&&t.signature)return a.compile([t.signature,t.pubkey])})),s.prop(l,"witness",(function(){if(l.input)return[]})),r.validate){var b=e.from([]);if(t.address){if(h().version!==p.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==h().hash.length)throw new TypeError("Invalid address");b=h().hash}if(t.hash){if(b.length>0&&!b.equals(t.hash))throw new TypeError("Hash mismatch");b=t.hash}if(t.output){if(25!==t.output.length||t.output[0]!==u.OP_DUP||t.output[1]!==u.OP_HASH160||20!==t.output[2]||t.output[23]!==u.OP_EQUALVERIFY||t.output[24]!==u.OP_CHECKSIG)throw new TypeError("Output is invalid");var v=t.output.slice(3,23);if(b.length>0&&!b.equals(v))throw new TypeError("Hash mismatch");b=v}if(t.pubkey){var y=n.hash160(t.pubkey);if(b.length>0&&!b.equals(y))throw new TypeError("Hash mismatch");b=y}if(t.input){var m=d();if(2!==m.length)throw new TypeError("Input is invalid");if(!a.isCanonicalScriptSignature(m[0]))throw new TypeError("Input has invalid signature");if(!f.isPoint(m[1]))throw new TypeError("Input has invalid pubkey");if(t.signature&&!t.signature.equals(m[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(m[1]))throw new TypeError("Pubkey mismatch");var g=n.hash160(m[1]);if(b.length>0&&!b.equals(g))throw new TypeError("Hash mismatch")}}return Object.assign(l,t)}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1121),i=r(1108),a=r(1096),s=r(1131),o=r(1102),u=a.OPS,f=r(1150);t.p2sh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),o({network:o.maybe(o.Object),address:o.maybe(o.String),hash:o.maybe(o.BufferN(20)),output:o.maybe(o.BufferN(23)),redeem:o.maybe({network:o.maybe(o.Object),output:o.maybe(o.Buffer),input:o.maybe(o.Buffer),witness:o.maybe(o.arrayOf(o.Buffer))}),input:o.maybe(o.Buffer),witness:o.maybe(o.arrayOf(o.Buffer))},t);var c=t.network;c||(c=t.redeem&&t.redeem.network||i.bitcoin);var h={network:c},d=s.value((function(){var e=f.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}})),p=s.value((function(){return a.decompile(t.input)})),l=s.value((function(){var e=p();return{network:c,output:e[e.length-1],input:a.compile(e.slice(0,-1)),witness:t.witness||[]}}));if(s.prop(h,"address",(function(){if(h.hash){var t=e.allocUnsafe(21);return t.writeUInt8(h.network.scriptHash,0),h.hash.copy(t,1),f.encode(t)}})),s.prop(h,"hash",(function(){return t.output?t.output.slice(2,22):t.address?d().hash:h.redeem&&h.redeem.output?n.hash160(h.redeem.output):void 0})),s.prop(h,"output",(function(){if(h.hash)return a.compile([u.OP_HASH160,h.hash,u.OP_EQUAL])})),s.prop(h,"redeem",(function(){if(t.input)return l()})),s.prop(h,"input",(function(){if(t.redeem&&t.redeem.input&&t.redeem.output)return a.compile([].concat(a.decompile(t.redeem.input),t.redeem.output))})),s.prop(h,"witness",(function(){return h.redeem&&h.redeem.witness?h.redeem.witness:h.input?[]:void 0})),s.prop(h,"name",(function(){var e=["p2sh"];return void 0!==h.redeem&&e.push(h.redeem.name),e.join("-")})),r.validate){var b=e.from([]);if(t.address){if(d().version!==c.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==d().hash.length)throw new TypeError("Invalid address");b=d().hash}if(t.hash){if(b.length>0&&!b.equals(t.hash))throw new TypeError("Hash mismatch");b=t.hash}if(t.output){if(23!==t.output.length||t.output[0]!==u.OP_HASH160||20!==t.output[1]||t.output[22]!==u.OP_EQUAL)throw new TypeError("Output is invalid");var v=t.output.slice(2,22);if(b.length>0&&!b.equals(v))throw new TypeError("Hash mismatch");b=v}var y=function(e){if(e.output){var t=a.decompile(e.output);if(!t||t.length<1)throw new TypeError("Redeem.output too short");var r=n.hash160(e.output);if(b.length>0&&!b.equals(r))throw new TypeError("Hash mismatch");b=r}if(e.input){var i=e.input.length>0,s=e.witness&&e.witness.length>0;if(!i&&!s)throw new TypeError("Empty input");if(i&&s)throw new TypeError("Input and witness provided");if(i){var o=a.decompile(e.input);if(!a.isPushOnly(o))throw new TypeError("Non push-only scriptSig")}}};if(t.input){var m=p();if(!m||m.length<1)throw new TypeError("Input too short");if(!e.isBuffer(l().output))throw new TypeError("Input is invalid");y(l())}if(t.redeem){if(t.redeem.network&&t.redeem.network!==c)throw new TypeError("Network mismatch");if(t.input){var g=l();if(t.redeem.output&&!t.redeem.output.equals(g.output))throw new TypeError("Redeem.output mismatch");if(t.redeem.input&&!t.redeem.input.equals(g.input))throw new TypeError("Redeem.input mismatch")}y(t.redeem)}if(t.witness&&t.redeem&&t.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(t.redeem.witness,t.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(h,t)}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1121),i=r(1108),a=r(1096),s=r(1131),o=r(1102),u=a.OPS,f=r(1130),c=r(1226),h=e.alloc(0);t.p2wpkh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.pubkey&&!t.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),o({address:o.maybe(o.String),hash:o.maybe(o.BufferN(20)),input:o.maybe(o.BufferN(0)),network:o.maybe(o.Object),output:o.maybe(o.BufferN(22)),pubkey:o.maybe(f.isPoint),signature:o.maybe(a.isCanonicalScriptSignature),witness:o.maybe(o.arrayOf(o.Buffer))},t);var d=s.value((function(){var r=c.decode(t.address),n=r.words.shift(),i=c.fromWords(r.words);return{version:n,prefix:r.prefix,data:e.from(i)}})),p=t.network||i.bitcoin,l={name:"p2wpkh",network:p};if(s.prop(l,"address",(function(){if(l.hash){var e=c.toWords(l.hash);return e.unshift(0),c.encode(p.bech32,e)}})),s.prop(l,"hash",(function(){return t.output?t.output.slice(2,22):t.address?d().data:t.pubkey||l.pubkey?n.hash160(t.pubkey||l.pubkey):void 0})),s.prop(l,"output",(function(){if(l.hash)return a.compile([u.OP_0,l.hash])})),s.prop(l,"pubkey",(function(){return t.pubkey?t.pubkey:t.witness?t.witness[1]:void 0})),s.prop(l,"signature",(function(){if(t.witness)return t.witness[0]})),s.prop(l,"input",(function(){if(l.witness)return h})),s.prop(l,"witness",(function(){if(t.pubkey&&t.signature)return[t.signature,t.pubkey]})),r.validate){var b=e.from([]);if(t.address){if(p&&p.bech32!==d().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==d().version)throw new TypeError("Invalid address version");if(20!==d().data.length)throw new TypeError("Invalid address data");b=d().data}if(t.hash){if(b.length>0&&!b.equals(t.hash))throw new TypeError("Hash mismatch");b=t.hash}if(t.output){if(22!==t.output.length||t.output[0]!==u.OP_0||20!==t.output[1])throw new TypeError("Output is invalid");if(b.length>0&&!b.equals(t.output.slice(2)))throw new TypeError("Hash mismatch");b=t.output.slice(2)}if(t.pubkey){var v=n.hash160(t.pubkey);if(b.length>0&&!b.equals(v))throw new TypeError("Hash mismatch");b=v}if(t.witness){if(2!==t.witness.length)throw new TypeError("Witness is invalid");if(!a.isCanonicalScriptSignature(t.witness[0]))throw new TypeError("Witness has invalid signature");if(!f.isPoint(t.witness[1]))throw new TypeError("Witness has invalid pubkey");if(t.signature&&!t.signature.equals(t.witness[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(t.witness[1]))throw new TypeError("Pubkey mismatch");var y=n.hash160(t.witness[1]);if(b.length>0&&!b.equals(y))throw new TypeError("Hash mismatch")}}return Object.assign(l,t)}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1121),i=r(1108),a=r(1096),s=r(1131),o=r(1102),u=a.OPS,f=r(1226),c=e.alloc(0);t.p2wsh=function(t,r){if(!t.address&&!t.hash&&!t.output&&!t.redeem&&!t.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),o({network:o.maybe(o.Object),address:o.maybe(o.String),hash:o.maybe(o.BufferN(32)),output:o.maybe(o.BufferN(34)),redeem:o.maybe({input:o.maybe(o.Buffer),network:o.maybe(o.Object),output:o.maybe(o.Buffer),witness:o.maybe(o.arrayOf(o.Buffer))}),input:o.maybe(o.BufferN(0)),witness:o.maybe(o.arrayOf(o.Buffer))},t);var h=s.value((function(){var r=f.decode(t.address),n=r.words.shift(),i=f.fromWords(r.words);return{version:n,prefix:r.prefix,data:e.from(i)}})),d=s.value((function(){return a.decompile(t.redeem.input)})),p=t.network;p||(p=t.redeem&&t.redeem.network||i.bitcoin);var l={network:p};if(s.prop(l,"address",(function(){if(l.hash){var e=f.toWords(l.hash);return e.unshift(0),f.encode(p.bech32,e)}})),s.prop(l,"hash",(function(){return t.output?t.output.slice(2):t.address?h().data:l.redeem&&l.redeem.output?n.sha256(l.redeem.output):void 0})),s.prop(l,"output",(function(){if(l.hash)return a.compile([u.OP_0,l.hash])})),s.prop(l,"redeem",(function(){if(t.witness)return{output:t.witness[t.witness.length-1],input:c,witness:t.witness.slice(0,-1)}})),s.prop(l,"input",(function(){if(l.witness)return c})),s.prop(l,"witness",(function(){if(t.redeem&&t.redeem.input&&t.redeem.input.length>0&&t.redeem.output&&t.redeem.output.length>0){var e=a.toStack(d());return l.redeem=Object.assign({witness:e},t.redeem),l.redeem.input=c,[].concat(e,t.redeem.output)}if(t.redeem&&t.redeem.output&&t.redeem.witness)return[].concat(t.redeem.witness,t.redeem.output)})),s.prop(l,"name",(function(){var e=["p2wsh"];return void 0!==l.redeem&&e.push(l.redeem.name),e.join("-")})),r.validate){var b=e.from([]);if(t.address){if(h().prefix!==p.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==h().version)throw new TypeError("Invalid address version");if(32!==h().data.length)throw new TypeError("Invalid address data");b=h().data}if(t.hash){if(b.length>0&&!b.equals(t.hash))throw new TypeError("Hash mismatch");b=t.hash}if(t.output){if(34!==t.output.length||t.output[0]!==u.OP_0||32!==t.output[1])throw new TypeError("Output is invalid");var v=t.output.slice(2);if(b.length>0&&!b.equals(v))throw new TypeError("Hash mismatch");b=v}if(t.redeem){if(t.redeem.network&&t.redeem.network!==p)throw new TypeError("Network mismatch");if(t.redeem.input&&t.redeem.input.length>0&&t.redeem.witness&&t.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(t.redeem.output){if(0===a.decompile(t.redeem.output).length)throw new TypeError("Redeem.output is invalid");var y=n.sha256(t.redeem.output);if(b.length>0&&!b.equals(y))throw new TypeError("Hash mismatch");b=y}if(t.redeem.input&&!a.isPushOnly(d()))throw new TypeError("Non push-only scriptSig");if(t.witness&&t.redeem.witness&&!function(e,t){return e.length===t.length&&e.every((function(e,r){return e.equals(t[r])}))}(t.witness,t.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch")}if(t.witness&&t.redeem&&t.redeem.output&&!t.redeem.output.equals(t.witness[t.witness.length-1]))throw new TypeError("Witness and redeem.output mismatch")}return Object.assign(l,t)}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){var n=r(20),i=r(21);Object.defineProperty(t,"__esModule",{value:!0});var a=r(1153),s=r(1121),o=r(1185),u=r(1120),f=r(1630),c=r(1102),h=r(1324),d=new TypeError("Cannot compute merkle root for zero transactions"),p=new TypeError("Cannot compute witness commit for non-segwit block"),l=function(){function t(){n(this,t),this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}return i(t,[{key:"getWitnessCommit",value:function(){if(!b(this.transactions))return null;var t=this.transactions[0].outs.filter((function(t){return t.script.slice(0,6).equals(e.from("6a24aa21a9ed","hex"))})).map((function(e){return e.script.slice(6,38)}));if(0===t.length)return null;var r=t[t.length-1];return r instanceof e&&32===r.length?r:null}},{key:"hasWitnessCommit",value:function(){return this.witnessCommit instanceof e&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}},{key:"hasWitness",value:function(){return(e=this.transactions)instanceof Array&&e.some((function(e){return"object"===typeof e&&e.ins instanceof Array&&e.ins.some((function(e){return"object"===typeof e&&e.witness instanceof Array&&e.witness.length>0}))}));var e}},{key:"byteLength",value:function(e){return e||!this.transactions?80:80+h.encodingLength(this.transactions.length)+this.transactions.reduce((function(e,t){return e+t.byteLength()}),0)}},{key:"getHash",value:function(){return s.hash256(this.toBuffer(!0))}},{key:"getId",value:function(){return a.reverseBuffer(this.getHash()).toString("hex")}},{key:"getUTCDate",value:function(){var e=new Date(0);return e.setUTCSeconds(this.timestamp),e}},{key:"toBuffer",value:function(t){var r,n=e.allocUnsafe(this.byteLength(t)),i=0,a=function(e){e.copy(n,i),i+=e.length},s=function(e){n.writeUInt32LE(e,i),i+=4};return r=this.version,n.writeInt32LE(r,i),i+=4,a(this.prevHash),a(this.merkleRoot),s(this.timestamp),s(this.bits),s(this.nonce),t||!this.transactions?n:(h.encode(this.transactions.length,n,i),i+=h.encode.bytes,this.transactions.forEach((function(e){var t=e.byteLength();e.toBuffer(n,i),i+=t})),n)}},{key:"toHex",value:function(e){return this.toBuffer(e).toString("hex")}},{key:"checkTxRoots",value:function(){var e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&(this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit()))}},{key:"checkProofOfWork",value:function(){var e=a.reverseBuffer(this.getHash()),r=t.calculateTarget(this.bits);return e.compare(r)<=0}},{key:"__checkMerkleRoot",value:function(){if(!this.transactions)throw d;var e=t.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}},{key:"__checkWitnessCommit",value:function(){if(!this.transactions)throw d;if(!this.hasWitnessCommit())throw p;var e=t.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}],[{key:"fromBuffer",value:function(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");var r=0,n=function(t){return r+=t,e.slice(r-t,r)},i=function(){var t=e.readUInt32LE(r);return r+=4,t},a=new t;if(a.version=function(){var t=e.readInt32LE(r);return r+=4,t}(),a.prevHash=n(32),a.merkleRoot=n(32),a.timestamp=i(),a.bits=i(),a.nonce=i(),80===e.length)return a;var s=function(){var t=o.Transaction.fromBuffer(e.slice(r),!0);return r+=t.byteLength(),t},u=function(){var t=h.decode(e,r);return r+=h.decode.bytes,t}();a.transactions=[];for(var f=0;f<u;++f){var c=s();a.transactions.push(c)}var d=a.getWitnessCommit();return d&&(a.witnessCommit=d),a}},{key:"fromHex",value:function(r){return t.fromBuffer(e.from(r,"hex"))}},{key:"calculateTarget",value:function(t){var r=((4278190080&t)>>24)-3,n=8388607&t,i=e.alloc(32,0);return i.writeUIntBE(n,29-r,3),i}},{key:"calculateMerkleRoot",value:function(t,r){if(c([{getHash:u.Function}],t),0===t.length)throw d;if(r&&!b(t))throw p;var n=t.map((function(e){return e.getHash(r)})),i=f(n,s.hash256);return r?s.hash256(e.concat([i,t[0].ins[0].witness[0]])):i}}]),t}();function b(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}t.Block=l}).call(this,r(3).Buffer)},function(e,t,r){(function(t){e.exports=function(e,r){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!==typeof r)throw TypeError("Expected digest Function");for(var n=e.length,i=e.concat();n>1;){for(var a=0,s=0;s<n;s+=2,++a){var o=i[s],u=s+1===n?o:i[s+1],f=t.concat([o,u]);i[a]=r(f)}n=a}return i[0]}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){var n=r(487),i=r(185),a=r(20),s=r(21);Object.defineProperty(t,"__esModule",{value:!0});var o=r(1632),u=r(1186),f=r(1326),c=r(1224),h=r(1153),d=r(1121),p=r(1227),l=r(1108),b=r(1184),v=r(1096),y=r(1185),m={network:l.bitcoin,maximumFeeRate:5e3},g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.Psbt(new w);a(this,t),this.data=r,this.opts=Object.assign({},m,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx},0===this.data.inputs.length&&this.setVersion(2);var n=function(e,t,r,n){return Object.defineProperty(e,t,{enumerable:r,writable:n})};n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}return s(t,[{key:"combine",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.data).combine.apply(e,i(r.map((function(e){return e.data})))),this}},{key:"clone",value:function(){var e=t.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}},{key:"setMaximumFeeRate",value:function(e){T(e),this.opts.maximumFeeRate=e}},{key:"setVersion",value:function(e){T(e),B(this.data.inputs,"setVersion");var t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}},{key:"setLocktime",value:function(e){T(e),B(this.data.inputs,"setLocktime");var t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}},{key:"setInputSequence",value:function(e,t){T(t),B(this.data.inputs,"setInputSequence");var r=this.__CACHE;if(r.__TX.ins.length<=e)throw new Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}},{key:"addInputs",value:function(e){var t=this;return e.forEach((function(e){return t.addInput(e)})),this}},{key:"addInput",value:function(e){B(this.data.inputs,"addInput");var t=this.__CACHE;this.data.addInput(e),C(t,t.__TX.ins[t.__TX.ins.length-1]);var r=this.data.inputs.length-1,n=this.data.inputs[r];return n.nonWitnessUtxo&&V(this.__CACHE,n,r),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}},{key:"addOutputs",value:function(e){var t=this;return e.forEach((function(e){return t.addOutput(e)})),this}},{key:"addOutput",value:function(e){B(this.data.inputs,"addOutput");var t=e.address;if("string"===typeof t){var r=this.opts.network,n=c.toOutputScript(t,r);e=Object.assign(e,{script:n})}var i=this.__CACHE;return this.data.addOutput(e),i.__FEE=void 0,i.__FEE_RATE=void 0,i.__EXTRACTED_TX=void 0,this}},{key:"extractTransaction",value:function(e){if(!this.data.inputs.every(k))throw new Error("Not finalized");var t=this.__CACHE;if(e||function(e,t,r){var n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),a=n*i;if(n>=r.maximumFeeRate)throw new Error("Warning: You are paying around ".concat((a/1e8).toFixed(8)," in ")+"fees, which is ".concat(n," satoshi per byte for a transaction ")+"with a VSize of ".concat(i," bytes (segwit counted as 0.25 byte per ")+"byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.")}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;var r=t.__TX.clone();return q(this.data.inputs,r,t,!0),r}},{key:"getFeeRate",value:function(){return D("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}},{key:"getFee",value:function(){return D("__FEE","fee",this.data.inputs,this.__CACHE)}},{key:"finalizeAllInputs",value:function(){var e=this;return f.checkForInput(this.data.inputs,0),W(this.data.inputs.length).forEach((function(t){return e.finalizeInput(t)})),this}},{key:"finalizeInput",value:function(e){var t=f.checkForInput(this.data.inputs,e),r=function(e,t,r){var n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){var a=G(r,t,e),s=n.ins[e].index;i.script=a.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);(t.witnessScript||x(i.script))&&(i.isSegwit=!0);return i}(e,t,this.__CACHE),n=r.script,i=r.isP2SH,a=r.isP2WSH,s=r.isSegwit;if(!n)throw new Error("No script found for input #".concat(e));var o=function(e){return x(e)?"witnesspubkeyhash":O(e)?"pubkeyhash":I(e)?"multisig":A(e)?"pubkey":"nonstandard"}(n);if(!function(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return S(1,e.partialSig);case"multisig":return S(b.p2ms({output:t}).m,e.partialSig);default:return!1}}(t,n,o))throw new Error("Can not finalize input #".concat(e));!function(e){if(!e.sighashType||!e.partialSig)return;var t=e.partialSig,r=e.sighashType;t.forEach((function(e){var t=v.signature.decode(e.signature).hashType;if(r!==t)throw new Error("Signature sighash does not match input sighash type")}))}(t);var u=function(e,t,r,n,i,a){var s,o,u=function(e,t,r){var n;switch(t){case"multisig":var i=function(e,t){return b.p2ms({output:e}).pubkeys.map((function(e){return(t.filter((function(t){return t.pubkey.equals(e)}))[0]||{}).signature})).filter((function(e){return!!e}))}(e,r);n=b.p2ms({output:e,signatures:i});break;case"pubkey":n=b.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=b.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=b.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}(e,t,r),f=a?b.p2wsh({redeem:u}):null,c=i?b.p2sh({redeem:f||u}):null;n?(o=F(f?f.witness:u.witness),c&&(s=c.input)):s=c?c.input:u.input;return{finalScriptSig:s,finalScriptWitness:o}}(n,o,t.partialSig,s,i,a),c=u.finalScriptSig,h=u.finalScriptWitness;if(c&&this.data.updateInput(e,{finalScriptSig:c}),h&&this.data.updateInput(e,{finalScriptWitness:h}),!c&&!h)throw new Error("Unknown error finalizing input #".concat(e));return this.data.clearFinalizedInput(e),this}},{key:"validateSignaturesOfAllInputs",value:function(){var e=this;return f.checkForInput(this.data.inputs,0),W(this.data.inputs.length).map((function(t){return e.validateSignaturesOfInput(t)})).reduce((function(e,t){return!0===t&&e}),!0)}},{key:"validateSignaturesOfInput",value:function(e,t){var r=this.data.inputs[e],n=(r||{}).partialSig;if(!r||!n||n.length<1)throw new Error("No signatures to validate");var i=t?n.filter((function(e){return e.pubkey.equals(t)})):n;if(i.length<1)throw new Error("No signatures for this pubkey");var a,s,o,u=[],f=!0,c=!1,h=void 0;try{for(var d,l=i[Symbol.iterator]();!(f=(d=l.next()).done);f=!0){var b=d.value,y=v.signature.decode(b.signature),m=o!==y.hashType?j(e,Object.assign({},r,{sighashType:y.hashType}),this.__CACHE):{hash:a,script:s},g=m.hash,_=m.script;o=y.hashType,a=g,s=_,N(b.pubkey,_,"verify");var w=p.fromPublicKey(b.pubkey);u.push(w.verify(g,y.signature))}}catch(S){c=!0,h=S}finally{try{f||null==l.return||l.return()}finally{if(c)throw h}}return u.every((function(e){return!0===e}))}},{key:"signAllInputsHD",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[y.Transaction.SIGHASH_ALL];if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=W(this.data.inputs.length)[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value;try{this.signInputHD(u,e,t),r.push(!0)}catch(f){r.push(!1)}}}catch(f){i=!0,a=f}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}if(r.every((function(e){return!1===e})))throw new Error("No inputs were signed");return this}},{key:"signAllInputsHDAsync",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[y.Transaction.SIGHASH_ALL];return new Promise((function(n,i){if(!e||!e.publicKey||!e.fingerprint)return i(new Error("Need HDSigner to sign input"));var a=[],s=[],o=!0,u=!1,f=void 0;try{for(var c,h=W(t.data.inputs.length)[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var d=c.value;s.push(t.signInputHDAsync(d,e,r).then((function(){a.push(!0)}),(function(){a.push(!1)})))}}catch(p){u=!0,f=p}finally{try{o||null==h.return||h.return()}finally{if(u)throw f}}return Promise.all(s).then((function(){if(a.every((function(e){return!1===e})))return i(new Error("No inputs were signed"));n()}))}))}},{key:"signInputHD",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[y.Transaction.SIGHASH_ALL];if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");var i=z(e,this.data.inputs,t);return i.forEach((function(t){return r.signInput(e,t,n)})),this}},{key:"signInputHDAsync",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[y.Transaction.SIGHASH_ALL];return new Promise((function(i,a){if(!t||!t.publicKey||!t.fingerprint)return a(new Error("Need HDSigner to sign input"));var s=z(e,r.data.inputs,t).map((function(t){return r.signInputAsync(e,t,n)}));return Promise.all(s).then((function(){i()})).catch(a)}))}},{key:"signAllInputs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[y.Transaction.SIGHASH_ALL];if(!e||!e.publicKey)throw new Error("Need Signer to sign input");var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=W(this.data.inputs.length)[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value;try{this.signInput(u,e,t),r.push(!0)}catch(f){r.push(!1)}}}catch(f){i=!0,a=f}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}if(r.every((function(e){return!1===e})))throw new Error("No inputs were signed");return this}},{key:"signAllInputsAsync",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[y.Transaction.SIGHASH_ALL];return new Promise((function(i,a){if(!e||!e.publicKey)return a(new Error("Need Signer to sign input"));var s=[],o=[],u=!0,f=!1,c=void 0;try{for(var h,d=t.data.inputs.entries()[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var p=h.value,l=n(p,1)[0];o.push(t.signInputAsync(l,e,r).then((function(){s.push(!0)}),(function(){s.push(!1)})))}}catch(b){f=!0,c=b}finally{try{u||null==d.return||d.return()}finally{if(f)throw c}}return Promise.all(o).then((function(){if(s.every((function(e){return!1===e})))return a(new Error("No inputs were signed"));i()}))}))}},{key:"signInput",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[y.Transaction.SIGHASH_ALL];if(!t||!t.publicKey)throw new Error("Need Signer to sign input");var n=M(this.data.inputs,e,t.publicKey,this.__CACHE,r),i=n.hash,a=n.sighashType,s=[{pubkey:t.publicKey,signature:v.signature.encode(t.sign(i),a)}];return this.data.updateInput(e,{partialSig:s}),this}},{key:"signInputAsync",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[y.Transaction.SIGHASH_ALL];return new Promise((function(i,a){if(!t||!t.publicKey)return a(new Error("Need Signer to sign input"));var s=M(r.data.inputs,e,t.publicKey,r.__CACHE,n),o=s.hash,u=s.sighashType;Promise.resolve(t.sign(o)).then((function(n){var a=[{pubkey:t.publicKey,signature:v.signature.encode(n,u)}];r.data.updateInput(e,{partialSig:a}),i()}))}))}},{key:"toBuffer",value:function(){return this.data.toBuffer()}},{key:"toHex",value:function(){return this.data.toHex()}},{key:"toBase64",value:function(){return this.data.toBase64()}},{key:"updateGlobal",value:function(e){return this.data.updateGlobal(e),this}},{key:"updateInput",value:function(e,t){return this.data.updateInput(e,t),t.nonWitnessUtxo&&V(this.__CACHE,this.data.inputs[e],e),this}},{key:"updateOutput",value:function(e,t){return this.data.updateOutput(e,t),this}},{key:"addUnknownKeyValToGlobal",value:function(e){return this.data.addUnknownKeyValToGlobal(e),this}},{key:"addUnknownKeyValToInput",value:function(e,t){return this.data.addUnknownKeyValToInput(e,t),this}},{key:"addUnknownKeyValToOutput",value:function(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}},{key:"clearFinalizedInput",value:function(e){return this.data.clearFinalizedInput(e),this}},{key:"inputCount",get:function(){return this.data.inputs.length}}],[{key:"fromBase64",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.from(t,"base64");return this.fromBuffer(n,r)}},{key:"fromHex",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.from(t,"hex");return this.fromBuffer(n,r)}},{key:"fromBuffer",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.Psbt.fromBuffer(e,_),i=new t(r,n);return R(i.__CACHE.__TX,i.__CACHE),i}}]),t}();t.Psbt=g;var _=function(e){return new w(e)},w=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.from([2,0,0,0,0,0,0,0,0,0]);a(this,t),this.tx=y.Transaction.fromBuffer(r),function(e){if(!e.ins.every((function(e){return e.script&&0===e.script.length&&e.witness&&0===e.witness.length})))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}return s(t,[{key:"getInputOutputCounts",value:function(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}},{key:"addInput",value:function(t){if(void 0===t.hash||void 0===t.index||!e.isBuffer(t.hash)&&"string"!==typeof t.hash||"number"!==typeof t.index)throw new Error("Error adding input.");var r="string"===typeof t.hash?h.reverseBuffer(e.from(t.hash,"hex")):t.hash;this.tx.addInput(r,t.index,t.sequence)}},{key:"addOutput",value:function(t){if(void 0===t.script||void 0===t.value||!e.isBuffer(t.script)||"number"!==typeof t.value)throw new Error("Error adding output.");this.tx.addOutput(t.script,t.value)}},{key:"toBuffer",value:function(){return this.tx.toBuffer()}}]),t}();function S(e,t){if(!t)return!1;if(t.length>e)throw new Error("Too many signatures");return t.length===e}function k(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function E(e){return function(t){try{return e({output:t}),!0}catch(r){return!1}}}var I=E(b.p2ms),A=E(b.p2pk),O=E(b.p2pkh),x=E(b.p2wpkh),P=E(b.p2wsh);function T(e){if("number"!==typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function B(t,r){t.forEach((function(t){var n=!1,i=[];if(0===(t.partialSig||[]).length){if(!t.finalScriptSig&&!t.finalScriptWitness)return;i=function(t){var r=t.finalScriptSig&&v.decompile(t.finalScriptSig)||[],n=t.finalScriptWitness&&v.decompile(t.finalScriptWitness)||[];return r.concat(n).filter((function(t){return e.isBuffer(t)&&v.isCanonicalScriptSignature(t)})).map((function(e){return{signature:e}}))}(t)}else i=t.partialSig;if(i.forEach((function(e){var t=v.signature.decode(e.signature).hashType,i=[];switch(t&y.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&t){case y.Transaction.SIGHASH_ALL:break;case y.Transaction.SIGHASH_SINGLE:case y.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}-1===i.indexOf(r)&&(n=!0)})),n)throw new Error("Can not modify transaction, signatures exist.")}))}function N(e,t,r){var n=d.hash160(e),i=v.decompile(t);if(null===i)throw new Error("Unknown script error");if(!i.some((function(t){return"number"!==typeof t&&(t.equals(e)||t.equals(n))})))throw new Error("Can not ".concat(r," for this input with the key ").concat(e.toString("hex")))}function R(e,t){e.ins.forEach((function(e){C(t,e)}))}function C(t,r){var n=h.reverseBuffer(e.from(r.hash)).toString("hex")+":"+r.index;if(t.__TX_IN_CACHE[n])throw new Error("Duplicate input detected.");t.__TX_IN_CACHE[n]=1}function H(e,t){return function(r,n,i){var a=e({redeem:{output:i}}).output;if(!n.equals(a))throw new Error("".concat(t," for input #").concat(r," doesn't match the scriptPubKey in the prevout"))}}var U=H(b.p2sh,"Redeem script"),L=H(b.p2wsh,"Witness script");function D(e,t,r,n){if(!r.every(k))throw new Error("PSBT must be finalized to calculate ".concat(t));if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;var i,a=!0;return n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,a=!1):i=n.__TX.clone(),q(r,i,n,a),"__FEE_RATE"===e?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function M(e,t,r,n,i){var a=j(t,f.checkForInput(e,t),n,i),s=a.hash,o=a.sighashType;return N(r,a.script,"sign"),{hash:s,sighashType:o}}function j(e,t,r,n){var i,a,s=r.__TX,o=t.sighashType||y.Transaction.SIGHASH_ALL;if(n&&n.indexOf(o)<0){var u=function(e){var t=e&y.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case y.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case y.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case y.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(o);throw new Error("Sighash type is not allowed. Retry the sign method passing the "+"sighashTypes array of whitelisted types. Sighash type: ".concat(u))}if(t.nonWitnessUtxo){var f=G(r,t,e),c=s.ins[e].hash,h=f.getHash();if(!c.equals(h))throw new Error("Non-witness UTXO hash for input #".concat(e," doesn't match the hash specified in the prevout"));var d=s.ins[e].index,p=f.outs[d];if(t.redeemScript?(U(e,p.script,t.redeemScript),a=t.redeemScript):a=p.script,P(a)){if(!t.witnessScript)throw new Error("Segwit input needs witnessScript if not P2WPKH");L(e,a,t.witnessScript),i=s.hashForWitnessV0(e,t.witnessScript,p.value,o),a=t.witnessScript}else if(x(a)){var l=b.p2pkh({hash:a.slice(2)}).output;i=s.hashForWitnessV0(e,l,p.value,o)}else i=s.hashForSignature(e,a,o)}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");var v;if(t.redeemScript?(U(e,t.witnessUtxo.script,t.redeemScript),v=t.redeemScript):v=t.witnessUtxo.script,x(v)){var m=b.p2pkh({hash:v.slice(2)}).output;i=s.hashForWitnessV0(e,m,t.witnessUtxo.value,o),a=v}else{if(!P(v))throw new Error("Input #".concat(e," has witnessUtxo but non-segwit script: ")+"".concat(v.toString("hex")));if(!t.witnessScript)throw new Error("Segwit input needs witnessScript if not P2WPKH");L(e,v,t.witnessScript),i=s.hashForWitnessV0(e,t.witnessScript,t.witnessUtxo.value,o),a=t.witnessScript}}return{script:a,sighashType:o,hash:i}}function z(e,t,r){var n=f.checkForInput(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");var i=n.bip32Derivation.map((function(e){return e.masterFingerprint.equals(r.fingerprint)?e:void 0})).filter((function(e){return!!e}));if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map((function(e){var t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t}))}function K(e){var t=0;function r(){var r=u.decode(e,t);return t+=u.decode.bytes,r}function n(){return n=r(),t+=n,e.slice(t-n,t);var n}return function(){for(var e=r(),t=[],i=0;i<e;i++)t.push(n());return t}()}function F(t){var r,n=e.allocUnsafe(0);function i(t){var r=n.length,i=u.encodingLength(t);n=e.concat([n,e.allocUnsafe(i)]),u.encode(t,n,r)}function a(t){i(t.length),function(t){n=e.concat([n,e.from(t)])}(t)}return i((r=t).length),r.forEach(a),n}function V(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;var n=y.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;var i=e,a=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get:function(){var e=i.__NON_WITNESS_UTXO_BUF_CACHE[a],t=i.__NON_WITNESS_UTXO_TX_CACHE[a];if(void 0!==e)return e;var r=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[a]=r,r},set:function(e){i.__NON_WITNESS_UTXO_BUF_CACHE[a]=e}})}function q(e,t,r,n){var i=0;e.forEach((function(e,a){if(n&&e.finalScriptSig&&(t.ins[a].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[a].witness=K(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){var s=G(r,e,a),o=t.ins[a].index,u=s.outs[o];i+=u.value}}));var a=t.outs.reduce((function(e,t){return e+t.value}),0),s=i-a;if(s<0)throw new Error("Outputs are spending more than Inputs");var o=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(s/o)}function G(e,t,r){var n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||V(e,t,r),n[r]}function W(e){return i(Array(e).keys())}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){var n=r(20),i=r(21);Object.defineProperty(t,"__esModule",{value:!0});var a=r(1633),s=r(1325),o=r(1109),u=r(1326),f=function(){function t(e){n(this,t),this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}return i(t,[{key:"toBase64",value:function(){return this.toBuffer().toString("base64")}},{key:"toHex",value:function(){return this.toBuffer().toString("hex")}},{key:"toBuffer",value:function(){return s.psbtToBuffer(this)}},{key:"updateGlobal",value:function(e){return u.updateGlobal(e,this.globalMap),this}},{key:"updateInput",value:function(e,t){var r=u.checkForInput(this.inputs,e);return u.updateInput(t,r),this}},{key:"updateOutput",value:function(e,t){var r=u.checkForOutput(this.outputs,e);return u.updateOutput(t,r),this}},{key:"addUnknownKeyValToGlobal",value:function(e){return u.checkHasKey(e,this.globalMap.unknownKeyVals,u.getEnumLength(o.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}},{key:"addUnknownKeyValToInput",value:function(e,t){var r=u.checkForInput(this.inputs,e);return u.checkHasKey(t,r.unknownKeyVals,u.getEnumLength(o.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}},{key:"addUnknownKeyValToOutput",value:function(e,t){var r=u.checkForOutput(this.outputs,e);return u.checkHasKey(t,r.unknownKeyVals,u.getEnumLength(o.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}},{key:"addInput",value:function(e){var t=this;this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});var r=e.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach((function(e){return t.addUnknownKeyValToInput(n,e)})),u.addInputAttributes(this.inputs,e),this}},{key:"addOutput",value:function(e){var t=this;this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});var r=e.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach((function(e){return t.addUnknownKeyValToInput(n,e)})),u.addOutputAttributes(this.outputs,e),this}},{key:"clearFinalizedInput",value:function(e){var t=u.checkForInput(this.inputs,e);u.inputCheckUncleanFinalized(e,t);for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(i)||delete t[i]}return this}},{key:"combine",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=a.combine([this].concat(t));return Object.assign(this,n),this}},{key:"getTransaction",value:function(){return this.globalMap.unsignedTx.toBuffer()}}],[{key:"fromBase64",value:function(t,r){var n=e.from(t,"base64");return this.fromBuffer(n,r)}},{key:"fromHex",value:function(t,r){var n=e.from(t,"hex");return this.fromBuffer(n,r)}},{key:"fromBuffer",value:function(e,t){var r=s.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}}]),t}();t.Psbt=f}).call(this,r(3).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1325);function i(e,t,r){return function(n){if(!e.has(n)){var i=r.filter((function(e){return e.key.toString("hex")===n}))[0];t.push(i),e.add(n)}}}function a(e){return e.globalMap.unsignedTx}function s(e){var t=new Set;return e.forEach((function(e){var r=e.key.toString("hex");if(t.has(r))throw new Error("Combine: KeyValue Map keys should be unique");t.add(r)})),t}t.combine=function(e){var t=e[0],r=n.psbtToKeyVals(t),o=e.slice(1);if(0===o.length)throw new Error("Combine: Nothing to combine");var u=a(t);if(void 0===u)throw new Error("Combine: Self missing transaction");var f=s(r.globalKeyVals),c=r.inputKeyVals.map(s),h=r.outputKeyVals.map(s),d=!0,p=!1,l=void 0;try{for(var b,v=function(){var e=b.value,t=a(e);if(void 0===t||!t.toBuffer().equals(u.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");var o=n.psbtToKeyVals(e);s(o.globalKeyVals).forEach(i(f,r.globalKeyVals,o.globalKeyVals)),o.inputKeyVals.map(s).forEach((function(e,t){return e.forEach(i(c[t],r.inputKeyVals[t],o.inputKeyVals[t]))})),o.outputKeyVals.map(s).forEach((function(e,t){return e.forEach(i(h[t],r.outputKeyVals[t],o.outputKeyVals[t]))}))},y=o[Symbol.iterator]();!(d=(b=y.next()).done);d=!0)v()}catch(m){p=!0,l=m}finally{try{d||null==y.return||y.return()}finally{if(p)throw l}}return n.psbtFromKeyVals(u,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1228),i=r(1229),a=r(1186),s=r(1109);function o(t,r,n){if(!r.equals(e.from([n])))throw new Error("Format Error: Invalid ".concat(t," key: ").concat(r.toString("hex")))}function u(e,t){var r=t.globalMapKeyVals,a=t.inputKeyVals,u=t.outputKeyVals,f={unsignedTx:e},c=0,h=!0,d=!1,p=void 0;try{for(var l,b=r[Symbol.iterator]();!(h=(l=b.next()).done);h=!0){var v=l.value;switch(v.key[0]){case s.GlobalTypes.UNSIGNED_TX:if(o("global",v.key,s.GlobalTypes.UNSIGNED_TX),c>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");c++;break;case s.GlobalTypes.GLOBAL_XPUB:void 0===f.globalXpub&&(f.globalXpub=[]),f.globalXpub.push(n.globals.globalXpub.decode(v));break;default:f.unknownKeyVals||(f.unknownKeyVals=[]),f.unknownKeyVals.push(v)}}}catch(W){d=!0,p=W}finally{try{h||null==b.return||b.return()}finally{if(d)throw p}}var y=a.length,m=u.length,g=[],_=[],w=!0,S=!1,k=void 0;try{for(var E,I=i.range(y)[Symbol.iterator]();!(w=(E=I.next()).done);w=!0){var A=E.value,O={},x=!0,P=!1,T=void 0;try{for(var B,N=a[A][Symbol.iterator]();!(x=(B=N.next()).done);x=!0){var R=B.value;switch(n.inputs.checkPubkey(R),R.key[0]){case s.InputTypes.NON_WITNESS_UTXO:if(o("input",R.key,s.InputTypes.NON_WITNESS_UTXO),void 0!==O.nonWitnessUtxo||void 0!==O.witnessUtxo)throw new Error("Format Error: Input has multiple [NON_]WITNESS_UTXO");O.nonWitnessUtxo=n.inputs.nonWitnessUtxo.decode(R);break;case s.InputTypes.WITNESS_UTXO:if(o("input",R.key,s.InputTypes.WITNESS_UTXO),void 0!==O.nonWitnessUtxo||void 0!==O.witnessUtxo)throw new Error("Format Error: Input has multiple [NON_]WITNESS_UTXO");O.witnessUtxo=n.inputs.witnessUtxo.decode(R);break;case s.InputTypes.PARTIAL_SIG:void 0===O.partialSig&&(O.partialSig=[]),O.partialSig.push(n.inputs.partialSig.decode(R));break;case s.InputTypes.SIGHASH_TYPE:if(o("input",R.key,s.InputTypes.SIGHASH_TYPE),void 0!==O.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");O.sighashType=n.inputs.sighashType.decode(R);break;case s.InputTypes.REDEEM_SCRIPT:if(o("input",R.key,s.InputTypes.REDEEM_SCRIPT),void 0!==O.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");O.redeemScript=n.inputs.redeemScript.decode(R);break;case s.InputTypes.WITNESS_SCRIPT:if(o("input",R.key,s.InputTypes.WITNESS_SCRIPT),void 0!==O.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");O.witnessScript=n.inputs.witnessScript.decode(R);break;case s.InputTypes.BIP32_DERIVATION:void 0===O.bip32Derivation&&(O.bip32Derivation=[]),O.bip32Derivation.push(n.inputs.bip32Derivation.decode(R));break;case s.InputTypes.FINAL_SCRIPTSIG:o("input",R.key,s.InputTypes.FINAL_SCRIPTSIG),O.finalScriptSig=n.inputs.finalScriptSig.decode(R);break;case s.InputTypes.FINAL_SCRIPTWITNESS:o("input",R.key,s.InputTypes.FINAL_SCRIPTWITNESS),O.finalScriptWitness=n.inputs.finalScriptWitness.decode(R);break;case s.InputTypes.POR_COMMITMENT:o("input",R.key,s.InputTypes.POR_COMMITMENT),O.porCommitment=n.inputs.porCommitment.decode(R);break;default:O.unknownKeyVals||(O.unknownKeyVals=[]),O.unknownKeyVals.push(R)}}}catch(W){P=!0,T=W}finally{try{x||null==N.return||N.return()}finally{if(P)throw T}}g.push(O)}}catch(W){S=!0,k=W}finally{try{w||null==I.return||I.return()}finally{if(S)throw k}}var C=!0,H=!1,U=void 0;try{for(var L,D=i.range(m)[Symbol.iterator]();!(C=(L=D.next()).done);C=!0){var M=L.value,j={},z=!0,K=!1,F=void 0;try{for(var V,q=u[M][Symbol.iterator]();!(z=(V=q.next()).done);z=!0){var G=V.value;switch(n.outputs.checkPubkey(G),G.key[0]){case s.OutputTypes.REDEEM_SCRIPT:if(o("output",G.key,s.OutputTypes.REDEEM_SCRIPT),void 0!==j.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");j.redeemScript=n.outputs.redeemScript.decode(G);break;case s.OutputTypes.WITNESS_SCRIPT:if(o("output",G.key,s.OutputTypes.WITNESS_SCRIPT),void 0!==j.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");j.witnessScript=n.outputs.witnessScript.decode(G);break;case s.OutputTypes.BIP32_DERIVATION:void 0===j.bip32Derivation&&(j.bip32Derivation=[]),j.bip32Derivation.push(n.outputs.bip32Derivation.decode(G));break;default:j.unknownKeyVals||(j.unknownKeyVals=[]),j.unknownKeyVals.push(G)}}}catch(W){K=!0,F=W}finally{try{z||null==q.return||q.return()}finally{if(K)throw F}}_.push(j)}}catch(W){H=!0,U=W}finally{try{C||null==D.return||D.return()}finally{if(H)throw U}}return{globalMap:f,inputs:g,outputs:_}}t.psbtFromBuffer=function(e,t){var r=0;function n(){var t=a.decode(e,r);r+=a.encodingLength(t);var n=e.slice(r,r+t);return r+=t,n}function o(){return{key:n(),value:n()}}function f(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");var t=0===e.readUInt8(r);return t&&r++,t}if(1886610036!==function(){var t=e.readUInt32BE(r);return r+=4,t}())throw new Error("Format Error: Invalid Magic Number");if(255!==function(){var t=e.readUInt8(r);return r+=1,t}())throw new Error("Format Error: Magic Number must be followed by 0xff separator");for(var c=[],h={};!f();){var d=o(),p=d.key.toString("hex");if(h[p])throw new Error("Format Error: Keys must be unique for global keymap: key "+p);h[p]=1,c.push(d)}var l=c.filter((function(e){return e.key[0]===s.GlobalTypes.UNSIGNED_TX}));if(1!==l.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");var b=t(l[0].value),v=b.getInputOutputCounts(),y=v.inputCount,m=v.outputCount,g=[],_=[],w=!0,S=!1,k=void 0;try{for(var E,I=i.range(y)[Symbol.iterator]();!(w=(E=I.next()).done);w=!0){for(var A=E.value,O={},x=[];!f();){var P=o(),T=P.key.toString("hex");if(O[T])throw new Error("Format Error: Keys must be unique for each input: input index "+A+" key "+T);O[T]=1,x.push(P)}g.push(x)}}catch(z){S=!0,k=z}finally{try{w||null==I.return||I.return()}finally{if(S)throw k}}var B=!0,N=!1,R=void 0;try{for(var C,H=i.range(m)[Symbol.iterator]();!(B=(C=H.next()).done);B=!0){for(var U=C.value,L={},D=[];!f();){var M=o(),j=M.key.toString("hex");if(L[j])throw new Error("Format Error: Keys must be unique for each output: output index "+U+" key "+j);L[j]=1,D.push(M)}_.push(D)}}catch(z){N=!0,R=z}finally{try{B||null==H.return||H.return()}finally{if(N)throw R}}return u(b,{globalMapKeyVals:c,inputKeyVals:g,outputKeyVals:_})},t.checkKeyBuffer=o,t.psbtFromKeyVals=u}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){var n=r(185);Object.defineProperty(t,"__esModule",{value:!0});var i=r(1109),a=function(e){return n(Array(e).keys())};t.decode=function(e){if(e.key[0]!==i.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(79!==e.key.length||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");var t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"},n=!0,s=!1,o=void 0;try{for(var u,f=a(e.value.length/4-1)[Symbol.iterator]();!(n=(u=f.next()).done);n=!0){var c=u.value,h=e.value.readUInt32LE(4*c+4),d=!!(2147483648&h),p=2147483647&h;r.path+="/"+p.toString(10)+(d?"'":"")}}catch(l){s=!0,o=l}finally{try{n||null==f.return||f.return()}finally{if(s)throw o}}return r},t.encode=function(t){var r=e.from([i.GlobalTypes.GLOBAL_XPUB]),n=e.concat([r,t.extendedPubkey]),a=t.path.split("/"),s=e.allocUnsafe(4*a.length);t.masterFingerprint.copy(s,0);var o=4;return a.slice(1).forEach((function(e){var t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),s.writeUInt32LE(r,o),o+=4})),{key:n,value:s}},t.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",t.check=function(t){var r=t.extendedPubkey,n=t.masterFingerprint,i=t.path;return e.isBuffer(r)&&78===r.length&&[2,3].indexOf(r[45])>-1&&e.isBuffer(n)&&4===n.length&&"string"===typeof i&&!!i.match(/^m(\/\d+'?)+$/)},t.canAddToArray=function(e,t,r){var n=t.extendedPubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.extendedPubkey.equals(t.extendedPubkey)})).length)}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1109);t.encode=function(t){return{key:e.from([n.GlobalTypes.UNSIGNED_TX]),value:t.toBuffer()}}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1109);t.decode=function(e){if(e.key[0]!==n.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(t){return{key:e.from([n.InputTypes.FINAL_SCRIPTSIG]),value:t}},t.expected="Buffer",t.check=function(t){return e.isBuffer(t)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptSig}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1109);t.decode=function(e){if(e.key[0]!==n.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(t){return{key:e.from([n.InputTypes.FINAL_SCRIPTWITNESS]),value:t}},t.expected="Buffer",t.check=function(t){return e.isBuffer(t)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1109);t.decode=function(e){if(e.key[0]!==n.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value},t.encode=function(t){return{key:e.from([n.InputTypes.NON_WITNESS_UTXO]),value:t}},t.expected="Buffer",t.check=function(t){return e.isBuffer(t)},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo&&void 0===e.nonWitnessUtxo}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1109);t.decode=function(e){if(e.key[0]!==n.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}},t.encode=function(t){var r=e.from([n.InputTypes.PARTIAL_SIG]);return{key:e.concat([r,t.pubkey]),value:t.signature}},t.expected="{ pubkey: Buffer; signature: Buffer; }",t.check=function(t){return e.isBuffer(t.pubkey)&&e.isBuffer(t.signature)&&[33,65].includes(t.pubkey.length)&&[2,3,4].includes(t.pubkey[0])&&function(t){if(!e.isBuffer(t)||t.length<9)return!1;if(48!==t[0])return!1;if(t.length!==t[1]+3)return!1;if(2!==t[2])return!1;var r=t[3];if(r>33||r<1)return!1;if(2!==t[3+r+1])return!1;var n=t[3+r+2];return!(n>33||n<1)&&t.length===3+r+2+n+2}(t.signature)},t.canAddToArray=function(e,t,r){var n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.pubkey.equals(t.pubkey)})).length)}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1109);t.decode=function(e){if(e.key[0]!==n.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")},t.encode=function(t){return{key:e.from([n.InputTypes.POR_COMMITMENT]),value:e.from(t,"utf8")}},t.expected="string",t.check=function(e){return"string"===typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.porCommitment}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1109);t.decode=function(e){if(e.key[0]!==n.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)},t.encode=function(t){var r=e.from([n.InputTypes.SIGHASH_TYPE]),i=e.allocUnsafe(4);return i.writeUInt32LE(t,0),{key:r,value:i}},t.expected="number",t.check=function(e){return"number"===typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.sighashType}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1109),i=r(1229),a=r(1186);t.decode=function(e){if(e.key[0]!==n.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));var t=i.readUInt64LE(e.value,0),r=8,s=a.decode(e.value,r);r+=a.encodingLength(s);var o=e.value.slice(r);if(o.length!==s)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:o,value:t}},t.encode=function(t){var r=t.script,s=t.value,o=a.encodingLength(r.length),u=e.allocUnsafe(8+o+r.length);return i.writeUInt64LE(u,s,0),a.encode(r.length,u,8),r.copy(u,8+o),{key:e.from([n.InputTypes.WITNESS_UTXO]),value:u}},t.expected="{ script: Buffer; value: number; }",t.check=function(t){return e.isBuffer(t.script)&&"number"===typeof t.value},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo&&void 0===e.nonWitnessUtxo}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){var n=r(185);Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return n(Array(e).keys())};t.makeConverter=function(t){return{decode:function(e){if(e.key[0]!==t)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");var r=e.key.slice(1),n={masterFingerprint:e.value.slice(0,4),pubkey:r,path:"m"},a=!0,s=!1,o=void 0;try{for(var u,f=i(e.value.length/4-1)[Symbol.iterator]();!(a=(u=f.next()).done);a=!0){var c=u.value,h=e.value.readUInt32LE(4*c+4),d=!!(2147483648&h),p=2147483647&h;n.path+="/"+p.toString(10)+(d?"'":"")}}catch(l){s=!0,o=l}finally{try{a||null==f.return||f.return()}finally{if(s)throw o}}return n},encode:function(r){var n=e.from([t]),i=e.concat([n,r.pubkey]),a=r.path.split("/"),s=e.allocUnsafe(4*a.length);r.masterFingerprint.copy(s,0);var o=4;return a.slice(1).forEach((function(e){var t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),s.writeUInt32LE(r,o),o+=4})),{key:i,value:s}},check:function(t){return e.isBuffer(t.pubkey)&&e.isBuffer(t.masterFingerprint)&&"string"===typeof t.path&&[33,65].includes(t.pubkey.length)&&[2,3,4].includes(t.pubkey[0])&&4===t.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(e,t,r){var n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter((function(e){return e.pubkey.equals(t.pubkey)})).length)}}}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeChecker=function(e){return function(t){var r;if(e.includes(t.key[0])&&(33!==(r=t.key.slice(1)).length&&65!==r.length||![2,3,4].includes(r[0])))throw new Error("Format Error: invalid pubkey in key 0x"+t.key.toString("hex"));return r}}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(t){return{decode:function(e){if(e.key[0]!==t)throw new Error("Decode Error: could not decode redeemScript with key 0x"+e.key.toString("hex"));return e.value},encode:function(r){return{key:e.from([t]),value:r}},check:function(t){return e.isBuffer(t)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(t){return{decode:function(e){if(e.key[0]!==t)throw new Error("Decode Error: could not decode witnessScript with key 0x"+e.key.toString("hex"));return e.value},encode:function(r){return{key:e.from([t]),value:r}},check:function(t){return e.isBuffer(t)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){var n=r(487);Object.defineProperty(t,"__esModule",{value:!0});var i=r(1228),a=r(1229);t.psbtToBuffer=function(t){var r=u({globalMap:t.globalMap,inputs:t.inputs,outputs:t.outputs}),n=r.globalKeyVals,i=r.inputKeyVals,s=r.outputKeyVals,o=a.keyValsToBuffer(n),f=function(t){return 0===t.length?[e.from([0])]:t.map(a.keyValsToBuffer)},c=f(i),h=f(s),d=e.allocUnsafe(5);return d.writeUIntBE(482972169471,0,5),e.concat([d,o].concat(c,h))};var s=function(e,t){return e.key.compare(t.key)};function o(e,t){var r=new Set,i=Object.entries(e).reduce((function(e,i){var a=n(i,2),s=a[0],o=a[1];if("unknownKeyVals"===s)return e;var u=t[s];if(void 0===u)return e;var f=(Array.isArray(o)?o:[o]).map(u.encode);return f.map((function(e){return e.key.toString("hex")})).forEach((function(e){if(r.has(e))throw new Error("Serialize Error: Duplicate key: "+e);r.add(e)})),e.concat(f)}),[]),a=e.unknownKeyVals?e.unknownKeyVals.filter((function(e){return!r.has(e.key.toString("hex"))})):[];return i.concat(a).sort(s)}function u(e){var t=e.globalMap,r=e.inputs,n=e.outputs;return{globalKeyVals:o(t,i.globals),inputKeyVals:r.map((function(e){return o(e,i.inputs)})),outputKeyVals:n.map((function(e){return o(e,i.outputs)}))}}t.psbtToKeyVals=u}).call(this,r(3).Buffer)},function(e,t,r){"use strict";(function(e){var n=r(487),i=r(20),a=r(21);Object.defineProperty(t,"__esModule",{value:!0});var s=r(1224),o=r(1153),u=r(1650),f=r(1121),c=r(1227),h=r(1108),d=r(1184),p=r(1096),l=r(1096),b=r(1185),v=r(1120),y=r(1102),m=u.types,g=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function _(e,t,r){try{y(e,t)}catch(n){throw new Error(r)}}var w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.bitcoin,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;i(this,t),this.network=e,this.maximumFeeRate=r,this.__PREV_TX_SET={},this.__INPUTS=[],this.__TX=new b.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1,console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.")}return a(t,[{key:"setLowR",value:function(e){return y(y.maybe(y.Boolean),e),void 0===e&&(e=!0),this.__USE_LOW_R=e,e}},{key:"setLockTime",value:function(e){if(y(v.UInt32,e),this.__INPUTS.some((function(e){return!!e.signatures&&e.signatures.some((function(e){return void 0!==e}))})))throw new Error("No, this would invalidate signatures");this.__TX.locktime=e}},{key:"setVersion",value:function(e){y(v.UInt32,e),this.__TX.version=e}},{key:"addInput",value:function(t,r,n,i){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");var a,s;if("string"===typeof(s=t)||s instanceof String)t=o.reverseBuffer(e.from(t,"hex"));else if(function(e){return e instanceof b.Transaction}(t)){var u=t.outs[r];i=u.script,a=u.value,t=t.getHash(!1)}return this.__addInputUnsafe(t,r,{sequence:n,prevOutScript:i,value:a})}},{key:"addOutput",value:function(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"===typeof e&&(e=s.toOutputScript(e,this.network)),this.__TX.addOutput(e,t)}},{key:"build",value:function(){return this.__build(!1)}},{key:"buildIncomplete",value:function(){return this.__build(!0)}},{key:"sign",value:function(e,t,r,i,a,s){!function(e){var t=e.input,r=e.ourPubKey,i=e.keyPair,a=e.signatureHash,s=e.hashType,o=e.useLowR,u=!1,f=!0,c=!1,h=void 0;try{for(var d,l=t.pubkeys.entries()[Symbol.iterator]();!(f=(d=l.next()).done);f=!0){var b=d.value,v=n(b,2),y=v[0],m=v[1];if(r.equals(m)){if(t.signatures[y])throw new Error("Signature already exists");if(33!==r.length&&t.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");var g=i.sign(a,o);t.signatures[y]=p.signature.encode(g,s),u=!0}}}catch(_){c=!0,h=_}finally{try{f||null==l.return||l.return()}finally{if(c)throw h}}if(!u)throw new Error("Key pair cannot sign for this input")}(function(e,t,r,n,i,a,s,o,u,f,c){var h;if("number"===typeof i)console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface"),h=i;else{if("object"!==typeof i)throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function(e,t){if(!g.has(t.prevOutScriptType))throw new TypeError('Unknown prevOutScriptType "'.concat(t.prevOutScriptType,'"'));_(y.Number,t.vin,"sign must include vin parameter as Number (input index)"),_(v.Signer,t.keyPair,"sign must include keyPair parameter as Signer interface"),_(y.maybe(y.Number),t.hashType,"sign hashType parameter must be a number");var r=(e[t.vin]||[]).prevOutType,n=t.prevOutScriptType;switch(n){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2pkh: ").concat(r));_(y.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),_(y.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),_(y.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2pk: ").concat(r));_(y.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),_(y.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),_(y.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2wpkh: ").concat(r));_(y.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),_(y.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),_(v.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2ms: ").concat(r));_(y.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),_(y.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),_(y.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2sh-p2wpkh: ").concat(r));_(y.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),_(y.Buffer,t.redeemScript,"".concat(n," requires redeemScript")),_(v.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));_(y.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),_(y.Buffer,t.redeemScript,"".concat(n," requires redeemScript")),_(y.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));_(y.Buffer,t.witnessScript,"".concat(n," requires witnessScript")),_(y.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),_(v.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));_(y.Buffer,t.witnessScript,"".concat(n," requires witnessScript")),_(y.Buffer,t.redeemScript,"".concat(n," requires witnessScript")),_(v.Satoshi,t.witnessValue,"".concat(n," requires witnessScript"))}}(t,i),h=i.vin,a=i.keyPair,s=i.redeemScript,o=i.hashType,u=i.witnessValue,f=i.witnessScript}if(void 0===a)throw new Error("sign requires keypair");if(a.network&&a.network!==e)throw new TypeError("Inconsistent network");if(!t[h])throw new Error("No input at index: "+h);if(o=o||b.Transaction.SIGHASH_ALL,r(o))throw new Error("Transaction needs outputs");var l=t[h];if(void 0!==l.redeemScript&&s&&!l.redeemScript.equals(s))throw new Error("Inconsistent redeemScript");var w,E=a.publicKey||a.getPublicKey&&a.getPublicKey();if(!k(l)){if(void 0!==u){if(void 0!==l.value&&l.value!==u)throw new Error("Input did not match witnessValue");y(v.Satoshi,u),l.value=u}if(!k(l)){var I=function(e,t,r,n){if(r&&n){var i=d.p2wsh({redeem:{output:n}}),a=d.p2wsh({output:r}),s=d.p2sh({redeem:{output:r}}),o=d.p2sh({redeem:i});if(!i.hash.equals(a.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!s.hash.equals(o.hash))throw new Error("Redeem script inconsistent with prevOutScript");var u=S(i.redeem.output,t);if(!u.pubkeys)throw new Error(u.type+" not supported as witnessScript ("+p.toASM(n)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(u.signatures=e.signatures);var f=n;if(u.type===m.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:m.P2WSH,witnessScript:n,witnessScriptType:u.type,prevOutType:m.P2SH,prevOutScript:s.output,hasWitness:!0,signScript:f,signType:u.type,pubkeys:u.pubkeys,signatures:u.signatures,maxSignatures:u.maxSignatures}}if(r){var c=d.p2sh({redeem:{output:r}});if(e.prevOutScript){var h;try{h=d.p2sh({output:e.prevOutScript})}catch(I){throw new Error("PrevOutScript must be P2SH")}if(!c.hash.equals(h.hash))throw new Error("Redeem script inconsistent with prevOutScript")}var l=S(c.redeem.output,t);if(!l.pubkeys)throw new Error(l.type+" not supported as redeemScript ("+p.toASM(r)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(l.signatures=e.signatures);var b=r;return l.type===m.P2WPKH&&(b=d.p2pkh({pubkey:l.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:l.type,prevOutType:m.P2SH,prevOutScript:c.output,hasWitness:l.type===m.P2WPKH,signScript:b,signType:l.type,pubkeys:l.pubkeys,signatures:l.signatures,maxSignatures:l.maxSignatures}}if(n){var v=d.p2wsh({redeem:{output:n}});if(e.prevOutScript){var y=d.p2wsh({output:e.prevOutScript});if(!v.hash.equals(y.hash))throw new Error("Witness script inconsistent with prevOutScript")}var g=S(v.redeem.output,t);if(!g.pubkeys)throw new Error(g.type+" not supported as witnessScript ("+p.toASM(n)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(g.signatures=e.signatures);var _=n;if(g.type===m.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:n,witnessScriptType:g.type,prevOutType:m.P2WSH,prevOutScript:v.output,hasWitness:!0,signScript:_,signType:g.type,pubkeys:g.pubkeys,signatures:g.signatures,maxSignatures:g.maxSignatures}}if(e.prevOutType&&e.prevOutScript){if(e.prevOutType===m.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===m.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(!e.prevOutScript)throw new Error("PrevOutScript is missing");var w=S(e.prevOutScript,t);if(!w.pubkeys)throw new Error(w.type+" not supported ("+p.toASM(e.prevOutScript)+")");e.signatures&&e.signatures.some((function(e){return void 0!==e}))&&(w.signatures=e.signatures);var k=e.prevOutScript;return w.type===m.P2WPKH&&(k=d.p2pkh({pubkey:w.pubkeys[0]}).output),{prevOutType:w.type,prevOutScript:e.prevOutScript,hasWitness:w.type===m.P2WPKH,signScript:k,signType:w.type,pubkeys:w.pubkeys,signatures:w.signatures,maxSignatures:w.maxSignatures}}var E=d.p2pkh({pubkey:t}).output;return{prevOutType:m.P2PKH,prevOutScript:E,hasWitness:!1,signScript:E,signType:m.P2PKH,pubkeys:[t],signatures:[void 0]}}(l,E,s,f);Object.assign(l,I)}if(!k(l))throw Error(l.prevOutType+" not supported")}w=l.hasWitness?n.hashForWitnessV0(h,l.signScript,l.value,o):n.hashForSignature(h,l.signScript,o);return{input:l,ourPubKey:E,keyPair:a,signatureHash:w,hashType:o,useLowR:!!c}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,e,t,r,i,a,s,this.__USE_LOW_R))}},{key:"__addInputUnsafe",value:function(e,t,r){if(b.Transaction.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");var n=e.toString("hex")+":"+t;if(void 0!==this.__PREV_TX_SET[n])throw new Error("Duplicate TxOut: "+n);var i={};if(void 0!==r.script&&(i=function e(t,r,n,i){if(0===t.length&&0===r.length)return{};if(!n){var a=u.input(t,!0),s=u.witness(r,!0);a===m.NONSTANDARD&&(a=void 0),s===m.NONSTANDARD&&(s=void 0),n=a||s}switch(n){case m.P2WPKH:var o=d.p2wpkh({witness:r}),f=o.output,c=o.pubkey,h=o.signature;return{prevOutScript:f,prevOutType:m.P2WPKH,pubkeys:[c],signatures:[h]};case m.P2PKH:var l=d.p2pkh({input:t}),b=l.output,v=l.pubkey,y=l.signature;return{prevOutScript:b,prevOutType:m.P2PKH,pubkeys:[v],signatures:[y]};case m.P2PK:var g=d.p2pk({input:t}).signature;return{prevOutType:m.P2PK,pubkeys:[void 0],signatures:[g]};case m.P2MS:var _=d.p2ms({input:t,output:i},{allowIncomplete:!0}),w=_.m,S=_.pubkeys,k=_.signatures;return{prevOutType:m.P2MS,pubkeys:S,signatures:k,maxSignatures:w}}if(n===m.P2SH){var E=d.p2sh({input:t,witness:r}),I=E.output,A=E.redeem,O=u.output(A.output),x=e(A.input,A.witness,O,A.output);return x.prevOutType?{prevOutScript:I,prevOutType:m.P2SH,redeemScript:A.output,redeemScriptType:x.prevOutType,witnessScript:x.witnessScript,witnessScriptType:x.witnessScriptType,pubkeys:x.pubkeys,signatures:x.signatures}:{}}if(n===m.P2WSH){var P,T=d.p2wsh({input:t,witness:r}),B=T.output,N=T.redeem,R=u.output(N.output);return(P=R===m.P2WPKH?e(N.input,N.witness,R):e(p.compile(N.witness),[],R,N.output)).prevOutType?{prevOutScript:B,prevOutType:m.P2WSH,witnessScript:N.output,witnessScriptType:P.prevOutType,pubkeys:P.pubkeys,signatures:P.signatures}:{}}return{prevOutType:m.NONSTANDARD,prevOutScript:t}}(r.script,r.witness||[])),void 0!==r.value&&(i.value=r.value),!i.prevOutScript&&r.prevOutScript){var a;if(!i.pubkeys&&!i.signatures){var s=S(r.prevOutScript);s.pubkeys&&(i.pubkeys=s.pubkeys,i.signatures=s.signatures),a=s.type}i.prevOutScript=r.prevOutScript,i.prevOutType=a||u.output(r.prevOutScript)}var o=this.__TX.addInput(e,t,r.sequence,r.scriptSig);return this.__INPUTS[o]=i,this.__PREV_TX_SET[n]=!0,o}},{key:"__build",value:function(e){if(!e){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}var t=this.__TX.clone();if(this.__INPUTS.forEach((function(r,n){if(!r.prevOutType&&!e)throw new Error("Transaction is not complete");var i=function e(t,r,n){var i=r.pubkeys||[];var a=r.signatures||[];switch(t){case m.P2PKH:if(0===i.length)break;if(0===a.length)break;return d.p2pkh({pubkey:i[0],signature:a[0]});case m.P2WPKH:if(0===i.length)break;if(0===a.length)break;return d.p2wpkh({pubkey:i[0],signature:a[0]});case m.P2PK:if(0===i.length)break;if(0===a.length)break;return d.p2pk({signature:a[0]});case m.P2MS:var s=r.maxSignatures;a=n?a.map((function(e){return e||l.OPS.OP_0})):a.filter((function(e){return e}));var o=!n||s===a.length;return d.p2ms({m:s,pubkeys:i,signatures:a},{allowIncomplete:n,validate:o});case m.P2SH:var u=e(r.redeemScriptType,r,n);if(!u)return;return d.p2sh({redeem:{output:u.output||r.redeemScript,input:u.input,witness:u.witness}});case m.P2WSH:var f=e(r.witnessScriptType,r,n);if(!f)return;return d.p2wsh({redeem:{output:r.witnessScript,input:f.input,witness:f.witness}})}}(r.prevOutType,r,e);if(i)t.setInputScript(n,i.input),t.setWitness(n,i.witness);else{if(!e&&r.prevOutType===m.NONSTANDARD)throw new Error("Unknown input type");if(!e)throw new Error("Not enough information")}})),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t}},{key:"__canModifyInputs",value:function(){return this.__INPUTS.every((function(e){return!e.signatures||e.signatures.every((function(e){return!e||0!==(E(e)&b.Transaction.SIGHASH_ANYONECANPAY)}))}))}},{key:"__needsOutputs",value:function(e){return e===b.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some((function(e){return!!e.signatures&&e.signatures.some((function(e){return!!e&&!(E(e)&b.Transaction.SIGHASH_NONE)}))}))}},{key:"__canModifyOutputs",value:function(){var e=this.__TX.ins.length,t=this.__TX.outs.length;return this.__INPUTS.every((function(r){return void 0===r.signatures||r.signatures.every((function(r){if(!r)return!0;var n=31&E(r);return n===b.Transaction.SIGHASH_NONE||n===b.Transaction.SIGHASH_SINGLE&&e<=t}))}))}},{key:"__overMaximumFees",value:function(e){return(this.__INPUTS.reduce((function(e,t){return e+(t.value>>>0)}),0)-this.__TX.outs.reduce((function(e,t){return e+t.value}),0))/e>this.maximumFeeRate}}],[{key:"fromTransaction",value:function(e,r){var n=new t(r);return n.setVersion(e.version),n.setLockTime(e.locktime),e.outs.forEach((function(e){n.addOutput(e.script,e.value)})),e.ins.forEach((function(e){n.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})})),n.__INPUTS.forEach((function(t,r){!function(e,t,r){if(e.redeemScriptType!==m.P2MS||!e.redeemScript)return;if(e.pubkeys.length===e.signatures.length)return;var n=e.signatures.concat();e.signatures=e.pubkeys.map((function(i){var a,s=c.fromPublicKey(i);return n.some((function(i,o){if(!i)return!1;var u=p.signature.decode(i),f=t.hashForSignature(r,e.redeemScript,u.hashType);return!!s.verify(f,u.signature)&&(n[o]=void 0,a=i,!0)})),a}))}(t,e,r)})),n}}]),t}();function S(e,t){y(v.Buffer,e);var r=u.output(e);switch(r){case m.P2PKH:if(!t)return{type:r};var n=d.p2pkh({output:e}).hash,i=f.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r};case m.P2WPKH:if(!t)return{type:r};var a=d.p2wpkh({output:e}).hash,s=f.hash160(t);return a.equals(s)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r};case m.P2PK:return{type:r,pubkeys:[d.p2pk({output:e}).pubkey],signatures:[void 0]};case m.P2MS:var o=d.p2ms({output:e});return{type:r,pubkeys:o.pubkeys,signatures:o.pubkeys.map((function(){})),maxSignatures:o.m}}return{type:r}}function k(e){return void 0!==e.signScript&&void 0!==e.signType&&void 0!==e.pubkeys&&void 0!==e.signatures&&e.signatures.length===e.pubkeys.length&&e.pubkeys.length>0&&(!1===e.hasWitness||void 0!==e.value)}function E(e){return e.readUInt8(e.length-1)}t.TransactionBuilder=w}).call(this,r(3).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096),i=r(1230),a=r(1653),s=r(1231),o=r(1232),u=r(1658),f=r(1661),c=r(1663),h=r(1665),d={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};t.types=d,t.output=function(e){if(c.output.check(e))return d.P2WPKH;if(h.output.check(e))return d.P2WSH;if(o.output.check(e))return d.P2PKH;if(u.output.check(e))return d.P2SH;var t=n.decompile(e);if(!t)throw new TypeError("Invalid script");return i.output.check(t)?d.P2MS:s.output.check(t)?d.P2PK:f.output.check(t)?d.WITNESS_COMMITMENT:a.output.check(t)?d.NULLDATA:d.NONSTANDARD},t.input=function(e,t){var r=n.decompile(e);if(!r)throw new TypeError("Invalid script");return o.input.check(r)?d.P2PKH:u.input.check(r,t)?d.P2SH:i.input.check(r,t)?d.P2MS:s.input.check(r)?d.P2PK:d.NONSTANDARD},t.witness=function(e,t){var r=n.decompile(e);if(!r)throw new TypeError("Invalid script");return c.input.check(r)?d.P2WPKH:h.input.check(r,t)?d.P2WSH:d.NONSTANDARD}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096),i=r(1096);function a(e){return e===i.OPS.OP_0||n.isCanonicalScriptSignature(e)}function s(e,t){var r=n.decompile(e);return!(r.length<2)&&(r[0]===i.OPS.OP_0&&(t?r.slice(1).every(a):r.slice(1).every(n.isCanonicalScriptSignature)))}t.check=s,s.toJSON=function(){return"multisig input"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096),i=r(1096),a=r(1120),s=i.OPS.OP_RESERVED;function o(e,t){var r=n.decompile(e);if(r.length<4)return!1;if(r[r.length-1]!==i.OPS.OP_CHECKMULTISIG)return!1;if(!a.Number(r[0]))return!1;if(!a.Number(r[r.length-2]))return!1;var o=r[0]-s,u=r[r.length-2]-s;return!(o<=0)&&(!(u>16)&&(!(o>u)&&(u===r.length-3&&(!!t||r.slice(1,-2).every(n.isCanonicalPubKey)))))}t.check=o,o.toJSON=function(){return"multi-sig output"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096),i=n.OPS;function a(e){var t=n.compile(e);return t.length>1&&t[0]===i.OP_RETURN}t.check=a,a.toJSON=function(){return"null data output"};var s={check:a};t.output=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096);function i(e){var t=n.decompile(e);return 1===t.length&&n.isCanonicalScriptSignature(t[0])}t.check=i,i.toJSON=function(){return"pubKey input"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096),i=r(1096);function a(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalPubKey(t[0])&&t[1]===i.OPS.OP_CHECKSIG}t.check=a,a.toJSON=function(){return"pubKey output"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096);function i(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalScriptSignature(t[0])&&n.isCanonicalPubKey(t[1])}t.check=i,i.toJSON=function(){return"pubKeyHash input"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096),i=r(1096);function a(e){var t=n.compile(e);return 25===t.length&&t[0]===i.OPS.OP_DUP&&t[1]===i.OPS.OP_HASH160&&20===t[2]&&t[23]===i.OPS.OP_EQUALVERIFY&&t[24]===i.OPS.OP_CHECKSIG}t.check=a,a.toJSON=function(){return"pubKeyHash output"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1659);t.input=n;var i=r(1660);t.output=i},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096),i=r(1230),a=r(1231),s=r(1232),o=r(1327),u=r(1328);function f(t,r){var f=n.decompile(t);if(f.length<1)return!1;var c=f[f.length-1];if(!e.isBuffer(c))return!1;var h=n.decompile(n.compile(f.slice(0,-1))),d=n.decompile(c);return!!d&&(!!n.isPushOnly(h)&&(1===f.length?u.check(d)||o.check(d):!(!s.input.check(h)||!s.output.check(d))||(!(!i.input.check(h,r)||!i.output.check(d))||!(!a.input.check(h)||!a.output.check(d)))))}t.check=f,f.toJSON=function(){return"scriptHash input"}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096),i=r(1096);function a(e){var t=n.compile(e);return 23===t.length&&t[0]===i.OPS.OP_HASH160&&20===t[1]&&t[22]===i.OPS.OP_EQUAL}t.check=a,a.toJSON=function(){return"scriptHash output"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1662);t.output=n},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096),i=r(1096),a=r(1120),s=r(1102),o=e.from("aa21a9ed","hex");function u(e){var t=n.compile(e);return t.length>37&&t[0]===i.OPS.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(o)}t.check=u,u.toJSON=function(){return"Witness commitment output"},t.encode=function(t){s(a.Hash256bit,t);var r=e.allocUnsafe(36);return o.copy(r,0),t.copy(r,4),n.compile([i.OPS.OP_RETURN,r])},t.decode=function(e){return s(u,e),n.decompile(e)[1].slice(4,36)}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1664);t.input=n;var i=r(1327);t.output=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096);function i(e){var t,r=n.decompile(e);return 2===r.length&&n.isCanonicalScriptSignature(r[0])&&(t=r[1],n.isCanonicalPubKey(t)&&33===t.length)}t.check=i,i.toJSON=function(){return"witnessPubKeyHash input"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1666);t.input=n;var i=r(1328);t.output=i},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1096),i=r(1102),a=r(1230),s=r(1231),o=r(1232);function u(t,r){if(i(i.Array,t),t.length<1)return!1;var u=t[t.length-1];if(!e.isBuffer(u))return!1;var f=n.decompile(u);if(!f||0===f.length)return!1;var c=n.compile(t.slice(0,-1));return!(!o.input.check(c)||!o.output.check(f))||(!(!a.input.check(c,r)||!a.output.check(f))||!(!s.input.check(c)||!s.output.check(f)))}t.check=u,u.toJSON=function(){return"witnessScriptHash input"}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(3).Buffer,s=r(187),o=r(35),u=r(1668);function f(e,t,r){return c.apply(this,arguments)}function c(){return(c=i(n.mark((function e(t,r,i){var a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.digest(t,r,i);case 2:return a=e.sent,e.abrupt("return",o.encode(a,r,i));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f.Buffer=a,f.multihash=o,f.digest=function(){var e=i(n.mark((function e(t,r,i){var a,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.createHash(r),e.next=3,a(t);case 3:return s=e.sent,e.abrupt("return",i?s.slice(0,i):s);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),f.createHash=function(e){if(!e)throw s("hash algorithm must be specified","ERR_HASH_ALGORITHM_NOT_SPECIFIED");if(e=o.coerceCode(e),!f.functions[e])throw s("multihash function '".concat(e,"' not yet supported"),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return f.functions[e]},f.functions={17:u.sha1,18:u.sha2256,19:u.sha2512,20:u.sha3512,21:u.sha3384,22:u.sha3256,23:u.sha3224,24:u.shake128,25:u.shake256,26:u.keccak224,27:u.keccak256,28:u.keccak384,29:u.keccak512,34:u.murmur3128,35:u.murmur332,86:u.dblSha2256},u.addBlake(f.functions),f.validate=function(){var e=i(n.mark((function e(t,r){var i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t,o.decode(r).name);case 2:return i=e.sent,e.abrupt("return",0===a.compare(r,i));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),e.exports=f},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(3).Buffer,s=r(127),o=r(188),u=r(1669),f=r(1670).fromNumberTo32BitBuf,c=function(e){return function(){var t=i(n.mark((function t(r){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="sha3-224"===t.t0?3:"sha3-256"===t.t0?4:"sha3-384"===t.t0?5:"sha3-512"===t.t0?6:"shake-128"===t.t0?7:"shake-256"===t.t0?8:"keccak-224"===t.t0?9:"keccak-256"===t.t0?10:"keccak-384"===t.t0?11:"keccak-512"===t.t0?12:"murmur3-128"===t.t0?13:"murmur3-32"===t.t0?14:15;break;case 3:return t.abrupt("return",a.from(s.sha3_224.arrayBuffer(r)));case 4:return t.abrupt("return",a.from(s.sha3_256.arrayBuffer(r)));case 5:return t.abrupt("return",a.from(s.sha3_384.arrayBuffer(r)));case 6:return t.abrupt("return",a.from(s.sha3_512.arrayBuffer(r)));case 7:return t.abrupt("return",a.from(s.shake128.create(128).update(r).arrayBuffer()));case 8:return t.abrupt("return",a.from(s.shake256.create(256).update(r).arrayBuffer()));case 9:return t.abrupt("return",a.from(s.keccak224.arrayBuffer(r)));case 10:return t.abrupt("return",a.from(s.keccak256.arrayBuffer(r)));case 11:return t.abrupt("return",a.from(s.keccak384.arrayBuffer(r)));case 12:return t.abrupt("return",a.from(s.keccak512.arrayBuffer(r)));case 13:return t.abrupt("return",a.from(o.x64.hash128(r),"hex"));case 14:return t.abrupt("return",f(o.x86.hash32(r)));case 15:throw new TypeError("".concat(e," is not a supported algorithm"));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};e.exports={sha1:u("sha1"),sha2256:u("sha2-256"),sha2512:u("sha2-512"),dblSha2256:u("dbl-sha2-256"),sha3224:c("sha3-224"),sha3256:c("sha3-256"),sha3384:c("sha3-384"),sha3512:c("sha3-512"),shake128:c("shake-128"),shake256:c("shake-256"),keccak224:c("keccak-224"),keccak256:c("keccak-256"),keccak384:c("keccak-384"),keccak512:c("keccak-512"),murmur3128:c("murmur3-128"),murmur332:c("murmur3-32"),addBlake:r(1671)}},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(3).Buffer,s=self.crypto||self.msCrypto;e.exports=function(e){if("undefined"===typeof self||!self.crypto&&!self.msCrypto)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return function(){var t=i(n.mark((function t(r){var i;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="sha1"===t.t0?3:"sha2-256"===t.t0?8:"sha2-512"===t.t0?13:"dbl-sha2-256"===t.t0?18:26;break;case 3:return t.t1=a,t.next=6,s.subtle.digest({name:"SHA-1"},r);case 6:return t.t2=t.sent,t.abrupt("return",t.t1.from.call(t.t1,t.t2));case 8:return t.t3=a,t.next=11,s.subtle.digest({name:"SHA-256"},r);case 11:return t.t4=t.sent,t.abrupt("return",t.t3.from.call(t.t3,t.t4));case 13:return t.t5=a,t.next=16,s.subtle.digest({name:"SHA-512"},r);case 16:return t.t6=t.sent,t.abrupt("return",t.t5.from.call(t.t5,t.t6));case 18:return t.next=20,s.subtle.digest({name:"SHA-256"},r);case 20:return i=t.sent,t.t7=a,t.next=24,s.subtle.digest({name:"SHA-256"},i);case 24:return t.t8=t.sent,t.abrupt("return",t.t7.from.call(t.t7,t.t8));case 26:throw new Error("".concat(e," is not a supported algorithm"));case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},function(e,t,r){"use strict";var n=r(3).Buffer;e.exports={fromNumberTo32BitBuf:function(e){for(var t=new Array(4),r=0;r<4;r++)t[r]=255&e,e>>=8;return n.from(t)}}},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(3).Buffer,s=r(128),o={init:s.blake2bInit,update:s.blake2bUpdate,digest:s.blake2bFinal},u={init:s.blake2sInit,update:s.blake2sUpdate,digest:s.blake2sFinal},f=function(e,t){return function(){var r=i(n.mark((function r(i){var s;return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=t.init(e,null),t.update(s,i),r.abrupt("return",a.from(t.digest(s)));case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()};e.exports=function(e){for(var t=0;t<64;t++)e[45569+t]=f(t+1,o);for(var r=0;r<32;r++)e[45633+r]=f(r+1,u)}},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(3).Buffer,s=r(127),o=r(188),u=r(1673),f=r(1674).fromNumberTo32BitBuf,c=function(e){return function(){var t=i(n.mark((function t(r){return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="sha3-224"===t.t0?3:"sha3-256"===t.t0?4:"sha3-384"===t.t0?5:"sha3-512"===t.t0?6:"shake-128"===t.t0?7:"shake-256"===t.t0?8:"keccak-224"===t.t0?9:"keccak-256"===t.t0?10:"keccak-384"===t.t0?11:"keccak-512"===t.t0?12:"murmur3-128"===t.t0?13:"murmur3-32"===t.t0?14:15;break;case 3:return t.abrupt("return",a.from(s.sha3_224.arrayBuffer(r)));case 4:return t.abrupt("return",a.from(s.sha3_256.arrayBuffer(r)));case 5:return t.abrupt("return",a.from(s.sha3_384.arrayBuffer(r)));case 6:return t.abrupt("return",a.from(s.sha3_512.arrayBuffer(r)));case 7:return t.abrupt("return",a.from(s.shake128.create(128).update(r).arrayBuffer()));case 8:return t.abrupt("return",a.from(s.shake256.create(256).update(r).arrayBuffer()));case 9:return t.abrupt("return",a.from(s.keccak224.arrayBuffer(r)));case 10:return t.abrupt("return",a.from(s.keccak256.arrayBuffer(r)));case 11:return t.abrupt("return",a.from(s.keccak384.arrayBuffer(r)));case 12:return t.abrupt("return",a.from(s.keccak512.arrayBuffer(r)));case 13:return t.abrupt("return",a.from(o.x64.hash128(r),"hex"));case 14:return t.abrupt("return",f(o.x86.hash32(r)));case 15:throw new TypeError("".concat(e," is not a supported algorithm"));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};e.exports={sha1:u("sha1"),sha2256:u("sha2-256"),sha2512:u("sha2-512"),dblSha2256:u("dbl-sha2-256"),sha3224:c("sha3-224"),sha3256:c("sha3-256"),sha3384:c("sha3-384"),sha3512:c("sha3-512"),shake128:c("shake-128"),shake256:c("shake-256"),keccak224:c("keccak-224"),keccak256:c("keccak-256"),keccak384:c("keccak-384"),keccak512:c("keccak-512"),murmur3128:c("murmur3-128"),murmur332:c("murmur3-32"),addBlake:r(1675)}},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(3).Buffer,s=self.crypto||self.msCrypto;e.exports=function(e){if("undefined"===typeof self||!self.crypto&&!self.msCrypto)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return function(){var t=i(n.mark((function t(r){var i;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="sha1"===t.t0?3:"sha2-256"===t.t0?8:"sha2-512"===t.t0?13:"dbl-sha2-256"===t.t0?18:26;break;case 3:return t.t1=a,t.next=6,s.subtle.digest({name:"SHA-1"},r);case 6:return t.t2=t.sent,t.abrupt("return",t.t1.from.call(t.t1,t.t2));case 8:return t.t3=a,t.next=11,s.subtle.digest({name:"SHA-256"},r);case 11:return t.t4=t.sent,t.abrupt("return",t.t3.from.call(t.t3,t.t4));case 13:return t.t5=a,t.next=16,s.subtle.digest({name:"SHA-512"},r);case 16:return t.t6=t.sent,t.abrupt("return",t.t5.from.call(t.t5,t.t6));case 18:return t.next=20,s.subtle.digest({name:"SHA-256"},r);case 20:return i=t.sent,t.t7=a,t.next=24,s.subtle.digest({name:"SHA-256"},i);case 24:return t.t8=t.sent,t.abrupt("return",t.t7.from.call(t.t7,t.t8));case 26:throw new Error("".concat(e," is not a supported algorithm"));case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},function(e,t,r){"use strict";var n=r(3).Buffer;e.exports={fromNumberTo32BitBuf:function(e){for(var t=new Array(4),r=0;r<4;r++)t[r]=255&e,e>>=8;return n.from(t)}}},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(3).Buffer,s=r(128),o={init:s.blake2bInit,update:s.blake2bUpdate,digest:s.blake2bFinal},u={init:s.blake2sInit,update:s.blake2sUpdate,digest:s.blake2sFinal},f=function(e,t){return function(){var r=i(n.mark((function r(i){var s;return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=t.init(e,null),t.update(s,i),r.abrupt("return",a.from(t.digest(s)));case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()};e.exports=function(e){for(var t=0;t<64;t++)e[45569+t]=f(t+1,o);for(var r=0;r<32;r++)e[45633+r]=f(r+1,u)}},function(e,t,r){"use strict";(function(e){var n=r(2),i=r(11),a=r(1329);t.resolve=function(e,t){for(var r=a.deserialize(e),n=t.split("/").filter(Boolean);n.length;){var s=n.shift();if(void 0===r[s])throw new Error("Object has no property '".concat(s,"'"));if(r=r[s],i.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}};var s=n.mark((function t(r,a){var s,o,u,f;return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isBuffer(r)&&!i.isCID(r)&&"string"!==typeof r&&null!==r){n.next=2;break}return n.abrupt("return");case 2:s=0,o=Object.keys(r);case 3:if(!(s<o.length)){n.next=12;break}return u=o[s],f=void 0===a?u:a+"/"+u,n.next=8,f;case 8:return n.delegateYield(t(r[u],f),"t0",9);case 9:s++,n.next=3;break;case 12:case"end":return n.stop()}}),t)}));t.tree=n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.deserialize(t),e.delegateYield(s(r),"t0",2);case 2:case"end":return e.stop()}}),e)}))}).call(this,r(3).Buffer)},function(e,t,r){"use strict";e.exports=r(1331)},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(1142),s=r(1335),o=function(){var e=i(n.mark((function e(t){var r,i,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,s.cid(t.serialize(),r);case 3:return i=e.sent,e.abrupt("return",new a(r.name||"",t.size,i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.exports=o},function(e,t,r){"use strict";var n=r(1332),i=r(1336);e.exports=function(e,t){var r=function(e){if(i.isDAGLink(e))return e;if(!("cid"in e||"hash"in e||"Hash"in e||"multihash"in e))throw new Error("Link must be a DAGLink or DAGLink-like. Convert the DAGNode into a DAGLink via `node.toDAGLink()`.");return new i(e.Name||e.name,e.Tsize||e.size,e.Hash||e.multihash||e.hash||e.cid)}(t);e._links.push(r),e._links=n(e._links)}},function(e,t,r){"use strict";var n=r(1142);e.exports.createDagLinkFromB58EncodedHash=function(e){return new n(e.Name||e.name||"",e.Tsize||e.Size||e.size||0,e.Hash||e.hash||e.multihash||e.cid)}},function(e,t,r){"use strict";(function(t){var n=r(11);e.exports=function(e,r){if("string"===typeof r)e._links=e._links.filter((function(e){return e.Name!==r}));else{if(!t.isBuffer(r)&&!n.isCID(r))throw new Error("second arg needs to be a name or CID");e._links=e._links.filter((function(e){return!e.Hash.equals(r)}))}}}).call(this,r(3).Buffer)},function(e,t,r){"use strict";var n=r(2),i=r(11),a=r(1337);t.resolve=function(e,t){for(var r=a.deserialize(e),n=t.split("/").filter(Boolean);n.length;){var s=n.shift();if(void 0===r[s]){var o=!0,u=!1,f=void 0;try{for(var c,h=r.Links[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var d=c.value;if(d.Name===s)return{value:d.Hash,remainderPath:n.join("/")}}}catch(p){u=!0,f=p}finally{try{o||null==h.return||h.return()}finally{if(u)throw f}}throw new Error("Object has no property '".concat(s,"'"))}if(r=r[s],i.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}},t.tree=n.mark((function e(t){var r,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.deserialize(t),e.next=3,"Data";case 3:return e.next=5,"Links";case 5:i=0;case 6:if(!(i<r.Links.length)){e.next=18;break}return e.next=9,"Links/".concat(i);case 9:return e.next=11,"Links/".concat(i,"/Name");case 11:return e.next=13,"Links/".concat(i,"/Tsize");case 13:return e.next=15,"Links/".concat(i,"/Hash");case 15:i++,e.next=6;break;case 18:case"end":return e.stop()}}),e)}))},function(e,t,r){"use strict";var n=r(2),i=r(13),a=r(3).Buffer,s=r(187),o=r(35),u=r(1684);function f(e,t,r){return c.apply(this,arguments)}function c(){return(c=i(n.mark((function e(t,r,i){var a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.digest(t,r,i);case 2:return a=e.sent,e.abrupt("return",o.encode(a,r,i));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f.Buffer=a,f.multihash=o,f.€€