
¯§#!/usr/bin/perl
# vim: sw=3 ai et

my $set = 0;
foreach my $f (@ARGV) {
   if ($set) { push @xpats, $f; next; }
   if ($f =~ m/^(?:but|BUT)$/) { $set = 1; next; }
}

my @included = ();
my @excluded = ();
foreach my $f (@ARGV) {
   my $inc = 1;
   foreach my $p (@xpats) {
      if ($f =~ m/$p/) {
        print "// $f =~ $p \n";
        push @excluded, $f; $inc = 0;
      }
   }
   push @included, $f if $inc;
}

for my $f (@included) {
  print $f,"\n"
}

for my $f (@excluded) {
  print "# ",$f,"\n";
}
1; # $Source: /my/perl/scripts/everything.pl$
§